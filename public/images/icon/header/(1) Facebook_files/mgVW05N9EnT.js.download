if (self.CavalryLogger) { CavalryLogger.start_js(["r\/fRe"]); }

__d("MWChatForwardDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3150584431630584",metadata:{relayPreloadable:!0},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatMediaRootQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"after"},b={defaultValue:null,kind:"LocalArgument",name:"before"},c={defaultValue:null,kind:"LocalArgument",name:"first"},d={defaultValue:null,kind:"LocalArgument",name:"last"},e={defaultValue:null,kind:"LocalArgument",name:"messageID"},f={defaultValue:null,kind:"LocalArgument",name:"scale"},g={defaultValue:null,kind:"LocalArgument",name:"threadID"},h=[{kind:"Variable",name:"id",variableName:"threadID"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"before",variableName:"before"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"message_id",variableName:"messageID"},{kind:"Literal",name:"message_shared_media_type",value:"PHOTO_AND_VIDEO"}],k={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},o={alias:null,args:[{kind:"Literal",name:"height",value:2048},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:2048}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"downloadable_uri",storageKey:null}],storageKey:null},p={kind:"InlineFragment",selections:[n,{alias:null,args:null,kind:"ScalarField",name:"blurred_image_uri",storageKey:null},o],type:"MessageImage",abstractKey:null};n={kind:"InlineFragment",selections:[n,{alias:"sdUrl",args:[{kind:"Literal",name:"quality",value:"SD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"SD")'},{alias:"hdUrl",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},o,{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"MessageVideo",abstractKey:null};o={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};var q={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null}],storageKey:null},r={kind:"InlineFragment",selections:[i],type:"Node",abstractKey:"__isNode"};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g],kind:"Fragment",metadata:null,name:"MWChatMediaRootQuery",selections:[{alias:null,args:h,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[i,{alias:null,args:j,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[k,i,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[m,p,n],storageKey:null}],type:"UserMessage",abstractKey:null}],storageKey:null},o],storageKey:null},q],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[g,e,a,c,b,d,f],kind:"Operation",name:"MWChatMediaRootQuery",selections:[{alias:null,args:h,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[i,{alias:null,args:j,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[m,{kind:"InlineFragment",selections:[k,i,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[m,p,n,r],storageKey:null}],type:"UserMessage",abstractKey:null},r],storageKey:null},o],storageKey:null},q],storageKey:null}],storageKey:null}]},params:{id:"2943836832390210",metadata:{relayPreloadable:!0},name:"MWChatMediaRootQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatMessageId.bs",["bs_block","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function a(a){if(typeof a==="number"||!a.tag)return;else return a[0].messageId}function c(a){if(typeof a==="number"||!a.tag)return;else return a[0].threadId}function d(a,c,d){return b("bs_block").__(1,[{threadId:b("bs_caml_format").caml_int64_of_string(a),messageId:c,timestamp:b("bs_caml_format").caml_int64_of_string(d)}])}function e(a){return b("bs_block").__(1,[{threadId:[0,0],messageId:a,timestamp:[0,0]}])}var g=b("bs_block").__(1,[{threadId:[0,0],messageId:"",timestamp:[0,0]}]);f.getMessageId=a;f.getThreadId=c;f.makeSent=d;f.emptyForExamples=g;f.emptyForExamplesWithId=e}),null);
__d("MessengerStatePrinter.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return JSON.stringify(a,null,2)}f.jsonPrettyStringify=a}),null);
__d("MWMSForwardMessage.bs",["Promise","bs_js_dict","BanzaiODS","bs_belt_Option","CurrentUser","FBMqttChannel","MessengerState.bs","MWChatMessageId.bs","MercuryLocalIDs","getCurrentRoute","MercurySourceType","useCometRouterState","MWChatTabEntryPoints.bs","MessengerStatePrinter.bs","MessengerWebEntryPoint"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e){var f=b("CurrentUser").getID();e=e==null?null:b("getCurrentRoute")(e).tracePolicy;var g=b("MercuryLocalIDs").generateOfflineThreadingID(void 0),h=b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(b("MWChatTabEntryPoints.bs").tabEntryPoints,a),b("MessengerWebEntryPoint").UNKNOWN);f=b("MessengerStatePrinter.bs").jsonPrettyStringify({sender_fbid:f,to:a,msgid:g,client_tags:{web_source:b("MercurySourceType").CHAT_FORWARD_DIALOG,"web:trigger":h,tracePolicy:e},copy_message:c,copy_attachment:d});b("FBMqttChannel").publish("/send_message2",f).then(function(a){return b("Promise").resolve(0)})["catch"](function(a){return b("Promise").resolve(0)});return 0}function a(){var a=b("useCometRouterState")();return function(b,c){return g(b[1],void 0,c,a)}}function c(a){var c=b("useCometRouterState")();return function(a,d){b("BanzaiODS").bumpEntityKey(3185,"mwchat_send","forward");d=b("MWChatMessageId.bs").getMessageId(d);if(d!==void 0)return g(a[1],b("MessengerState.bs").getServerMessageID(b("CurrentUser").getID(),d),void 0,c);else return 0}}f.send=g;f.useForwardAttachment=a;f.useForwardMessage=c}),null);
__d("MWMSForwardMessage.re",["bs_curry","MWMSForwardMessage.bs"],(function(a,b,c,d,e,f){a=function(){var a=b("MWMSForwardMessage.bs").useForwardAttachment();return function(c){c=b("bs_curry")._2(a,c.to_,c.copyAttachmentID);return c}};f.useForwardAttachment=a}),null);
__d("MWChatMessageId.re",["bs_curry","MWChatMessageId.bs"],(function(a,b,c,d,e,f){a=b("MWChatMessageId.bs").getMessageId;f.getMessageId=a;c=b("MWChatMessageId.bs").getThreadId;f.getThreadId=c;d=function(a,c,d){a=b("bs_curry")._3(b("MWChatMessageId.bs").makeSent,a,c,d);return a};f.makeSent=d}),null);
__d("MWChatVideoPlayerControls.react",["React","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerFullscreenControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerScrubber.react","VideoPlayerVolumeControl.react","stylex","useVideoPlayerBigPlayButtonOverlay","useVideoPlayerDefaultControlsVisibility"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function h(a){return g.jsx("span",{className:"fi2e5rcv jk2qo03r",children:a.children})}function a(a){var c=b("useVideoPlayerDefaultControlsVisibility")(),d=c.isControlsVisible;c=c.onUserInteraction;var e=b("VideoPlayerHooks").usePaused();e=b("useVideoPlayerBigPlayButtonOverlay")({forceVisible:e});var f=e.bigPlayButtonElement;e=e.bigPlayButtonIsVisible;var i=b("VideoPlayerHooks").useIsFullscreen();d=d&&!e;e=g.jsx(b("VideoPlayerControlsContainerOverlay.react"),{isVisible:d,children:i?g.jsxs(g.Fragment,{children:[g.jsxs(b("VideoPlayerControlsGroups.react").Contracted,{children:[g.jsx(b("VideoPlayerPlaybackControl.react"),{}),g.jsx(b("VideoPlayerPlaybackTimer.react"),{})]}),g.jsx(b("VideoPlayerControlsGroups.react").Expanded,{children:g.jsx(b("VideoPlayerScrubber.react"),{onUserInteraction:c})}),g.jsxs(b("VideoPlayerControlsGroups.react").Contracted,{children:[g.jsx(b("VideoPlayerFullscreenControl.react"),{onUserInteraction:c}),g.jsx(b("VideoPlayerVolumeControl.react"),{onUserInteraction:c})]})]}):g.jsxs(g.Fragment,{children:[g.jsx(b("VideoPlayerControlsGroups.react").Contracted,{children:g.jsx(h,{children:g.jsx(b("VideoPlayerPlaybackControl.react"),{})})}),g.jsx(b("VideoPlayerControlsGroups.react").Expanded,{children:g.jsx(b("VideoPlayerScrubber.react"),{onUserInteraction:c})}),g.jsxs(b("VideoPlayerControlsGroups.react").Contracted,{children:[a.hideExpandButton?null:g.jsx(h,{children:g.jsx(b("VideoPlayerFullscreenControl.react"),{onUserInteraction:c})}),g.jsx(h,{children:g.jsx(b("VideoPlayerVolumeControl.react"),{onUserInteraction:c})})]})]})});return g.jsxs(g.Fragment,{children:[f,e]})}}),null);
__d("VideoPlayerX.react",["React","VideoPlayerFallbackCover.react","VideoPlayerRetryableErrorBoundary.react","VideoPlayerXImpl.react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function h(a){a=a.retry;return g.jsx(b("VideoPlayerFallbackCover.react"),{onRetry:a})}function a(a){var c=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn;c=c===void 0?!1:c;var d=a.errorBoundaryFallback;a=babelHelpers.objectWithoutPropertiesLoose(a,["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"]);a=g.jsx(b("VideoPlayerXImpl.react"),babelHelpers["extends"]({VideoPlayerShakaPerformanceLoggerClass:null},a));return c?a:g.jsx(b("VideoPlayerRetryableErrorBoundary.react"),{description:"VideoPlayerX",fallback:(c=d)!=null?c:h,children:a})}}),null);
__d("MWChatVideoPlayer.react",["GraphQLVideoAutoplayGatingResult","MWChatVideoAutoplaySettingContext","MWChatVideoPlayerControls.react","React","VideoPlayerDefaultControls.react","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerSurface.react","VideoPlayerX.react","getVideoPlayerAutoplayProps"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.fbid,d=a.hdSrc,e=a.hideExpandButton,f=a.initialForceHD,h=a.originalHeight,i=a.originalWidth,j=a.sdSrc;a=a.useDefaultControls;f=b("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:d,hdSrcPreferred:(d=f)!=null?d:!1,sdSrc:j});d=b("MWChatVideoAutoplaySettingContext").useMWChatVideoAutoplaySetting();if(f==null)return null;j=[{Component:b("VideoPlayerProgressiveImplementationV2.react"),data:f,typename:"VideoPlayerProgressiveImplementation"}];f=b("getVideoPlayerAutoplayProps")(b("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult("unknown",d,!0),"respect_user_settings",null);return g.createElement(b("VideoPlayerX.react"),babelHelpers["extends"]({},f,{implementations:j,key:c,loopCount:-1,originalHeight:h,originalWidth:i,playerOriginOverride:"messaging",portalingEnabled:!1,subOrigin:"messenger_thread",videoFBID:c}),g.jsx(b("VideoPlayerSurface.react"),{children:a===!0?g.jsx(b("VideoPlayerDefaultControls.react"),{}):g.jsx(b("MWChatVideoPlayerControls.react"),{hideExpandButton:e===!0})}))}}),null);
__d("MWChatForwardDialog.entrypoint",["JSResourceForInteraction","WebPixelRatio","MWChatForwardDialogQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){return{queries:{forwardQueryReference:{parameters:b("MWChatForwardDialogQuery$Parameters"),variables:{scale:b("WebPixelRatio").get()}}}}},root:b("JSResourceForInteraction")("MWChatForwardDialog.react",{"class":"responsive",name:"Comet Messenger Forward Dialog",oncall:"messenger_web_product"}).__setRef("MWChatForwardDialog.entrypoint")};e.exports=a}),null);
__d("useMWChatForward",["MWChatForwardDialog.entrypoint","React","useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.messageID,d=a.onSend;a=b("useCometEntryPointDialog")(b("MWChatForwardDialog.entrypoint"),{});var e=a[0];a=a[1];var f=g.useCallback(function(){e({messageID:c,onSend:d})},[d,e,c]);return{onClick:f,triggerRef:a}}}),null);
__d("MWChatMediaData",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){return a==null||a.__typename!=="MessageVideo"||a.sdUrl==null||a.image==null||a.image.uri==null||a.image.width==null||a.image.height==null||a.original_dimensions==null||a.original_dimensions.x==null||a.original_dimensions.y==null?null:{hdUrl:a.hdUrl,image:{downloadableUri:a.image.downloadable_uri,height:a.image.height,uri:a.image.uri,width:a.image.width},legacyAttachmentID:a.legacy_attachment_id,originalDimensions:{x:a.original_dimensions.x,y:a.original_dimensions.y},sdUrl:a.sdUrl}},h=function(a){return a==null||a.__typename!=="MessageImage"||a.image==null||a.image.uri==null||a.image.width==null||a.image.height==null?null:{blurredImageUri:a.blurred_image_uri,image:{downloadableUri:a.image.downloadable_uri,height:a.image.height,uri:a.image.uri,width:a.image.width},legacyAttachmentID:a.legacy_attachment_id}};a=function(a){return a.reduce(function(a,b){if(b==null||b.node==null||b.node.id==null||b.node.message_id==null||b.node.blob_attachments==null||b.cursor==null)return a;var c=b.node,d=c.blob_attachments,e=c.id,f=c.message_id,i=c.timestamp_precise,j=b.cursor;c=d.map(function(a){if(a.__typename==="MessageImage"){var b=h(a);return b==null?null:{__typename:"MessageImage",attachment:b,cursor:j,messageID:f,nodeID:e,timestamp:i}}else if(a.__typename==="MessageVideo"){b=g(a);return b==null?null:{__typename:"MessageVideo",attachment:b,cursor:j,messageID:f,nodeID:e,timestamp:i}}else return null}).filter(Boolean);return a.concat(c)},[]).filter(Boolean)};f.normalizeMessages=a}),null);
__d("MWChatMediaReducer",[],(function(a,b,c,d,e,f){"use strict";a={curIdx:0,hasNextPage:!1,hasPrevPage:!1,initialCursor:null,isFetchingNextPage:!1,isFetchingPrevPage:!1,mediaList:[]};f.initialState=a;b=function(a,b){switch(b.type){case"initialize":return babelHelpers["extends"]({},a,{curIdx:b.curIdx,initialCursor:b.initialCursor,mediaList:b.mediaList});case"startFetchingNextPage":return babelHelpers["extends"]({},a,{isFetchingNextPage:!0});case"startFetchingPrevPage":return babelHelpers["extends"]({},a,{isFetchingPrevPage:!0});case"prevPageReceived":return babelHelpers["extends"]({},a,{curIdx:a.curIdx+b.medias.length,hasPrevPage:b.hasPrevPage,isFetchingPrevPage:!1,mediaList:b.medias.concat(a.mediaList)});case"nextPageReceived":return babelHelpers["extends"]({},a,{hasNextPage:b.hasNextPage,isFetchingNextPage:!1,mediaList:a.mediaList.concat(b.medias)});case"messageDeleted":return babelHelpers["extends"]({},a,{curIdx:Math.min(Math.max(b.curIdx,0),a.mediaList.length-1),mediaList:b.mediaList});case"viewMediaAtIndex":return babelHelpers["extends"]({},a,{curIdx:Math.min(Math.max(b.curIdx,0),a.mediaList.length-1)});default:return a}};f.reducer=b}),null);
__d("MWChatMediaViewerImage.react",["fbt","CometHero.react","CometPagelet.react","CometPhotoViewerImageSuspense","CometPhotoViewerInnerWrapper.react","CometPressable.react","React"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=g._("Kh\u00f4ng c\u00f3 m\u00f4 t\u1ea3.");function a(a){var c=a.blurredImageURI,d=a.imageURI,e=a.origHeight,f=a.origSrc;a=a.origWidth;var j=h.useState(!1),k=j[0],l=j[1];j=b("CometPhotoViewerInnerWrapper.react").useCometPhotoViewerContainerStyles(!0);return h.jsxs(b("CometPagelet.react").Placeholder,{className:j,fallback:f!=null?h.jsx(b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{height:e,imageUri:f,showPlaceholderImage:f!=null&&a!=null&&e!=null,width:a,withFooter:!0}):null,name:"MessengerMediaViewerPhoto",pageletType:"media",children:[h.jsx(b("CometHero.react"),{description:"MWChatMediaViewerImage"}),c==null||k?h.jsx(b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponent:function(a){return h.jsx(b("CometPhotoViewerImageSuspense"),{alt:i,className:a,src:d},d)},withFooter:!0}):h.jsx(b("CometPressable.react"),{display:"inline",label:g._("Nh\u1ea5n \u0111\u1ec3 xem n\u1ed9i dung nh\u1ea1y c\u1ea3m"),onPress:function(){return l(!0)},children:h.jsx(b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponent:function(a){return h.jsx(b("CometPhotoViewerImageSuspense"),{alt:i,className:a,src:c},c)},withFooter:!0})})]},d)}}),null);
__d("MWChatMediaViewerStage.react",["ix","fbt","CometBlurredBackgroundImage.react","CometKeys","CometMediaViewerFilmstrip.react","CometTrackingNodeProvider.react","Locale","React","TetraCircleButton.react","deferredLoadComponent","fbicon","gkx","requireDeferred","stylex","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React"),j=b("deferredLoadComponent")(b("requireDeferred")("MWChatMediaViewerControls.react"));function a(a){var c=a.activeIndex,d=a.attachmentID,e=a.backgroundSrc,f=a.children,k=a.disableNextButton,l=a.disablePrevButton,m=a.downloadLink,n=a.hideNextButton,o=a.hidePrevButton,p=a.messageID,q=a.setActiveIndex,r=h._("\u1ea2nh tr\u01b0\u1edbc \u0111\u00f3"),s=h._("\u1ea2nh ti\u1ebfp theo"),t=i.useMemo(function(){var c=[];!o&&!l&&c.push({command:{key:b("CometKeys").LEFT},description:r,handler:function(){return q(a.activeIndex-1)}});!n&&!k&&c.push({command:{key:b("CometKeys").RIGHT},description:s,handler:function(){return q(a.activeIndex+1)}});return c},[k,l,n,o,s,r,a.activeIndex,q]);b("useLayerKeyCommands")(t);t=b("gkx")("1435437");return i.jsxs("div",{className:"iqfcb0g7 abiwlrkh l9j0dhe7 p01isnhg datstx6m buofh1pr cbu4d94t j83agx80 tqsryivl bp9cbjyn",ref:function(a){a&&a.focus()},tabIndex:"0",children:[i.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg akz8cqyu n7fi1qx3 i09qtzwb",children:e!=null?i.jsx(b("CometBlurredBackgroundImage.react"),{src:e}):null}),i.jsxs("div",{className:"k4urcfbm l9j0dhe7 j0qtgc86 e9n865no taijpn5t datstx6m buofh1pr j83agx80 rq0escxv",children:[t&&d!=null&&p!=null?i.jsx("div",{className:"tkr6xdv7 pmk7jnqg byvelhso oxoulkyr j83agx80 bp9cbjyn",children:i.jsx(j,{attachmentID:d,downloadLink:m,messageID:p})}):null,i.jsxs("div",{className:"kr520xx4 j9ispegn pmk7jnqg i1fnvgqd n7fi1qx3 j83agx80 i09qtzwb bp9cbjyn",children:[i.jsx("div",{className:"dhix69tm sjgh65i0 wkznzc2l tr9rh885"+(o?" kr9hpln1":""),children:i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:143,children:i.jsx(b("TetraCircleButton.react"),{color:"secondary",disabled:l,icon:b("Locale").isRTL()?b("fbicon")._(g("492539"),24):b("fbicon")._(g("492491"),24),label:r,onPress:function(){return q(c-1)},size:48,testid:void 0,type:"overlay"})})}),i.jsx("div",{className:"dhix69tm sjgh65i0 wkznzc2l tr9rh885"+(n?" kr9hpln1":""),children:i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:142,children:i.jsx(b("TetraCircleButton.react"),{color:"secondary",disabled:k,icon:b("Locale").isRTL()?b("fbicon")._(g("492491"),24):b("fbicon")._(g("492539"),24),label:s,onPress:function(){return q(c+1)},size:48,testid:void 0,type:"overlay"})})})]}),f]}),i.jsx("div",{className:"stjgntxs ni8dbmo4 d2edcug0",children:i.jsx(b("CometMediaViewerFilmstrip.react"),{activeIndex:c,images:a.thumbnails.map(function(a){return babelHelpers["extends"]({},a,{mediaType:"image"})}),onSetImage:q})})]})}}),null);
__d("MWChatMediaViewerVideo.react",["CometRouteRenderType","MWChatVideoPlayer.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRouteRenderType").useIsPushView();return h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","display-1":"j83agx80","flex-grow-1":"buofh1pr","justify-content-1":"taijpn5t","min-height-1":"pnzxbu4t","width-1":"k4urcfbm"},c?{"height-1":"n626y76b"}:null,c?null:{"height-1":"ojb6a8i8"}),children:h.jsx(b("MWChatVideoPlayer.react"),{fbid:a.fbid,hdSrc:a.hdSrc,initialForceHD:!0,originalHeight:a.originalHeight,originalWidth:a.originalWidth,sdSrc:a.sdSrc,useDefaultControls:!0})})}}),null);
__d("MWChatMediaRoot.react",["fbt","CometContentNotAvailable.react","CometErrorBoundary.react","CometErrorRoot.react","CometRelay","CometRouteParams","MWChatDeleteMessageEventEmitter","MWChatMediaData","MWChatMediaReducer","MWChatMediaViewerImage.react","MWChatMediaViewerStage.react","MWChatMediaViewerVideo.react","MWChatMessageId.re","React","WebPixelRatio","useIsMountedRef","MWChatMediaRootQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j=20,k=h!==void 0?h:h=b("MWChatMediaRootQuery.graphql");function l(a){var c=b("CometRelay").useRelayEnvironment(),d=b("CometRouteParams").useRouteParams(),e=i.useState(null),f=e[0],h=e[1];e=i.useReducer(b("MWChatMediaReducer").reducer,b("MWChatMediaReducer").initialState);var l=e[0],m=l.curIdx,n=l.hasNextPage,o=l.hasPrevPage,p=l.initialCursor,q=l.isFetchingNextPage,r=l.isFetchingPrevPage,s=l.mediaList,t=e[1],u=b("useIsMountedRef")(),v=b("CometRelay").usePreloadedQuery(k,a.queries.messengerMediaRootQueryReference);if(f!==null)throw f;i.useEffect(function(){var a;a=v==null?void 0:(a=v.message_thread)==null?void 0:(a=a.messages_with_attachments)==null?void 0:(a=a.edges[0])==null?void 0:a.cursor;if(a!=null&&p===null){var c;c=v==null?void 0:(c=v.message_thread)==null?void 0:(c=c.messages_with_attachments)==null?void 0:c.edges;if(c!=null){c=b("MWChatMediaData").normalizeMessages(c);var e=0;d.attachment_id!=null&&(e=c.findIndex(function(a){return a.attachment.legacyAttachmentID===d.attachment_id}));t({curIdx:e,initialCursor:a,mediaList:c,type:"initialize"})}}},[p,v,d.attachment_id]);var w=v==null?void 0:(l=v.message_thread)==null?void 0:l.id;i.useEffect(function(){var a=b("MWChatDeleteMessageEventEmitter").subscribe(function(a){var b=m,d=s.filter(function(c,d){c=c.messageID===a;c&&(d<=m&&m>0&&b--);return!c});d.length!==s.length&&(w!=null&&c.commitUpdate(function(a){return(a=a.get(w))==null?void 0:a.invalidateRecord()}));t({curIdx:b,mediaList:d,type:"messageDeleted"})});return a},[c,w,m,s]);var x=i.useCallback(function(a){t({type:"startFetchingPrevPage"});return b("CometRelay").fetchQuery(c,k,{before:a,last:j,scale:b("WebPixelRatio").get(),threadID:d.thread_id}).toPromise().then(function(a){var c;if(!u.current)return;a=a==null?void 0:(a=a.message_thread)==null?void 0:a.messages_with_attachments;c=b("MWChatMediaData").normalizeMessages((c=a==null?void 0:a.edges)!=null?c:[]);if(c.length>0){t({hasPrevPage:(a=a==null?void 0:(a=a.page_info)==null?void 0:a.has_previous_page)!=null?a:!1,medias:c,type:"prevPageReceived"})}})["catch"](function(a){if(!u.current)return;h(a)})},[c,u,d.thread_id]),y=i.useCallback(function(a){t({type:"startFetchingNextPage"});return b("CometRelay").fetchQuery(c,k,{after:a,first:j,scale:b("WebPixelRatio").get(),threadID:d.thread_id}).toPromise().then(function(a){var c;if(!u.current)return;a=a==null?void 0:(a=a.message_thread)==null?void 0:a.messages_with_attachments;c=b("MWChatMediaData").normalizeMessages((c=a==null?void 0:a.edges)!=null?c:[]);if(c.length>0){t({hasNextPage:(a=a==null?void 0:(a=a.page_info)==null?void 0:a.has_next_page)!=null?a:!1,medias:c,type:"nextPageReceived"})}})["catch"](function(a){if(!u.current)return;h(a)})},[c,u,d.thread_id]);i.useEffect(function(){p!=null&&(y(p),x(p))},[c,y,x,p,d.thread_id]);var z=(a=(e=s[0])==null?void 0:e.cursor)!=null?a:null,A=(l=(f=s[s.length-1])==null?void 0:f.cursor)!=null?l:null;i.useEffect(function(){m<=j/2&&o&&!r&&z!=null?x(z):m>=s.length-j/2&&n&&!q&&A!=null&&y(A)},[m,x,y,n,o,z,A,s.length,q,r]);e=s[m];if(p==null)return null;if(e==null)return i.jsx(b("CometContentNotAvailable.react"),{});a=s.map(function(a){var b=a.attachment.image,c=b.height,d=b.uri;b=b.width;return{alt:g._("Kh\u00f4ng c\u00f3 m\u00f4 t\u1ea3."),height:c,key:(c=a.attachment.legacyAttachmentID)!=null?c:d,uri:d,width:b}}).filter(Boolean);return i.jsx(b("MWChatMediaViewerStage.react"),{activeIndex:m,attachmentID:e.attachment.legacyAttachmentID,backgroundSrc:e.attachment.image.uri,disableNextButton:q&&s[m+1]==null,disablePrevButton:r&&s[m-1]==null,downloadLink:e.__typename==="MessageVideo"?(f=e.attachment.hdUrl)!=null?f:e.attachment.sdUrl:e.attachment.image.downloadableUri,hideNextButton:!n&&s[m+1]==null,hidePrevButton:!o&&s[m-1]==null,messageID:typeof d.thread_id==="string"&&e.timestamp!=null?b("MWChatMessageId.re").makeSent(d.thread_id,e.messageID,e.timestamp):null,setActiveIndex:function(a){return t({curIdx:a,type:"viewMediaAtIndex"})},thumbnails:a,children:e.__typename==="MessageVideo"?i.jsx(b("MWChatMediaViewerVideo.react"),{fbid:e.nodeID,hdSrc:e.attachment.hdUrl!=null?e.attachment.hdUrl:void 0,originalHeight:e.attachment.originalDimensions.x,originalWidth:e.attachment.originalDimensions.y,sdSrc:e.attachment.sdUrl}):e.__typename==="MessageImage"?i.jsx(b("MWChatMediaViewerImage.react"),{blurredImageURI:e.attachment.blurredImageUri,imageURI:e.attachment.image.uri}):null})}function a(a){a=i.jsx(l,babelHelpers["extends"]({},a));return i.jsx(b("CometErrorBoundary.react"),{fallback:function(){return i.jsx(b("CometErrorRoot.react"),{})},children:a})}}),null);
__d("MWChatMediaViewerControls.react",["ix","fbt","BanzaiODS","CometTooltip.react","requireCond","cr:1485120","React","TetraCircleButton.react","TetraRow.react","TetraRowItem.react","useCometLazyDialog","fbicon","gkx","stylex","useMWChatForward","JSResource"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("cr:1485120").useForwardAttachment,j=b("React"),k=b("JSResource")("MWChatMediaViewerAttachmentInfoDialog.react").__setRef("MWChatMediaViewerControls.react"),l={iconHovered:{backgroundColor:"m8invena"}},m=h._("T\u1ea3i xu\u1ed1ng");c=h._("Chia s\u1ebb l\u00ean Facebook");var n=h._("Chuy\u1ec3n ti\u1ebfp"),o=h._("Th\u00f4ng tin");function a(a){var c=a.attachmentID,d=a.downloadLink,e=a.messageID;a=j.useState(function(){return!1});var f=a[0],h=a[1];a=j.useState(function(){return!1});var p=a[0];p=a[1];a=j.useState(function(){return!1});p=a[0];var q=a[1],r=i(),s=b("useMWChatForward")({messageID:e,onSend:function(a){r({copyAttachmentID:c,to_:a})}}),t=function(){b("BanzaiODS").bumpEntityKey(3185,"mwchat_media_viewer","forward"),s&&s.onClick()};a=b("useCometLazyDialog")(k);var u=a[0],v=j.useCallback(function(){u({attachmentID:c,messageID:e})},[u,e,c]);return j.jsxs(b("TetraRow.react"),{paddingTop:0,spacing:8,children:[d!=null?j.jsx(b("TetraRowItem.react"),{children:j.jsx(b("CometTooltip.react"),{align:"middle",tooltip:m,children:j.jsx(b("TetraCircleButton.react"),{color:"white",icon:f?b("fbicon")._(g("1433212"),20):b("fbicon")._(g("1441392"),20),label:m,linkProps:{download:!0,target:"_blank",url:d},onHoverIn:function(a){return h(function(){return!0})},onHoverOut:function(a){return h(function(){return!1})},overlayHoveredStyle:l.iconHovered,size:36,testid:void 0,type:"deemphasized"})})}):null,j.jsx(b("TetraRowItem.react"),{children:j.jsx(b("CometTooltip.react"),{align:"middle",tooltip:n,children:j.jsx(b("TetraCircleButton.react"),{color:"white",icon:b("fbicon")._(g("1433236"),20),label:n,onPress:function(a){return t()},overlayHoveredStyle:l.iconHovered,size:36,testid:void 0,type:"deemphasized"})})}),null,b("gkx")("1463539")&&b("gkx")("1555108")?j.jsx(b("TetraRowItem.react"),{children:j.jsx(b("CometTooltip.react"),{align:"middle",tooltip:o,children:j.jsx(b("TetraCircleButton.react"),{color:"white",icon:p?b("fbicon")._(g("479177"),20):b("fbicon")._(g("479180"),20),label:o,onHoverIn:function(a){return q(function(){return!0})},onHoverOut:function(a){return q(function(){return!1})},onPress:function(a){return v()},overlayHoveredStyle:l.iconHovered,size:36,testid:void 0,type:"deemphasized"})})}):null]})}}),null);