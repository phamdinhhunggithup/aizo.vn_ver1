if (self.CavalryLogger) { CavalryLogger.start_js(["1H1g5"]); }

__d("LSContactType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];f.unknown=a;f.user=b;f.page=c;f.pagePersona=d}),null);
__d("MWLSActor.bs",["Actor","React","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=b("Actor").useActor();var c=a[0];return g.useMemo(function(){return b("bs_caml_format").caml_int64_of_string(c)},[c])}f.useActor=a}),null);
__d("LSContactBlockedByViewerStatus.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];f.unblocked=a;f.messageBlocked=b;f.fullyBlocked=c}),null);
__d("MWLSChatTabPolicy.bs",["bs_curry","bs_int64","MWCount.bs","bs_caml_int64","CurrentUser","killswitch","MessengerWebEvent","MWChatSettingsQuery","LSContactBlockedByViewerStatus.bs","MessengerWebStgTypedLoggerLite.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){if(d===0)return b("bs_curry")._1(a,c);else return 0}function a(a,c,d,e){var f=function(a){return b("MessengerWebStgTypedLoggerLite.bs").log({event_name:b("MessengerWebEvent").SUPPRESS_NEW_MESSAGE,extra_data:{reason:a}})},h=function(a){if(b("killswitch")("MESSENGER_WEB_STOP_AUTOMATIC_CHAT_TAB_RAISING")){b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(a,1)}else return b("bs_curry")._1(a,0)},i=function(c){if(b("bs_int64").to_string(a.h)===b("CurrentUser").getID()){f("message_outgoing");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(c,1)}else return b("bs_curry")._1(c,0)},j=function(a){b("MWChatSettingsQuery").areChatTabsTurnedOff(function(c){if(!(c==null)&&c){f("turn_off_chat_tab");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(a,1)}else return b("bs_curry")._1(a,0)});return 0},k=function(a){if(b("bs_caml_int64").to_float(c.l)>Date.now()){f("mention_muted");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(a,1)}else return b("bs_curry")._1(a,0)},l=function(c){if(a.j){f("message_non_user_generated");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(c,1)}else return b("bs_curry")._1(c,0)},m=function(a){if(c.e==="inbox")return b("bs_curry")._1(a,0);else{f("message_no_inbox");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(a,1)}},n=function(a){if(b("bs_caml_int64").neq(d.n,b("LSContactBlockedByViewerStatus.bs").unblocked)){f("message_blocked_participants");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject,0);return b("bs_curry")._1(a,1)}else return b("bs_curry")._1(a,0)};h=[h,[i,[j,[k,[l,[m,[n,0]]]]]]];if(h){i=function a(c){if(c){var d=c[0],f=a(c[1]);return function(a){return g(d,f,a)}}else return function(a){return g(function(a){return b("bs_curry")._1(e,0)},function(a){return 0},a)}};return b("bs_curry")._1(h[0],i(h[1]))}else return 0}f.proceedIfAllow=g;f.shouldMessageBeAllowed=a}),null);
__d("MWNotificationRenderer.bs",["fbt","bs_curry","bs_caml_int64","MessagingThreadType.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,d,e,f,h){if(b("bs_caml_int64").neq(a.h,c)){a=f.e;if(a!==void 0)c=a;else{f=e.p;c=f!==void 0?f:e.h}a=d.d;if(a!==void 0)return b("bs_curry")._1(h,g._("{senderName} \u0111\u00e3 nh\u1eafn tin {groupName}",[g._param("senderName",c),g._param("groupName",a)]));else if(b("bs_caml_int64").eq(d.c,b("MessagingThreadType.bs").group))return b("bs_curry")._1(h,g._("{name} \u0111\u00e3 nh\u1eafn tin cho nh\u00f3m c\u1ee7a b\u1ea1n",[g._param("name",c)]));else return b("bs_curry")._1(h,g._("{name} \u0111\u00e3 nh\u1eafn tin cho b\u1ea1n",[g._param("name",c)]))}else return b("bs_curry")._1(h,g._("Tin nh\u1eafn m\u1edbi"))}f.renderDocumentTitle=a}),null);
__d("IndexedDbKeyComparer",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=n;var g=Object.freeze({array:0,binary:1,string:2,date:3,number:4});function h(a){return typeof a==="number"}function i(a){return a instanceof Date}function j(a){return typeof a==="string"}function k(a){return a instanceof ArrayBuffer}function l(a){return Array.isArray(a)}function m(a){if(l(a))return"array";else if(k(a))return"binary";else if(j(a))return"string";else if(i(a))return"date";else if(h(a))return"number";throw b("unrecoverableViolation")("unexpected type","messenger_comet")}function n(a,c){var d=m(a),e=m(c);if(d!==e)return g[d]>g[e]?-1:1;switch(d){case"number":case"date":if(h(a)&&h(c)||i(a)&&i(c))return a>c?1:a<c?-1:0;else throw b("unrecoverableViolation")("already checked these are comparable","messenger_comet");case"string":if(j(a)&&j(c)){e=Math.min(a.length,c.length);for(var d=0;d<e;d++){var f=a.codePointAt(d),o=c.codePointAt(d);if(f>o)return 1;else if(f<o)return-1}return a.length>c.length?1:a.length<c.length?-1:0}else throw b("unrecoverableViolation")("already checked these are comparable","messenger_comet");case"binary":if(k(a)&&k(c)){f=Math.min(a.byteLength,c.byteLength);o=new Uint8Array(a);d=new Uint8Array(c);for(var e=0;e<f;e++){var p=o[e],q=d[e];if(p>q)return 1;else if(p<q)return-1}return a.byteLength>c.byteLength?1:a.byteLength<c.byteLength?-1:0}else throw b("unrecoverableViolation")("already checked these are comparable","messenger_comet");case"array":if(l(a)&&l(c)){p=Math.min(a.length,c.length);for(var q=0;q<p;q++){e=n(a[q],c[q]);if(e!==0)return e}return a.length>c.length?1:a.length<c.length?-1:0}else throw b("unrecoverableViolation")("already checked these are comparable","messenger_comet");default:throw b("unrecoverableViolation")("unexpected type, should be unreachable","messenger_comet")}}}),null);
__d("LSMetadata",[],(function(a,b,c,d,e,f){f.buildMetadata=a;function a(a){var b={},c={},d={},e={},f={};for(var g=0;g<a.length;g++){var h=a[g],i=h.tables,j=h.stored_procedures,k=h.native_operations;h=h.native_type_operations;for(var i=i,l=Array.isArray(i),m=0,i=l?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=i.length)break;n=i[m++]}else{m=i.next();if(m.done)break;n=m.value}n=n;var o=[],p={},q={};for(var r=n.columns,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}u=u;u.is_primary&&o.push(""+u.id);p[u.id]=u.name;q[u.name]=u.id}t={name:n.name,id:parseInt(n.id,10),columnIds:p,columnNames:q,primaryKeyIds:o,autoIncrement:(u=n.auto_increment)!=null?u:!1,indexes:n.indexes,cascadeUpdates:[]};b[t.id]=t;c[t.name]=t}j.forEach(function(a){d[""+a.id]=a.name});k.forEach(function(a){e[""+a.id]=a.name});h.forEach(function(a){f[""+a.type]=f[""+a.type]||{},f[""+a.type][""+a.id]=a.name})}return{tableIds:b,tableNames:c,storedProcedureIds:d,nativeOperationIds:e,nativeTypeOperationIds:f}}}),null);
__d("LSStorage",["nullthrows"],(function(a,b,c,d,e,f){"use strict";f.searchKey=g;f.areKeysEqual=h;f.createSubscriptionManager=a;function g(a,b,c,d){a=a.tableNames[b];b=a.primaryKeyIds;a=a.indexes;b=d==null?b:a[d].keyIds;a=b.map(function(a){return c[a]});return a.some(function(a){return a==null})?void 0:a.length===1?a[0]:a}function h(a,b){return Array.isArray(a)&&Array.isArray(b)&&a.length===b.length?a.every(function(a,c){return h(a,b[c])}):a===b}function a(a,c){var d=new Map(),e=new Map();function f(a,b,c,d){return Promise.all(Array.from(a.values()).map(function(e){if(a.has(e))return e(c,d,b)}))}function h(a){return b("nullthrows")((d.has(a)?d:d.set(a,[new Set(),new Map()])).get(a))}function i(a,c){a=h(a);a[0];a=a[1];return b("nullthrows")((a.has(c)?a:a.set(c,new Set())).get(c))}function j(d,e,h,i,j,k){var l=f.bind(null,d,k);d=g(c,e,h||{},j);var m=g(c,e,i||{},j);if(m==null&&d!=null)return l(d,{operation:"delete"});if(d==null&&m!=null)return l(m,{operation:"add",value:b("nullthrows")(i)});return d!=null&&m!=null?a(d,m)===0?l(d,{operation:"put",value:b("nullthrows")(i)}):l(d,{operation:"delete"}).then(function(){return l(m,{operation:"add",value:b("nullthrows")(i)})}):Promise.resolve()}return{subscribeTable:function(a,b){a=h(a);var c=a[0];c.add(b);return function(){c["delete"](b)}},subscribeIndex:function(a,b,c){var d=i(a,b);d.add(c);return function(){d["delete"](c)}},notifyTableAndIndexSubscribers:function(a,b,c,d){var e=h(a),f=e[0],g=e[1];return j(f,a,b,c,null,d).then(function(){return Promise.all(Array.from(g.entries()).map(function(e){var f=e[0];e=e[1];return j(e,a,b,c,f,d)}).filter(function(a){return a!=null}))})},subscribeToCommit:function(a){e.set(a,a);return function(){e["delete"](a)}},notifyCommit:function(){e.forEach(function(a){return a()})},dispose:function(){d.clear(),e.clear()}}}}),null);
__d("PromiseOrValue.bs",["bs_block","bs_curry","promiseDone"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(a.tag)return b("bs_block").__(1,[b("bs_curry")._1(c,a[0])]);else return b("bs_block").__(0,[a[0].then(b("bs_curry").__1(c))])}function c(a,c){if(a.tag)return b("bs_curry")._1(c,a[0]);else{b("promiseDone")(a[0],c,void 0);return 0}}function d(a){if(a.tag)return a[0];else return b("bs_block").__(0,[a[0].then(function(a){return a[0]})])}function e(a,c){if(a.tag){var d=a[0];if(c.tag)return b("bs_block").__(1,[[d,c[0]]]);else return b("bs_block").__(0,[c[0].then(function(a){return[d,a]})])}else{a=a[0];if(c.tag){var e=c[0];return b("bs_block").__(0,[a.then(function(a){return[a,e]})])}else return b("bs_block").__(0,[window.Promise.all([a,c[0]])])}}function g(a){if(a.tag)return window.Promise.resolve(a[0]);else return a[0]}function h(a){return b("bs_block").__(1,[a])}function i(a){return b("bs_block").__(0,[a])}function j(a,c){while(!0){var d=c;d=b("bs_curry")._1(a,d);if(d.tag){var e=d[0];if(e.tag){c=e[0];continue}else return b("bs_block").__(1,[e[0]])}else return b("bs_block").__(0,[d[0].then(function(c){c=c.tag?j(a,c[0]):b("bs_block").__(1,[c[0]]);return c[0]})])}}f.map=a;f.mapDone=c;f.flatten=d;f.all2=e;f.toPromise=g;f.fromValue=h;f.fromPromise=i;f.loop=j}),null);
__d("SkytaleDBQueryDependencyContext.bs",["WeakMap.bs"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){return new WeakMap()}function c(a){return b("WeakMap.bs").getOrMake(a,g,function(a){return[]})}function d(a,b){a.set(g,b);return 0}f.dependencyKey=g;f.make=a;f.getDependencies=c;f.setDependencies=d}),null);
__d("SortedAsyncIterable.bs",["bs_block","bs_curry","bs_js_dict","bs_caml_obj","LSSuspense.bs","bs_pervasives","bs_belt_Option","bs_caml_option","PromiseOrValue.bs","bs_caml_builtin_exceptions","SkytaleDBQueryDependencyContext.bs"],(function(a,b,c,d,e,f){"use strict";var g={};function h(a,b){if(a)return[a[0],h(a[1],b)];else return b}function a(a,c){while(!0){var d=c,e=a;if(d)if(e){if(!b("bs_caml_obj").caml_equal(e[0],d[0]))throw[b("bs_caml_builtin_exceptions").assert_failure,["SortedAsyncIterable.re",41,8]];c=d[1];a=e[1];continue}else return b("bs_pervasives").failwith("unexpected end of key");else return e}}a={concat:h,strip:a};function c(a,c){return b("bs_curry")._2(a.subscribe,void 0,function(a,d,e){b("bs_curry")._2(c,a,d);return 0})}var i={contents:void 0};function j(a){var c=i.contents;if(c!==void 0){c=b("bs_caml_option").valFromOption(c);b("SkytaleDBQueryDependencyContext.bs").getDependencies(c).push(function(c){var d=a;c=c;return b("bs_curry")._2(d.subscribe,void 0,b("bs_curry").__3(c))});return c}else return b("SkytaleDBQueryDependencyContext.bs").make(0)}function d(c){var d=[],a=b("bs_curry")._2(c.iterator,void 0,j(c));c=function(c){return b("PromiseOrValue.bs").loop(function(c){return b("PromiseOrValue.bs").map(a.next(void 0),function(a){if(a.done)return b("bs_block").__(0,[d]);else{d.push(b("bs_belt_Option").getExn(a.value)[1]);return b("bs_block").__(1,[0])}})},c)};c=c(0);if(c.tag)return c[0];else return b("LSSuspense.bs").$$throw(c[0])}function k(a){a=b("bs_curry")._2(a.iterator,void 0,j(a));a=a.next(void 0);if(a.tag){var c=a[0];if(c.done)return;else return b("bs_caml_option").some(b("bs_belt_Option").getExn(c.value)[1])}else return b("LSSuspense.bs").$$throw(a[0])}function e(a){return b("bs_belt_Option").getExn(k(a))}function l(a){return b("bs_curry")._2(a.iterator,void 0,new WeakMap())}function m(a,d,c){c=b("bs_js_dict").fromArray([["direction",c]]);c.iterator=a;c.subscribe=d;return c}function n(a){return m(function(a,c){return{next:function(a){return b("PromiseOrValue.bs").fromValue({done:!0,value:void 0})}}},function(a,b){return function(a){return 0}},"asc")}function o(a){return a.direction}f.Bounds=g;f.Key=a;f.iterator=l;f.subscribe=c;f.direction=o;f.toArray=d;f.first=k;f.firstExn=e;f.context=i;f.make=m;f.empty=n}),null);
__d("SkytaleDB.bs",["bs_block","bs_curry","bs_js_dict","bs_pervasives","SortedAsyncIterable.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){return b("SortedAsyncIterable.bs").Key.concat(a,[[[]],0])}function a(a){var c=function(a){var b=a[0];if(b>=-179650181)if(b>=448478038)return["gte",a[1]];else return["gt",g(a[1])];else if(b>=-214671526)return["lt",a[1]];else return["lte",g(a[1])]},d=a[0];if(d!==-467688003)if(d>=-179650181)return b("bs_js_dict").fromArray([c(a)]);else return b("bs_js_dict").fromArray([c(a)]);else{d=a[1];return b("bs_js_dict").fromArray([c(d[0]),c(d[1])])}}function c(a){var c=a.operation;switch(c){case"add":return b("bs_block").__(0,[a.value]);case"delete":return 0;case"put":return b("bs_block").__(1,[a.value]);default:return b("bs_pervasives").failwith("unexpected operation")}}e={};var h={};function d(a,c,d){return a.get(c).then(function(e){return a.upsert(c,b("bs_curry")._1(d,e))})}h={Index:h,update:d};f.nextKey=g;f.mapBounds=a;f.mapEventToOperation=c;f.Direction=e;f.Table=h}),null);
__d("nativePromiseRegeneratorRuntime",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;b=typeof Symbol==="function"?Symbol:{};var h=b.iterator||"@@iterator";c=b.asyncIterator||"@@asyncIterator";var i=e.exports;function j(a,b,c,d){b=Object.create((b||q).prototype);d=new A(d||[]);b._invoke=w(a,c,d);return b}i.wrap=j;function k(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}var l="suspendedStart",m="suspendedYield",n="executing",o="completed",p={};function q(){}function r(){}function s(){}var t=s.prototype=q.prototype;r.prototype=t.constructor=s;s.constructor=r;r.displayName="GeneratorFunction";function a(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}v.prototype[c]=function(){return this};i.isGeneratorFunction=function(a){a=typeof a==="function"&&a.constructor;return a?a===r||(a.displayName||a.name)==="GeneratorFunction":!1};i.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,s):Object.assign(a,s);a.prototype=Object.create(t);return a};i.awrap=function(a){return new u(a)};function u(a){this.arg=a}function v(a){function b(b,e){var f=a[b](e);b=f.value;return b instanceof u?window.Promise.resolve(b.arg).then(c,d):window.Promise.resolve(b).then(function(a){f.value=a;return f})}typeof process==="object"&&process.domain&&(b=process.domain.bind(b));var c=b.bind(a,"next"),d=b.bind(a,"throw");b.bind(a,"return");var e;function f(a,c){var d=e?e.then(function(){return b(a,c)}):new window.Promise(function(d){d(b(a,c))});e=d["catch"](function(a){});return d}this._invoke=f}a(v.prototype);i.async=function(a,b,c,d){var e=new v(j(a,b,c,d));return i.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function w(a,b,c){var d=l;return function(e,f){if(d===n)throw new Error("Generator is already running");if(d===o){if(e==="throw")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e==="return"||e==="throw"&&g.iterator[e]===void 0){c.delegate=null;var h=g.iterator["return"];if(h){h=k(h,g.iterator,f);if(h.type==="throw"){e="throw";f=h.arg;continue}}if(e==="return")continue}h=k(g.iterator[e],g.iterator,f);if(h.type==="throw"){c.delegate=null;e="throw";f=h.arg;continue}e="next";f=void 0;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=m;return i}c.delegate=null}if(e==="next")d===m?c.sent=f:c.sent=void 0;else if(e==="throw"){if(d===l){d=o;throw f}c.dispatchException(f)&&(e="next",f=void 0)}else e==="return"&&c.abrupt("return",f);d=n;h=k(a,b,c);if(h.type==="normal"){d=c.done?o:m;var i={value:h.arg,done:c.done};if(h.arg===p)c.delegate&&e==="next"&&(f=void 0);else return i}else h.type==="throw"&&(d=o,e="throw",f=h.arg)}}}a(t);var x=!1;i.defineGeneratorMethods=function(){if(x)return;x=!0;t[h]=function(){return this};t.toString=function(){return"[object Generator]"}};i.defineGeneratorMethods();function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(y,this),this.reset(!0)}i.keys=function(a){var b=[];for(var c in a)b.push(c);b.reverse();return function c(){while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){if(a){var b=a[h];if(b)return b.call(a);if(typeof a.next==="function")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(g.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=void 0;b.done=!0;return b};return b.next=b}}return{next:C}}i.values=B;function C(){return{value:void 0,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=void 0;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(var b in this)b.charAt(0)==="t"&&g.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function c(c,d){f.type="throw";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc==="root")return c("end");if(e.tryLoc<=this.prev){var h=g.call(e,"catchLoc"),i=g.call(e,"finallyLoc");if(h&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(h){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&g.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return p},complete:function(a,b){if(a.type==="throw")throw a.arg;a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=a.arg,this.next="end"):a.type==="normal"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return p}}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type==="throw"){var e=d.arg;z(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return p}}}),null);
__d("SkytaleDB",["invariant","LSMetadata","LSSchemas","SkytaleDB.bs","nativePromiseRegeneratorRuntime","PromiseOrValue.bs","LSStorage","IndexedDbKeyComparer","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("SkytaleDB.bs").mapBounds,i=b("SkytaleDB.bs").mapEventToOperation,j=b("LSMetadata").buildMetadata(b("LSSchemas")),k=b("PromiseOrValue.bs").fromPromise,l=b("PromiseOrValue.bs").fromValue,m=b("LSStorage").searchKey;function n(a,b){if(b===1)return[a,0];if(a.length===1)return[a[0],0];b=a[0];a=a.slice(1);return[b,n(a)]}function o(a,b){function c(a){if(a)return[a[0]].concat(c(a[1]));else return[]}a=c(a);if(b===1){Array.isArray(a)&&a.length===1||g(0,20969);return a[0]}return a}function p(a,b){return a==null?void 0:Object.entries(h(a)).reduce(function(a,c){var d=c[0];c=c[1];d=babelHelpers["extends"]({},a,(a={},a[d]=o(c.slice(0,Math.min(b,c.length)),b),a));return d},{})}function q(a,b){return{next:function(c){c=a.next(c!==void 0?o(c,b):void 0);if(c instanceof Promise)return c.then(function(c){if(c.done)return c;c=c.value;var a=c[0];c=c[1];return{done:!1,value:[n(a,b),c]}});if(c.done)return{done:!0};c=c.value;var d=c[0];c=c[1];return{done:!1,value:[n(d,b),c]}}}}function r(a){var b=a.next;a.next=function(){var a=b.apply(this,arguments);return a instanceof Promise?k(a):l(a)};return a}function s(a,c){return c==null?!0:(Object.prototype.hasOwnProperty.call(c,"gt")?b("IndexedDbKeyComparer")(a,c.gt)>0:Object.prototype.hasOwnProperty.call(c,"gte")?b("IndexedDbKeyComparer")(a,c.gte)>=0:!0)&&(Object.prototype.hasOwnProperty.call(c,"lt")?b("IndexedDbKeyComparer")(a,c.lt)<0:Object.prototype.hasOwnProperty.call(c,"lte")?b("IndexedDbKeyComparer")(a,c.lte)<=0:!0)}e.exports={table:function(a,c){var d=j.tableNames[c],e=a.table(c),f=d.primaryKeyIds.length,g=function(a,b,c){return{iterator:function(d,e){return r(q(b.entries(e,a,p(d,c)),c))},subscribe:function(a,d){var e=p(a,c);return b.subscribe(function(a,b,f){if(s(a,e))return d(n(a,c),i(b),f);else return Promise.resolve()})},direction:a}};return{add:e.add,upsert:function(a,b){return e.upsert(o(a,f),b)},put:function(a){return e.upsert(b("nullthrows")(m(j,c,a)),a)},get:function(a){return e.get(o(a,f))},"delete":function(a){return e["delete"](o(a,f))},asc:g("asc",e,f),desc:g("desc",e,f),index:function(a){var d=j.tableNames[c].indexes[a],h=e.index(a),i=d.keyIds.length;return babelHelpers["extends"]({},h,{get:function(a){return h.get(o(a,i))},getKey:function(a){var c;return b("nativePromiseRegeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("nativePromiseRegeneratorRuntime").awrap(h.getKey(o(a,i)));case 2:c=d.sent;if(!(c==null)){d.next=5;break}return d.abrupt("return",void 0);case 5:return d.abrupt("return",n(c,f));case 6:case"end":return d.stop()}},null,this)},asc:g("asc",h,i),desc:g("desc",h,i)})}}}}}),null);
__d("BPlusTreeBase",["invariant","nativePromiseRegeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";e.exports=function(a,c,d){var e=b("nativePromiseRegeneratorRuntime").mark(j),f=b("nativePromiseRegeneratorRuntime").mark(m);c===void 0&&(c=16);var h={children:[],isLeaf:!0,keys:[]},i={gte:[function(a){return a<0},0],lt:[function(a){return a<0},1],gt:[function(a){return a<=0},0],lte:[function(a){return a<=0},1]};function j(c,f){var g,h,i,j,k;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(d.readExn(c),"t0",1);case 1:g=b.t0,h=[],(i=g,j=c),k=-1;case 5:if(i.isLeaf){b.next=19;break}h.push([i,j,k]);k=0;case 8:if(!(k<i.keys.length)){b.next=14;break}if(!(a(f,i.keys[k])<0)){b.next=11;break}return b.abrupt("break",14);case 11:k++;b.next=8;break;case 14:j=i.children[k];return b.delegateYield(d.readExn(j),"t1",16);case 16:i=b.t1;b.next=5;break;case 19:return b.abrupt("return",[i,j,h,k]);case 20:case"end":return b.stop()}},e,this)}function k(b,c,d,e,f){e===void 0&&(e=0);f===void 0&&(f=b.length-1);while(e<=f){var g=e+f>>1;d[0](a(b[g],c))?e=g+1:f=g-1}g=[e,f][d[1]];return g===b.length?-1:g}function l(b,c){if(!b.length){b.push(c);return[0,0]}var d=k(b,c,i.gte);if(d===-1)return[b.push(c)-1,0];else if(a(b[d],c)===0)return[d,1];b.splice(d,0,c);return[d,0]}function m(){var a,c;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(d.readHeader(),"t0",1);case 1:a=b.t0;if(!(a==null)){b.next=7;break}return b.delegateYield(d.writeNew({isLeaf:!0,children:[],keys:[]}),"t1",4);case 4:c=b.t1;a={rootId:c,tailId:c,headId:c};return b.delegateYield(d.writeHeader(a),"t2",7);case 7:return b.abrupt("return",a);case 8:case"end":return b.stop()}},f,this)}return{get:b("nativePromiseRegeneratorRuntime").mark(function c(d){var e,f,h;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=j;return b.delegateYield(m(),"t1",2);case 2:b.t2=b.t1.rootId;b.t3=d;return b.delegateYield(b.t0(b.t2,b.t3),"t4",5);case 5:e=b.t4;f=e[0];h=k(f.keys,d,i.gte);h!==-1&&a(f.keys[h],d)===0||g(0,19679,d);return b.abrupt("return",f.children[h]);case 10:case"end":return b.stop()}},c,this)}),has:b("nativePromiseRegeneratorRuntime").mark(function c(d){var e,f;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=j;return b.delegateYield(m(),"t1",2);case 2:b.t2=b.t1.rootId;b.t3=d;return b.delegateYield(b.t0(b.t2,b.t3),"t4",5);case 5:e=b.t4;f=e[0];return b.abrupt("return",f.keys.findIndex(function(b){return a(d,b)===0})!==-1);case 8:case"end":return b.stop()}},c,this)}),set:b("nativePromiseRegeneratorRuntime").mark(function a(e,f){var g,h,i,k,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.delegateYield(m(),"t0",1);case 1:g=a.t0;h={};return a.delegateYield(j(g.rootId,e),"t1",4);case 4:i=a.t1,k=i[0],n=i[1],o=i[2],(p=l(k.keys,e),q=p[0],r=p[1]),k.children.splice(q,r,f),(s=k,t=n);case 11:if(!(s.keys.length>=c)){a.next=47;break}w=o.pop()||[{keys:[],children:[t],isLeaf:!1}];u=w[0];v=w[1];x=Math.floor(s.keys.length/2);y=void 0,z=void 0;if(!s.isLeaf){a.next=36;break}y={isLeaf:!0,children:s.children.slice(x),keys:s.keys.slice(x),nextId:s.nextId,prevId:t};return a.delegateYield(d.writeNew(y),"t2",20);case 20:z=s.nextId=a.t2;if(!y.nextId){a.next=33;break}a.t3=d;a.t4=y.nextId;a.t5=babelHelpers;a.t6={};return a.delegateYield(d.readExn(y.nextId),"t7",27);case 27:a.t8=a.t7;a.t9={prevId:z};a.t10=a.t5["extends"].call(a.t5,a.t6,a.t8,a.t9);return a.delegateYield(a.t3.write.call(a.t3,a.t4,a.t10),"t11",31);case 31:a.next=34;break;case 33:h.tailId=z;case 34:a.next=39;break;case 36:y={isLeaf:!1,children:s.children.slice(x+1),keys:s.keys.slice(x+1)};return a.delegateYield(d.writeNew(y),"t12",38);case 38:z=a.t12;case 39:A=l(u.keys,s.keys[x]),B=A[0];u.children.splice(B+1,0,z);s.keys.length=x;s.children.length=x+(s.isLeaf?0:1);return a.delegateYield(d.write(t,s),"t13",44);case 44:s=u,t=v;a.next=11;break;case 47:if(!(t==null)){a.next=52;break}return a.delegateYield(d.writeNew(s),"t14",49);case 49:h.rootId=a.t14;a.next=53;break;case 52:return a.delegateYield(d.write(t,s),"t15",53);case 53:if(!Object.keys(h).length){a.next=55;break}return a.delegateYield(d.writeHeader(babelHelpers["extends"]({},g,h)),"t16",55);case 55:case"end":return a.stop()}},a,this)}),"delete":b("nativePromiseRegeneratorRuntime").mark(function e(f){var h,i,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.delegateYield(m(),"t0",1);case 1:h=b.t0;i={};k=Math.floor(c/2);return b.delegateYield(j(h.rootId,f),"t1",5);case 5:l=b.t1;n=l[0];o=l[1];p=l[2];q=l[3];r=n.keys.findIndex(function(b){return a(b,f)===0});if(!(r===-1)){b.next=13;break}return b.abrupt("return",!1);case 13:n.keys.splice(r,1),n.children.splice(r,1),s=n,t=o,u=q;case 18:if(!(s.keys.length<k&&p.length)){b.next=106;break}z=p.pop();v=z[0];w=z[1];x=z[2];A=[[{nodeId:v.children[u-1]},{nodeId:t,node:s},u-1],[{nodeId:t,node:s},{nodeId:v.children[u+1]},u]].filter(function(a){var b=a[0];a=a[1];return b.nodeId!==void 0&&a.nodeId!==void 0});B=A,C=Array.isArray(B),D=0,B=C?B:B[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 25:if(!C){b.next=31;break}if(!(D>=B.length)){b.next=28;break}return b.abrupt("break",59);case 28:E=B[D++];b.next=35;break;case 31:D=B.next();if(!D.done){b.next=34;break}return b.abrupt("break",59);case 34:E=D.value;case 35:F=E;G=F[0];H=F[1];I=F[2];b.t2=G.node;if(b.t2){b.next=43;break}return b.delegateYield(d.readExn(G.nodeId),"t3",42);case 42:b.t2=b.t3;case 43:G.node=b.t2;b.t4=H.node;if(b.t4){b.next=48;break}return b.delegateYield(d.readExn(H.nodeId),"t5",47);case 47:b.t4=b.t5;case 48:H.node=b.t4;if(!(G.node.keys.length+H.node.keys.length>=k*2)){b.next=57;break}s.isLeaf?(J=[].concat(G.node.children,H.node.children),K=[].concat(G.node.keys,H.node.keys),G.node.children=(H.node.children=J).splice(0,k),G.node.keys=(H.node.keys=K).splice(0,k),v.keys[I]=K[0]):(L=[].concat(G.node.children,H.node.children),M=[].concat(G.node.keys,[v.keys[I]],H.node.keys),G.node.children=(H.node.children=L).splice(0,k+1),v.keys[I]=M.splice(k,1)[0],G.node.keys=(H.node.keys=M).splice(0,k));return b.delegateYield(d.write(G.nodeId,G.node),"t6",52);case 52:return b.delegateYield(d.write(H.nodeId,H.node),"t7",53);case 53:return b.delegateYield(d.write(w,v),"t8",54);case 54:if(!Object.keys(i).length){b.next=56;break}return b.delegateYield(d.writeHeader(babelHelpers["extends"]({},h,i)),"t9",56);case 56:return b.abrupt("return",!0);case 57:b.next=25;break;case 59:N=A,O=Array.isArray(N),P=0,N=O?N:N[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 60:if(!O){b.next=66;break}if(!(P>=N.length)){b.next=63;break}return b.abrupt("break",103);case 63:Q=N[P++];b.next=70;break;case 66:P=N.next();if(!P.done){b.next=69;break}return b.abrupt("break",103);case 69:Q=P.value;case 70:R=Q;S=R[0];T=R[1];U=R[2];S.node.children=[].concat(S.node.children,T.node.children);if(!s.isLeaf){b.next=95;break}S.node.keys=[].concat(S.node.keys,T.node.keys);v.keys.splice(U,1);v.children.splice(U+1,1);if(!T.node.nextId){b.next=91;break}b.t10=d;b.t11=T.node.nextId;b.t12=babelHelpers;b.t13={};return b.delegateYield(d.readExn(T.node.nextId),"t14",85);case 85:b.t15=b.t14;b.t16={prevId:S.nodeId};b.t17=b.t12["extends"].call(b.t12,b.t13,b.t15,b.t16);return b.delegateYield(b.t10.write.call(b.t10,b.t11,b.t17),"t18",89);case 89:b.next=92;break;case 91:i.tailId=S.nodeId;case 92:S.node.nextId=T.node.nextId;b.next=98;break;case 95:S.node.keys=[].concat(S.node.keys,[v.keys[U]],T.node.keys),v.keys.splice(U,1),v.children.splice(U+1,1);case 98:return b.delegateYield(d.write(S.nodeId,S.node),"t19",99);case 99:return b.delegateYield(d.remove(T.nodeId),"t20",100);case 100:return b.abrupt("break",103);case 101:b.next=60;break;case 103:y=[v,w,x],s=y[0],t=y[1],u=y[2],y;b.next=18;break;case 106:return b.delegateYield(d.write(t,s),"t21",107);case 107:return b.delegateYield(d.readExn(h.rootId),"t22",108);case 108:V=b.t22;!V.keys.length&&V.children.length&&(V.isLeaf&&g(0,19680),i.rootId=V.children[0]);if(!Object.keys(i).length){b.next=112;break}return b.delegateYield(d.writeHeader(babelHelpers["extends"]({},h,i)),"t23",112);case 112:return b.abrupt("return",!0);case 113:case"end":return b.stop()}},e,this)}),entries:b("nativePromiseRegeneratorRuntime").mark(function c(e){var f,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:f=e===void 0?{}:e,l=f.dir,n=l===void 0?"asc":l,o=babelHelpers.objectWithoutPropertiesLoose(f,["dir"]);Object.prototype.hasOwnProperty.call(o,"gt")&&Object.prototype.hasOwnProperty.call(o,"gte")&&g(0,19824);Object.prototype.hasOwnProperty.call(o,"lt")&&Object.prototype.hasOwnProperty.call(o,"lte")&&g(0,19825);return b.delegateYield(m(),"t0",4);case 4:r=b.t0;if(!(n==="asc")){b.next=72;break}if(!Object.prototype.hasOwnProperty.call(o,"gt")){b.next=13;break}return b.delegateYield(j(r.rootId,o.gt),"t1",8);case 8:s=b.t1;p=s[0];q=s[1];b.next=26;break;case 13:if(!Object.prototype.hasOwnProperty.call(o,"gte")){b.next=20;break}return b.delegateYield(j(r.rootId,o.gte),"t2",15);case 15:t=b.t2;p=t[0];q=t[1];b.next=26;break;case 20:return b.delegateYield(d.readExn(r.headId),"t3",21);case 21:b.t4=b.t3,b.t5=r.headId,u=[b.t4,b.t5],p=u[0],q=u[1];case 26:v=Object.prototype.hasOwnProperty.call(o,"gt")?k(p.keys,o.gt,i.gt):Object.prototype.hasOwnProperty.call(o,"gte")?k(p.keys,o.gte,i.gte):0;case 27:if(!(p&&q!==void 0)){b.next=70;break}case 28:if(!(v!==-1&&v<p.keys.length)){b.next=61;break}w=p.keys[v];if(!(Object.prototype.hasOwnProperty.call(o,"lt")&&a(w,o.lt)>=0||Object.prototype.hasOwnProperty.call(o,"lte")&&a(w,o.lte)>0)){b.next=32;break}return b.abrupt("return");case 32:b.next=34;return[p.keys[v],p.children[v]];case 34:x=b.sent;return b.delegateYield(d.read(q),"t7",36);case 36:b.t6=b.t7;if(b.t6){b.next=39;break}b.t6=h;case 39:p=b.t6;if(!(x!=null)){b.next=50;break}a(x,w)>0||g(0,20472);v=k(p.keys,x,i.gte);if(!(v===-1)){b.next=48;break}return b.delegateYield(j(r.rootId,x),"t8",45);case 45:y=b.t8,p=y[0],v=k(p.keys,x,i.gte);case 48:b.next=59;break;case 50:z=v>=p.keys.length||a(p.keys[v],w)!==0;if(!z){b.next=58;break}v=k(p.keys,w,i.lte);if(!(v===-1)){b.next=58;break}return b.delegateYield(j(r.rootId,w),"t9",55);case 55:A=b.t9,p=A[0],v=k(p.keys,w,i.lte);case 58:v++;case 59:b.next=28;break;case 61:q=p.nextId;b.t10=q!==void 0;if(!b.t10){b.next=66;break}return b.delegateYield(d.readExn(q),"t11",65);case 65:b.t10=b.t11;case 66:p=b.t10;v=0;b.next=27;break;case 70:b.next=136;break;case 72:if(!Object.prototype.hasOwnProperty.call(o,"lt")){b.next=79;break}return b.delegateYield(j(r.rootId,o.lt),"t12",74);case 74:B=b.t12;p=B[0];q=B[1];b.next=92;break;case 79:if(!Object.prototype.hasOwnProperty.call(o,"lte")){b.next=86;break}return b.delegateYield(j(r.rootId,o.lte),"t13",81);case 81:C=b.t13;p=C[0];q=C[1];b.next=92;break;case 86:return b.delegateYield(d.readExn(r.tailId),"t14",87);case 87:b.t15=b.t14,b.t16=r.tailId,D=[b.t15,b.t16],p=D[0],q=D[1];case 92:E=Object.prototype.hasOwnProperty.call(o,"lt")?k(p.keys,o.lt,i.lt):Object.prototype.hasOwnProperty.call(o,"lte")?k(p.keys,o.lte,i.lte):p.keys.length-1;case 93:if(!(p&&q!==void 0)){b.next=136;break}case 94:if(!(E!==-1&&E>=0)){b.next=127;break}F=p.keys[E];if(!(Object.prototype.hasOwnProperty.call(o,"gt")&&a(F,o.gt)<=0||Object.prototype.hasOwnProperty.call(o,"gte")&&a(F,o.gte)<0)){b.next=98;break}return b.abrupt("return");case 98:b.next=100;return[p.keys[E],p.children[E]];case 100:G=b.sent;return b.delegateYield(d.read(q),"t18",102);case 102:b.t17=b.t18;if(b.t17){b.next=105;break}b.t17=h;case 105:p=b.t17;if(!(G!=null)){b.next=116;break}a(G,F)<0||g(0,20473);E=k(p.keys,G,i.lte);if(!(E===-1)){b.next=114;break}return b.delegateYield(j(r.rootId,G),"t19",111);case 111:H=b.t19,p=H[0],E=k(p.keys,G,i.lte);case 114:b.next=125;break;case 116:I=E>=p.keys.length||a(p.keys[E],F)!==0;if(!I){b.next=124;break}E=k(p.keys,F,i.gte);if(!(E===-1)){b.next=124;break}return b.delegateYield(j(r.rootId,F),"t20",121);case 121:J=b.t20,p=J[0],E=k(p.keys,F,i.gte);case 124:E--;case 125:b.next=94;break;case 127:q=p.prevId;b.t21=q!==void 0;if(!b.t21){b.next=132;break}return b.delegateYield(d.readExn(q),"t22",131);case 131:b.t21=b.t22;case 132:p=b.t21;E=p?p.keys.length-1:-1;b.next=93;break;case 136:case"end":return b.stop()}},c,this)})}}}),null);
__d("BPlusTree",["invariant","nativePromiseRegeneratorRuntime","BPlusTreeBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a,c={},d=void 0,e=0;return{read:(a=b("nativePromiseRegeneratorRuntime")).mark(function a(d){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",c[d]);case 1:case"end":return a.stop()}},a,this)}),readExn:a.mark(function a(d){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",Object.prototype.hasOwnProperty.call(c,d)?c[d]:g(!1,"expected key"));case 1:case"end":return a.stop()}},a,this)}),readHeader:a.mark(function a(){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",d);case 1:case"end":return a.stop()}},a,this)}),remove:a.mark(function a(d){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:delete c[d];case 1:case"end":return a.stop()}},a,this)}),write:a.mark(function a(d,e){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c[d]=e;case 1:case"end":return a.stop()}},a,this)}),writeHeader:a.mark(function a(c){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:d=c;case 1:case"end":return a.stop()}},a,this)}),writeNew:a.mark(function a(d){return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c[e++]=d;return a.abrupt("return",e-1);case 2:case"end":return a.stop()}},a,this)})}}function i(a){var b=a.next();while(!b.done)b=a.next(b.value);return b.value}e.exports=function(a,c){var d=this;c===void 0&&(c=16);var e=b("BPlusTreeBase")(a,c,h());return{"delete":function(a){return i(e["delete"](a))},entries:function(a){return e.entries(a)},get:function(a){return i(e.get(a))},has:function(a){return i(e.has(a))},set:function(a,b){i(e.set(a,b));return d}}}}),null);
__d("BPlusTree.bs",["bs_curry","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){return function(a){return a.next().value}(a.entries())}function c(a,c,d){return b("bs_belt_Option").getExn((a.has(c)?a:a.set(c,b("bs_curry")._1(d,0))).get(c))}f.first=a;f.getOrMake=c}),null);
__d("JSMap.bs",["bs_curry","bs_belt_Option","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){d=d.has(a)?d:d.set(a,b("bs_curry")._1(c,0));return b("bs_belt_Option").getExn(b("bs_caml_option").nullable_to_opt(d.get(a)))}f.getOrMake=a}),null);
__d("bs_js_exn",["bs_caml_js_exceptions"],(function(a,b,c,d,e,f){"use strict";function a(a){throw new Error(a)}function c(a){throw new EvalError(a)}function d(a){throw new RangeError(a)}function e(a){throw new ReferenceError(a)}function g(a){throw new SyntaxError(a)}function h(a){throw new TypeError(a)}function i(a){throw new URIError(a)}b=b("bs_caml_js_exceptions").$$Error;f.$$Error=b;f.raiseError=a;f.raiseEvalError=c;f.raiseRangeError=d;f.raiseReferenceError=e;f.raiseSyntaxError=g;f.raiseTypeError=h;f.raiseUriError=i}),null);
__d("SkytaleDBQuery.bs",["bs_block","bs_curry","JSMap.bs","bs_js_exn","bs_js_dict","BPlusTree.bs","BPlusTree","bs_belt_Array","bs_caml_int32","bs_pervasives","bs_belt_Option","bs_caml_option","PromiseOrValue.bs","bs_caml_js_exceptions","CancellablePromise.bs","SortedAsyncIterable.bs","IndexedDbKeyComparer","SkytaleDBQueryDependencyContext.bs"],(function(a,b,c,d,e,f){"use strict";var g=window.Promise,h=function(a,b){return b instanceof a};function a(a){return h(g,a)}var i=function(a){throw a};function j(a,c,d){d=b("bs_js_dict").fromArray([["direction",d]]);d.iterator=a;d.subscribe=c;return d}function k(a){return b("SortedAsyncIterable.bs").Key.concat(a,[[[]],0])}function l(a){if(typeof a==="number")return;else{var b=a[0];if(b!==-467688003)if(b!==-179650181)if(b!==448478038)return;else return[a[1],a];else return[k(a[1]),a];else{b=a[1][0];if(typeof b==="number")return;else{a=b[0];if(a!==-179650181)if(a!==448478038)return;else return[b[1],b];else return[k(b[1]),b]}}}}function m(a){if(typeof a==="number")return;else{var b=a[0];if(b!==-555702441)if(b!==-467688003)if(b!==-214671526)return;else return[a[1],a];else{b=a[1][1];if(typeof b==="number")return;else{var c=b[0];if(c!==-555702441)if(c!==-214671526)return;else return[b[1],b];else return[k(b[1]),b]}}else return[k(a[1]),a]}}function n(a,c,d){a.forEach(function(a,e,f){e=a[0];f=e!==void 0?b("bs_belt_Option").mapWithDefault(l(e),!0,function(a){var d=a[0];if(a[1][0]>=448478038)return b("IndexedDbKeyComparer")(c,d)>=0;else return b("IndexedDbKeyComparer")(c,d)>0}):!0;e=e!==void 0?b("bs_belt_Option").mapWithDefault(m(e),!0,function(a){var d=a[0];if(a[1][0]>=-214671526)return b("IndexedDbKeyComparer")(c,d)<0;else return b("IndexedDbKeyComparer")(c,d)<=0}):!0;if(f&&e)return b("bs_curry")._1(d,a[1]);else return 0});return 0}function o(c,d){try{var e,f=b("SortedAsyncIterable.bs").context.contents,g=(e=b("SkytaleDBQueryDependencyContext.bs")).getDependencies(d);e.setDependencies(d,[]);b("SortedAsyncIterable.bs").context.contents=b("bs_caml_option").some(d);try{e=b("bs_curry")._1(c,0)}catch(a){b("SkytaleDBQueryDependencyContext.bs").setDependencies(d,g);b("SortedAsyncIterable.bs").context.contents=f;throw a}var h=b("SkytaleDBQueryDependencyContext.bs").getDependencies(d);return b("bs_block").__(1,[(b("SkytaleDBQueryDependencyContext.bs").setDependencies(d,g),b("SortedAsyncIterable.bs").context.contents=f,[e,h])])}catch(h){g=b("bs_caml_js_exceptions").internalToOCamlException(h);if(g[0]===b("bs_js_exn").$$Error){f=g[1];if(b("bs_curry")._1(a,f))return b("bs_block").__(0,[f.then(function(a){a=o(c,d);return a[0]})])}e=b("bs_caml_js_exceptions").caml_as_js_exn(g);if(e!==void 0)return i(b("bs_caml_option").valFromOption(e));else throw g}}function c(a,c){var d=new Map();return j(function(e,f){var g=b("bs_curry")._2(a.iterator,e,f);return{next:function(a){return b("PromiseOrValue.bs").loop(function(a){return b("PromiseOrValue.bs").map(g.next(a),function(a){if(a.done)return b("bs_block").__(0,[a]);else{var e=b("bs_belt_Option").getExn(a.value),f=e[0];if(b("bs_curry")._1(c,e[1])){n(d,f,function(a){a.add(JSON.stringify(f));return 0});return b("bs_block").__(0,[a])}else{n(d,f,function(a){a["delete"](JSON.stringify(f));return 0});return b("bs_block").__(1,[void 0])}}})},a)}}},function(e,f){var g={},h=new Set();d.set(g,[e,h]);var i=b("bs_curry")._2(a.subscribe,e,function(a,d,e){if(typeof d==="number")if(h.has(JSON.stringify(a))){h["delete"](JSON.stringify(a));return b("bs_curry")._3(f,a,0,e)}else return 0;else if(d.tag){var g=d[0];if(b("bs_curry")._1(c,g))if(h.has(JSON.stringify(a)))return b("bs_curry")._3(f,a,b("bs_block").__(1,[g]),e);else{h.add(JSON.stringify(a));return b("bs_curry")._3(f,a,b("bs_block").__(0,[g]),e)}else if(h.has(JSON.stringify(a))){h["delete"](JSON.stringify(a));return b("bs_curry")._3(f,a,0,e)}else return 0}else{g=d[0];if(b("bs_curry")._1(c,g)){h.add(JSON.stringify(a));return b("bs_curry")._3(f,a,b("bs_block").__(0,[g]),e)}else return 0}});return function(a){d["delete"](g);return b("bs_curry")._1(i,0)}},b("SortedAsyncIterable.bs").direction(a))}function d(a,c){var d=new Map(),e=function(a,c,d,e,g){var h=b("JSMap.bs").getOrMake(JSON.stringify(d),function(a){return[]},a);h.forEach(function(a){return b("bs_curry")._1(a,0)});h.length=0;g.forEach(function(g){h.push(b("bs_curry")._1(g,function(g,h,i){return b("PromiseOrValue.bs").toPromise(b("PromiseOrValue.bs").flatten(b("PromiseOrValue.bs").map(f(a,c,d,e,i),function(a){return b("PromiseOrValue.bs").fromPromise(b("bs_curry")._3(c,d,b("bs_block").__(1,[a]),i))})))}));return 0});return 0},f=function(a,d,f,g,h){return b("PromiseOrValue.bs").map(o(function(a){return b("bs_curry")._1(c,g)},h),function(b){e(a,d,f,g,b[1]);return b[0]})},g=function(a,c){c=b("JSMap.bs").getOrMake(JSON.stringify(c),function(a){return[]},a);c.forEach(function(a){return b("bs_curry")._1(a,0)});return 0};return j(function(f,g){var h=b("bs_curry")._2(a.iterator,f,g);return{next:function(a){return b("PromiseOrValue.bs").flatten(b("PromiseOrValue.bs").map(h.next(a),function(f){if(f.done)return b("bs_block").__(1,[{done:!0,value:void 0}]);else{f=b("bs_belt_Option").getExn(f.value);var h=f[1],a=f[0];return b("PromiseOrValue.bs").map(b("PromiseOrValue.bs").map(o(function(a){return b("bs_curry")._1(c,h)},g),function(b){var c=b[1];n(d,a,function(b){return e(b[0],b[1],a,h,c)});return b[0]}),function(b){return{done:!1,value:[a,b]}})}}))}}},function(c,e){var h={},i=new Map();d.set(h,[c,[i,e]]);var j=b("bs_curry")._2(a.subscribe,c,function(a,c,d){if(typeof c==="number"){g(i,a);return b("bs_curry")._3(e,a,0,d)}else if(c.tag)return b("PromiseOrValue.bs").toPromise(b("PromiseOrValue.bs").flatten(b("PromiseOrValue.bs").map(f(i,e,a,c[0],d),function(c){return b("PromiseOrValue.bs").fromPromise(b("bs_curry")._3(e,a,b("bs_block").__(1,[c]),d))})));else return b("PromiseOrValue.bs").toPromise(b("PromiseOrValue.bs").flatten(b("PromiseOrValue.bs").map(f(i,e,a,c[0],d),function(c){return b("PromiseOrValue.bs").fromPromise(b("bs_curry")._3(e,a,b("bs_block").__(0,[c]),d))})))});return function(a){i.forEach(function(a,c,d){a.forEach(function(a){return b("bs_curry")._1(a,0)});return 0});d["delete"](h);return b("bs_curry")._1(j,0)}},b("SortedAsyncIterable.bs").direction(a))}function p(a){var c=[],d=b("SortedAsyncIterable.bs").iterator(a);a=function(a){return b("PromiseOrValue.bs").loop(function(a){return b("PromiseOrValue.bs").map(d.next(void 0),function(a){if(a.done)return b("bs_block").__(0,[c]);else{c.push(b("bs_belt_Option").getExn(a.value)[1]);return b("bs_block").__(1,[0])}})},a)};return b("PromiseOrValue.bs").toPromise(a(0))}function e(a,c){return j(function(d,e){var f=b("bs_curry")._2(a.iterator,d,e),g=b("bs_curry")._2(c.iterator,d,e),h=function(a){return b("PromiseOrValue.bs").loop(function(a){var c=a[1];a=a[0];if(a.done||c.done)return b("bs_block").__(1,[b("bs_block").__(0,[{done:!0,value:void 0}])]);else{var d=b("bs_belt_Option").getExn(a.value),e=d[0],h=b("bs_belt_Option").getExn(c.value),i=h[0],j=b("IndexedDbKeyComparer")(e,i);if(j>0)return b("PromiseOrValue.bs").map(b("PromiseOrValue.bs").all2(b("bs_block").__(1,[a]),g.next(e)),function(a){return b("bs_block").__(1,[a])});else if(j<0)return b("PromiseOrValue.bs").map(b("PromiseOrValue.bs").all2(f.next(i),b("bs_block").__(1,[c])),function(a){return b("bs_block").__(1,[a])});else return b("bs_block").__(1,[b("bs_block").__(0,[{done:!1,value:[e,[d[1],h[1]]]}])])}},a)};return{next:function(a){return b("PromiseOrValue.bs").flatten(b("PromiseOrValue.bs").map(b("PromiseOrValue.bs").all2(f.next(a),g.next(a)),h))}}},function(d,e){var f={contents:!0},g=function(a,c,d,g,h,i){return b("PromiseOrValue.bs").toPromise(b("PromiseOrValue.bs").flatten(b("PromiseOrValue.bs").map(b("bs_curry")._2(a.iterator,[-467688003,[[448478038,g],[-555702441,g]]],i).next(void 0),function(a){if(!a.done&&f.contents){a=b("bs_belt_Option").getExn(a.value);var j=a[1];j=typeof h==="number"?0:h.tag?b("bs_block").__(1,[b("bs_curry")._2(d,h[0],j)]):b("bs_block").__(0,[b("bs_curry")._2(d,h[0],j)]);return b("PromiseOrValue.bs").fromPromise(b("bs_curry")._3(e,b("bs_curry")._1(c,[g,a[0]]),j,i))}else return b("bs_block").__(1,[0])})))},h=b("bs_curry")._2(a.subscribe,d,function(a,b,d){return g(c,function(a){return a[0]},function(a,b){return[a,b]},a,b,d)}),i=b("bs_curry")._2(c.subscribe,d,function(b,c,d){return g(a,function(a){return a[1]},function(a,b){return[b,a]},b,c,d)});return function(a){f.contents=!1;b("bs_curry")._1(h,0);return b("bs_curry")._1(i,0)}},b("SortedAsyncIterable.bs").direction(a))}function q(a,c){var d=function(a,c,d){if(a!==void 0){a=a;var e=a[1];if(c!==void 0){var f=c;if(b("bs_caml_int32").imul(b("IndexedDbKeyComparer")(a[0],f[0]),d)>0)return b("bs_caml_option").some(e);else return b("bs_caml_option").some(f[1])}else return b("bs_caml_option").some(e)}else if(c!==void 0)return b("bs_caml_option").some(c[1]);else return},e=function(a,b){if(b!==void 0){b=b;var c=d(l(b),l(a),1);b=d(m(b),m(a),-1);if(c!==void 0){c=c;if(b!==void 0)return[-467688003,[c,b]];else return c}else if(b!==void 0)return b;else return}else return a};return j(function(d,f){return b("bs_curry")._2(a.iterator,e(c,d),f)},function(d,f){return b("bs_curry")._2(a.subscribe,e(c,d),f)},b("SortedAsyncIterable.bs").direction(a))}function r(a,c){var d=[448478038,c],e=[-555702441,c],f=function(a){if(a[0]>=448478038)return[448478038,b("SortedAsyncIterable.bs").Key.concat(c,a[1])];else return[-179650181,b("SortedAsyncIterable.bs").Key.concat(c,a[1])]},g=function(a){if(a[0]>=-214671526)return[-214671526,b("SortedAsyncIterable.bs").Key.concat(c,a[1])];else return[-555702441,b("SortedAsyncIterable.bs").Key.concat(c,a[1])]},h=function(a){if(a!==void 0){a=a;var b=a[0];if(b!==-467688003)b=b>=-179650181?[-467688003,[f(a),e]]:[-467688003,[d,g(a)]];else{a=a[1];b=[-467688003,[f(a[0]),g(a[1])]]}}else b=[-467688003,[d,e]];return b};return j(function(d,e){var f=b("bs_curry")._2(a.iterator,h(d),e);return{next:function(a){return b("PromiseOrValue.bs").map(f.next(b("bs_belt_Option").map(a,function(a){return b("SortedAsyncIterable.bs").Key.concat(c,a)})),function(a){return{done:a.done,value:b("bs_belt_Option").map(a.value,function(a){return[b("SortedAsyncIterable.bs").Key.strip(a[0],c),a[1]]})}})}}},function(d,e){return b("bs_curry")._2(a.subscribe,h(d),function(a,d,f){return b("bs_curry")._3(e,b("SortedAsyncIterable.bs").Key.strip(a,c),d,f)})},b("SortedAsyncIterable.bs").direction(a))}function s(a,c){var d=new Map();return j(function(e,f){var g=b("bs_curry")._2(a.iterator,e,f),h={contents:0};return{next:function(a){if(h.contents>=c)return b("bs_block").__(1,[{done:!0,value:void 0}]);else return b("PromiseOrValue.bs").map(g.next(a),function(e){if(!e.done){var f=b("bs_belt_Option").getExn(e.value),a=f[0];n(d,a,function(b){var d=b[1];if(d.contents<=c){d.contents=d.contents+1|0;b[0].set(a,0);return 0}else return 0})}h.contents=h.contents+1|0;return e})}}},function(e,f){var g={},h=b("SortedAsyncIterable.bs").direction(a),i;switch(h){case"asc":i=1;break;case"desc":i=-1;break;default:i=b("bs_pervasives").failwith("unexpected direction")}var j=b("BPlusTree")(function(a,c){return b("bs_caml_int32").imul(b("IndexedDbKeyComparer")(a,c),-i|0)}),k={contents:0};d.set(g,[e,[j,k]]);var l=b("bs_curry")._2(a.subscribe,e,function(e,h,l){var m=b("bs_belt_Option").map(b("BPlusTree.bs").first(j),function(a){return a[0]}),n=b("bs_belt_Option").mapWithDefault(m,!0,function(a){return b("bs_caml_int32").imul(b("IndexedDbKeyComparer")(e,a),i)<=0});if(typeof h==="number")if(n){var o;j["delete"](e);var p=window.Promise.resolve(0);return(o=b("PromiseOrValue.bs")).toPromise(o.flatten(o.map(o.flatten(o.map(o.fromPromise(p.then(function(a){return b("bs_curry")._3(f,e,0,l)})),function(c){return b("bs_curry")._2(a.iterator,b("bs_belt_Option").map(m,function(a){if(i!==1)return[-214671526,a];else return[-179650181,a]}),l).next(void 0)})),function(c){if(!c.done&&d.has(g)){c=b("bs_belt_Option").getExn(c.value);var a=c[0];j.set(a,0);return b("PromiseOrValue.bs").fromPromise(b("bs_curry")._3(f,a,b("bs_block").__(0,[c[1]]),l))}else{k.contents=k.contents-1|0;return b("bs_block").__(1,[0])}})))}else return 0;else if(h.tag)if(n)return b("bs_curry")._3(f,e,h,l);else return 0;else if(k.contents<c){k.contents=k.contents+1|0;j.set(e,0);return b("bs_curry")._3(f,e,h,l)}else if(n){if(m!==void 0){var q=m;j["delete"](q);o=window.Promise.resolve(0);p=o.then(function(a){return b("bs_curry")._3(f,q,0,l)})}else p=window.Promise.resolve(0);return p.then(function(a){j.set(e,0);return b("bs_curry")._3(f,e,h,l)})}else return 0});return function(a){d["delete"](g);return b("bs_curry")._1(l,0)}},b("SortedAsyncIterable.bs").direction(a))}function t(a){return p(s(a,1)).then(function(a){return b("bs_belt_Array").get(a,0)})}function u(a){return p(s(a,1)).then(function(a){return b("bs_belt_Array").getExn(a,0)})}function v(a,c){return j(function(d,e){var f=b("bs_curry")._2(a.iterator,d,e);return{next:function(a){a=f.next(a);if(a.tag)return a;else return b("bs_block").__(0,[b("CancellablePromise.bs").then_(c,function(a){return a},a[0])])}}},a.subscribe,b("SortedAsyncIterable.bs").direction(a))}f.filter=c;f.map=d;f.toArray=p;f.mergeJoin=e;f.bounds=q;f.getKeyRange=r;f.take=s;f.first=t;f.firstExn=u;f.makeCancellable=v}),null);
__d("SkytaleDBHook.bs",["bs_curry","LSEnvironment.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("LSEnvironment.bs").useInstance(0);return b("bs_curry")._1(a,0).storage}f.useHook=a}),null);
__d("SkytaleDBQuerySubscriptionHook.bs",["bs_block","bs_curry","React","BPlusTree","bs_belt_Array","LSSuspense.bs","bs_belt_Option","SkytaleDBHook.bs","PromiseOrValue.bs","SkytaleDBQuery.bs","SortedAsyncIterable.bs","IndexedDbKeyComparer"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=b("BPlusTree")(b("IndexedDbKeyComparer")),d=b("SortedAsyncIterable.bs").iterator(a);a=function(a){return b("PromiseOrValue.bs").loop(function(a){return b("PromiseOrValue.bs").map(d.next(void 0),function(a){if(a.done)return b("bs_block").__(0,[c]);else{a=b("bs_belt_Option").getExn(a.value);c.set(a[0],a[1]);return b("bs_block").__(1,[0])}})},a)};a=a(0);if(a.tag)return a[0];else return b("LSSuspense.bs").$$throw(a[0])}function i(a){var c=function(b){return Array.from(a.direction==="asc"?b.entries():b.entries({dir:"desc"})).map(function(a){return a[1]})},d=g.useMemo(function(){return h(a)},[a]),e=g.useState(function(){return c(d)}),f=e[1],i=g.useRef(!1),j=b("SkytaleDBHook.bs").useHook(0);g.useEffect(function(){var e=b("SortedAsyncIterable.bs").subscribe(a,function(a,b){typeof b==="number"?d["delete"](a):d.set(a,b[0]);i.current=!0;return 0}),g=j.subscribeToCommit(function(a){if(i.current){i.current=!1;return b("bs_curry")._1(f,function(a){return c(d)})}else return 0});try{b("SortedAsyncIterable.bs").toArray(a)}catch(a){}return function(a){b("bs_curry")._1(g,0);return b("bs_curry")._1(e,0)}},[a,j,i]);return e[0]}function j(a){var c=g.useMemo(function(){return b("SkytaleDBQuery.bs").take(a,1)},[a]);return b("bs_belt_Array").get(i(c),0)}function a(a){return b("bs_belt_Option").getExn(j(a))}f.toBPlusTree=h;f.useArray=i;f.useFirst=j;f.useFirstExn=a}),null);
__d("MWLSChatPopperUpper.bs",["FBID.bs","bs_curry","bs_int64","React","MWCount.bs","MWLSActor.bs","SkytaleDB","bs_caml_int64","MercuryIDs","bs_belt_Option","bs_caml_option","CurrentUser","promiseDone","setInterval","MWChatConfig.bs","clearInterval","SkytaleDBQuery.bs","requireDeferred","MWLSChatTabPolicy.bs","MWChatSettingsQuery","SortedAsyncIterable.bs","MWNotificationRenderer.bs","MessengerWebEntryPoint","useGlobalEventListener","MWChatThreadPingCounter.bs","MWChatOpenTabFromNewMessage.bs","SkytaleDBQuerySubscriptionHook.bs","MWGetCurrentThreadIDForLSThread.bs","CometSetBlinkingTitleMessageContext"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("CometSetBlinkingTitleMessageContext"),i=b("requireDeferred")("Sound");function j(a){var c=b("bs_int64").to_string(a.h)!==b("CurrentUser").getID();if(c)return i.onReady(function(c){c.play([b("MWChatConfig.bs").soundNotifOggUrl,b("MWChatConfig.bs").soundNotifMp3Url],b("bs_caml_int64").to_float(a.b),!1);return 0});else return 0}function k(a,c,d,e,f,g,h){var i=b("MWGetCurrentThreadIDForLSThread.bs").get(d.a,d.c,[e.q]);return b("MWLSChatTabPolicy.bs").shouldMessageBeAllowed(c,d,e,function(k){k=b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(b("bs_int64").to_string(d.a)));b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.lift,0);b("bs_curry")._1(a,i);b("MWNotificationRenderer.bs").renderDocumentTitle(c,h,d,e,f,function(a){return b("bs_curry")._2(g,a,b("bs_caml_int64").to_float(c.b))});if(b("MWChatThreadPingCounter.bs").getCount(k)<3){b("MWChatThreadPingCounter.bs").incrementCount(k);b("MWChatSettingsQuery").areChatTabsSoundsOn(function(a){if(!(a==null)&&a)return j(c);else return 0});return 0}else return 0})}function a(a){var c=g.useContext(h),d=b("bs_curry")._1(b("MWChatOpenTabFromNewMessage.bs").useHook,b("MessengerWebEntryPoint").MESSAGE_RECEIVED),e=b("MWLSActor.bs").useActor(0),f=b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(b("SkytaleDBQuery.bs").map(b("SkytaleDB").table(a,"threads").index("lastActivityTimestampMs").desc,function(a){var b=a.i;a=a.j;return[b,a]})),[[0,0],[0,0]]),i=f[1],j=g.useRef(f[0]);g.useEffect(function(){b("bs_caml_int64").ge(i,j.current)&&b("bs_curry")._2(c,void 0,b("bs_caml_int64").to_float(i));return},[i,j,c]);g.useEffect(function(){return b("SortedAsyncIterable.bs").subscribe(b("SkytaleDB").table(a,"messages").asc,function(f,g){if(typeof g==="number"||g.tag)return 0;else{var h=g[0];if(b("bs_caml_int64").gt(h.b,j.current)){j.current=h.b;b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.$$process,0);b("promiseDone")(window.Promise.all([b("SkytaleDB").table(a,"threads").get([h.a,0]),b("SkytaleDB").table(a,"contacts").get([h.h,0]),b("SkytaleDB").table(a,"participants").get([h.a,[h.h,0]])]),function(a){var f=a[2],g=a[1];if(g!==void 0&&f!==void 0)return k(d,h,b("bs_belt_Option").getExn(a[0]),g,f,c,e);else return 0});return 0}else return 0}})},[c,d,a]);var l=g.useRef(void 0),m=function(a){a=l.current;if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));return 0}else return 0};f=function(a){m(0);l.current=b("bs_caml_option").some(b("setInterval")(function(a){return b("MWChatThreadPingCounter.bs").clear(0)},6e5));return 0};var n=function(a){b("MWChatThreadPingCounter.bs").clear(0);return m(0)};b("useGlobalEventListener")("blur",f,{});b("useGlobalEventListener")("focus",n,{});g.useEffect(function(){return function(a){return m(0)}},[]);return 0}c=6e5;d=3;f.cometSetBlinkingTitleMessageContext=h;f.pingCounterResetTime=c;f.pingsMaxCount=d;f.soundDeferred=i;f.playSound=j;f.dispatchOpenTab=k;f.useHook=a}),null);
__d("MWLSChatInit.bs",["SkytaleDBHook.bs","MWLSChatPopperUpper.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("MWLSChatPopperUpper.bs").useHook(b("SkytaleDBHook.bs").useHook(0))}f.useHook=a}),null);
__d("MWLSChatBadgeCountUpdates.bs",["bs_curry","React","SkytaleDB","bs_caml_int64","SkytaleDBHook.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=g.useRef(void 0),e=b("SkytaleDBQuerySubscriptionHook.bs").useFirstExn(b("SkytaleDB").table(c,"mailbox_metadata").asc);g.useEffect(function(){var c=d.current;c!==void 0&&!b("bs_caml_int64").neq(c,e.b)||(d.current=e.b,b("bs_curry")._1(a,0));return},[e]);return}f.useBadgeCountUpdates=a}),null);
__d("MWLSChatBadgeCountUpdates.re",["MWLSChatBadgeCountUpdates.bs"],(function(a,b,c,d,e,f){a=b("MWLSChatBadgeCountUpdates.bs").useBadgeCountUpdates;f.useBadgeCountUpdates=a}),null);
__d("MWLSChat.react",["CometErrorBoundary.react","MWChatDisabled.re","MWChatImpl.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.showChat;return g.jsx(b("CometErrorBoundary.react"),{description:"MWChatMain",fallback:function(a){return g.jsx(b("MWChatDisabled.re").make,{showChat:c})},children:g.jsx(b("MWChatImpl.react"),{showChat:c})})}}),null);