if (self.CavalryLogger) { CavalryLogger.start_js(["4xlWO"]); }

__d("LSMailboxType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1024];c=[0,2048];d=[0,2049];f.messenger=a;f.tincan=b;f.whatsappPhone=c;f.whatsappInterop=d}),null);
__d("LSMessageSendStatus.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,4];e=[0,5];f.none=a;f.sendingToServer=b;f.serverReceived=c;f.nonRetriableError=d;f.retriableError=e}),null);
__d("LSMessagingThreadTypeUtil.bs",["bs_caml_int64","MessagingThreadType.bs","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a){if(b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").oneToOne)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").group)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").room)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").montage)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").marketplace)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").folder))return!1;else if(b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").tincanOneToOne)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").tincanGroupDisappearing))return!0;else return b("unrecoverableViolation")("Unknown thread type","comet_messenger")}function c(a){if(b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").group)||b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").tincanGroupDisappearing))return!0;else return!1}function d(a){a=a[0];if(a!==757211935)if(a>=-914332868)return b("MessagingThreadType.bs").oneToOne;else return b("MessagingThreadType.bs").tincanOneToOne;else return b("MessagingThreadType.bs").group}f.isSecure=a;f.isGroup=c;f.ofThreadId=d}),null);
__d("LSPresenceStatus.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];f.offline=a;f.active=b}),null);
__d("MWLSParticipant.bs",["SkytaleDB","bs_belt_Option","LSMailboxType.bs","SkytaleDBQuery.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){var c=a[1];a=a[0];var d=a.e;if(d!==void 0)d=d;else{var e=c.p;d=e!==void 0?e:c.h}return{contact_id:a.b,thread_key:a.a,contactType:c.q,mailbox_type:b("LSMailboxType.bs").messenger,read_watermark_timestamp_ms:a.c,read_action_timestamp_ms:a.k,delivered_watermark_timestamp_ms:a.d,name:d,actual_name:c.h,nickname:a.e,blocked_by_viewer_status:c.n,profile_picture_url:c.b,is_messenger_user:c.k,is_admin:b("bs_belt_Option").getWithDefault(a.f,!1)}}function h(a){var c=a[1];a=a[0];return{contact_id:a.b,thread_key:a.a,contactType:c.q,mailbox_type:b("LSMailboxType.bs").messenger,read_watermark_timestamp_ms:a.c,read_action_timestamp_ms:[0,0],delivered_watermark_timestamp_ms:a.d,name:c.h,actual_name:c.h,nickname:void 0,blocked_by_viewer_status:c.n,profile_picture_url:c.b,is_messenger_user:c.k,is_admin:!1}}function a(a,c,d){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"participants").asc,[d,0]),c),g)}function c(a,c,d){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_thread_participants").asc,[d,0]),c),h)}function d(a,c){return b("SkytaleDBQuery.bs").getKeyRange(a,[c,0])}function e(a,c){return b("SkytaleDBQuery.bs").getKeyRange(a,[c,0])}f.projectOpen=g;f.projectSecure=h;f.getAllInOpenThread=a;f.getAllInSecureThread=c;f.getInOpenThread=d;f.getInSecureThread=e}),null);
__d("MWLSPresence.bs",["bs_int64","SkytaleDB","SkytaleDBQuery.bs","SortedAsyncIterable.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return new Map(b("SortedAsyncIterable.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"participants").asc,[d,0]),c),function(a){a=a[1];return[b("bs_int64").to_string(a.a),a]})))}f.getInThread=a}),null);
__d("MWLSThreadTitle.bs",["fbt","bs_caml_array"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){if(a!==void 0)return a;else{a=c;c=a.length;var d=a.length;return(d!==1?d!==0?c===2?g._("{participant1} v\u00e0 {participant2}",[g._param("participant1",b("bs_caml_array").caml_array_get(a,0)),g._param("participant2",b("bs_caml_array").caml_array_get(a,1))]):c===3?g._("{participant1}, {participant2} v\u00e0 {participant3}",[g._param("participant1",b("bs_caml_array").caml_array_get(a,0)),g._param("participant2",b("bs_caml_array").caml_array_get(a,1)),g._param("participant3",b("bs_caml_array").caml_array_get(a,2))]):g._("{participant1}, {participant2} v\u00e0 {others_count} ng\u01b0\u1eddi kh\u00e1c",[g._param("participant1",b("bs_caml_array").caml_array_get(a,0)),g._param("participant2",b("bs_caml_array").caml_array_get(a,1)),g._param("others_count",String(c-2|0))]):g._("Kh\u00f4ng c\u00f3 ng\u01b0\u1eddi tham gia"):a[0]).toString()}}f.make=a}),null);
__d("MWLSThread.bs",["bs_int64","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_option","MWLSPresence.bs","LSMailboxType.bs","SkytaleDBQuery.bs","MWLSParticipant.bs","MWLSThreadTitle.bs","LSPresenceStatus.bs","LSMessageSendStatus.bs","SortedAsyncIterable.bs","LSMessagingThreadTypeUtil.bs","LSContactBlockedByViewerStatus.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){var b=a.nickname;if(b!==void 0)return b;else return a.actual_name}function h(a){var b=a.nickname;if(b!==void 0)return b;else return a.name}function i(a,c,d,e){e=b("LSMessagingThreadTypeUtil.bs").isGroup(e);var f=b("bs_int64").to_string(c);c=d.length;if(c!==1){if(c===0)return"Facebook User"}else{c=d[0];if(b("bs_int64").to_string(c.contact_id)===f)return"Just You"}return b("MWLSThreadTitle.bs").make(a,d.filter(function(a){return b("bs_int64").to_string(a.contact_id)!==f}).map(e?h:g))}function j(a,c,d,e,f){d=b("bs_caml_int64").eq(b("bs_belt_Option").getWithDefault(d,b("LSMessageSendStatus.bs").none),b("LSMessageSendStatus.bs").serverReceived);if(e&&d)return a.filter(function(a){var d=b("bs_int64").to_string(a.contact_id)===f;a=b("bs_int64").compare(a.read_watermark_timestamp_ms,b("bs_belt_Option").getWithDefault(c,b("bs_int64").max_int))>=0;if(d)return!1;else return a});else return[]}function k(a,c,d){a=a.filter(function(a){return b("bs_caml_int64").neq(a.contact_id,c)}).slice();a.sort(function(a,c){return b("bs_int64").compare(a.delivered_watermark_timestamp_ms,c.delivered_watermark_timestamp_ms)});a=a.map(function(a){return a.profile_picture_url});return b("bs_belt_Option").mapWithDefault(d,a,function(a){return[a]})}function a(a){if(b("bs_caml_int64").eq(a,[-1,4294967295]))return!0;else return b("bs_caml_int64").gt(a,b("bs_caml_int64").of_float(Date.now()))}function c(a,c,d,e){var f=e.a,g=e.c,h=b("MWLSPresence.bs").getInThread(a,d,f);d=b("SortedAsyncIterable.bs").toArray(b("MWLSParticipant.bs").getAllInOpenThread(a,c,f));c=d.some(function(a){return b("bs_belt_Option").mapWithDefault(b("bs_caml_option").nullable_to_opt(h.get(b("bs_int64").to_string(a.contact_id))),!1,function(a){return b("bs_caml_int64").eq(a.b,b("LSPresenceStatus.bs").active)})});var l=b("SortedAsyncIterable.bs").firstExn(b("SkytaleDBQuery.bs").map(b("SkytaleDB").table(a,"_user_info").asc,function(a){return a.b})),m=d.filter(function(a){return b("bs_caml_int64").neq(a.contact_id,l)}).slice();a=b("SortedAsyncIterable.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"messages").desc,[f,0]));f=e.d;g=i(f,l,d,g);var n=e.j,o=e.i;n=b("bs_int64").compare(o,n)>0;var p=b("bs_belt_Option").mapWithDefault(b("bs_belt_Option").map(a,function(a){return a.h}),!1,function(a){return b("bs_caml_int64").eq(a,l)}),q;if(m.length!==1)q=!1;else{var r=m[0];q=m.length===1?b("bs_caml_int64").neq(r.blocked_by_viewer_status,b("LSContactBlockedByViewerStatus.bs").unblocked):!1}return{thread_name:g,custom_thread_name:f,picture_urls:k(d,l,e.f),snippet:e.m,thread_key:e.a,last_activity_timestamp:o,mute_until:e.l,is_unread:n,thread_type:e.c,story_ring_state:0,parent_thread_key:e.A,is_typing:!1,folder_name:e.e,custom_badge_type:0,mailbox_type:b("LSMailboxType.bs").messenger,draft_message:void 0,ongoing_call_state:e.u,read_by:j(d,b("bs_belt_Option").map(a,function(a){return a.b}),b("bs_belt_Option").map(a,function(a){return a.l}),p,b("bs_int64").to_string(l)),last_message_sent_by_viewer:p,custom_emoji:e.w,is_blocked:q,is_active:c,snippet_sender_contact_id:e.o,otherParticipants:m}}function d(a,c,d,e){var f=e.a,g=e.l,h=b("MWLSPresence.bs").getInThread(a,d,f);d=b("SortedAsyncIterable.bs").toArray(b("MWLSParticipant.bs").getAllInSecureThread(a,c,f));c=d.some(function(a){return b("bs_belt_Option").mapWithDefault(b("bs_caml_option").nullable_to_opt(h.get(b("bs_int64").to_string(a.contact_id))),!1,function(a){return b("bs_caml_int64").eq(a.b,b("LSPresenceStatus.bs").active)})});var l=b("SortedAsyncIterable.bs").firstExn(b("SkytaleDBQuery.bs").map(b("SkytaleDB").table(a,"_user_info").asc,function(a){return a.b})),m=d.filter(function(a){return b("bs_int64").to_string(a.contact_id)!==b("bs_int64").to_string(l)}).slice();a=b("SortedAsyncIterable.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_messages").desc,[f,0]));f=i(void 0,l,d,g);g=e.c;var n=e.b,o=b("bs_belt_Option").mapWithDefault(b("bs_belt_Option").map(a,function(a){return a.i}),!1,function(a){return b("bs_caml_int64").neq(a,l)}),p;if(m.length!==1)p=!1;else{var q=m[0];p=m.length===1?b("bs_caml_int64").neq(q.blocked_by_viewer_status,b("LSContactBlockedByViewerStatus.bs").unblocked):!1}return{thread_name:f,custom_thread_name:void 0,picture_urls:k(d,l,void 0),snippet:e.f,thread_key:e.a,last_activity_timestamp:n,mute_until:e.e,is_unread:b("bs_int64").compare(n,g)>0,thread_type:e.l,story_ring_state:0,parent_thread_key:[0,0],is_typing:!1,folder_name:"inbox",custom_badge_type:2,mailbox_type:b("LSMailboxType.bs").messenger,draft_message:void 0,ongoing_call_state:[0,0],read_by:j(d,b("bs_belt_Option").map(a,function(a){return a.b}),b("bs_belt_Option").map(a,function(a){return a.k}),o,b("bs_int64").to_string(l)),last_message_sent_by_viewer:o,custom_emoji:void 0,is_blocked:p,is_active:c,snippet_sender_contact_id:e.h,otherParticipants:m}}f.makeOpen=c;f.makeSecure=d;f.getThreadIsMuted=a}),null);
__d("MWLSGroupThreads.bs",["bs_int64","React","SkytaleDB","bs_caml_int64","MWLSThread.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MessagingThreadType.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("SkytaleDB").table(c,"contacts").asc,e=b("SkytaleDB").table(c,"presence_states").asc;return b("SkytaleDBQuerySubscriptionHook.bs").useArray(g.useMemo(function(){return b("SkytaleDBQuery.bs").take(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").filter(b("SkytaleDB").table(c,"threads").index("lastActivityTimestampMs").desc,function(a){a=a.c;return b("bs_caml_int64").eq(a,b("MessagingThreadType.bs").group)}),function(a){a=b("MWLSThread.bs").makeOpen(c,d,e,a);return{name:a.thread_name,isThreadActive:a.is_active,images:a.picture_urls,threadID:b("bs_int64").to_string(a.thread_key),lastActiveTime:b("bs_caml_int64").to_float(a.last_activity_timestamp)/1e3}}),3)},[c]))}f.useHook=a}),null);
__d("MWLSGroupThreads.re",["MWLSGroupThreads.bs"],(function(a,b,c,d,e,f){a=b("MWLSGroupThreads.bs").useHook;f.useHook=a}),null);
__d("CometHomeContactGroupsLSContent.react",["CometHomeContactGroup.react","CometHomeContactGroupsContentWrapper.react","MWLSGroupThreads.re","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.activeStatusOn;a=b("MWLSGroupThreads.re").useHook();a=a.map(function(a){return g.jsx("li",{children:g.jsx(b("CometHomeContactGroup.react"),{activeStatusOn:c,images:a.images,isThreadActive:a.isThreadActive,lastActiveTime:a.lastActiveTime,name:a.name,threadID:a.threadID})},a.threadID)});return g.jsx(b("CometHomeContactGroupsContentWrapper.react"),{activeStatusOn:c,groups:a})}}),null);
__d("MWLSCurrentThreadDetails.bs",["bs_int64","React","MWThread.bs","SkytaleDB","MWLSThread.bs","bs_caml_format","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSMessagingThreadTypeUtil.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWThread.bs").useIdExn(0);var d=b("bs_int64").to_string(b("MWThread.bs").toThreadKey(a)),e=g.useMemo(function(){var a=c,e=b("bs_caml_format").caml_int64_of_string(d),f=b("SkytaleDB").table(a,"contacts").asc,g=b("SkytaleDB").table(a,"presence_states").asc;return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"threads").asc,[e,0]),function(c){return b("MWLSThread.bs").makeOpen(a,f,g,c)})},[d,c]),f=g.useMemo(function(){var a=c,e=b("bs_caml_format").caml_int64_of_string(d),f=b("SkytaleDB").table(a,"contacts").asc,g=b("SkytaleDB").table(a,"presence_states").asc;return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_threads").asc,[e,0]),function(c){return b("MWLSThread.bs").makeSecure(a,f,g,c)})},[d,c]);if(b("LSMessagingThreadTypeUtil.bs").isSecure(b("LSMessagingThreadTypeUtil.bs").ofThreadId(a)))return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(f);else return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(e)}f.useCurrentThreadDetails=a}),null);
__d("MWLSIsCurrentThread1To1.bs",["bs_caml_int64","MessagingThreadType.bs","MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);if(a!==void 0)return b("bs_caml_int64").eq(a.thread_type,b("MessagingThreadType.bs").oneToOne);else return!1}f.useHook=a}),null);
__d("MWLSIsCurrentThreadMuted.bs",["bs_int64","React","MWThread.bs","SkytaleDB","bs_caml_int64","MWLSThread.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWThread.bs").toThreadKey(b("MWThread.bs").useIdExn(0));a=b("bs_int64").to_string(d);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,[d,0])},[a,c]));if(a!==void 0){a=a.l;return[b("MWLSThread.bs").getThreadIsMuted(a),b("bs_caml_int64").eq(a,[-1,4294967295])?-1:b("bs_caml_int64").to_float(a)/1e3]}else return[!1,0]}f.useHook=a}),null);
__d("MWLSIsCurrentThreadUnread.bs",["MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);if(a!==void 0)return a.is_unread;else return!1}f.useHook=a}),null);
__d("MWLSLastMessageTimestamp.bs",["bs_int64","React","MWThread.bs","SkytaleDB","bs_caml_int64","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWThread.bs").toThreadKey(b("MWThread.bs").useIdExn(0));a=b("bs_int64").to_string(d);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,[d,0])},[a,c]));if(a!==void 0)return b("bs_caml_int64").to_float(a.i);else return 0}f.useHook=a}),null);
__d("LSDict",["invariant","nativePromiseRegeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a.tag="ls-array";return a}function i(a){var c=this,d=new Map([].concat(a||[]).map(function(a){var b=a[0];a=a[1];return[JSON.stringify(b),a]}));this.get=function(a){return d.get(JSON.stringify(a))};this.set=function(a,b){d.set(JSON.stringify(a),b);return c};this["delete"]=function(a){return d["delete"](JSON.stringify(a))};this.clear=function(){return d.clear()};this.forEach=function(a,b){return d.forEach(function(b,d){return a(b,JSON.parse(d),c)},b)};this._getSize=function(){return d.size};Object.defineProperties(this,{size:{get:function(){return d.size}}});this.has=function(a){return d.has(JSON.stringify(a))};this.entries=b("nativePromiseRegeneratorRuntime").mark(function a(){var c,e,f,g,h,i,j;return b("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c=d.entries(),e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!e){a.next=7;break}if(!(f>=c.length)){a.next=4;break}return a.abrupt("break",18);case 4:g=c[f++];a.next=11;break;case 7:f=c.next();if(!f.done){a.next=10;break}return a.abrupt("break",18);case 10:g=f.value;case 11:h=g;i=h[0];j=h[1];a.next=16;return[JSON.parse(i),j];case 16:a.next=1;break;case 18:case"end":return a.stop()}},a,this)});this[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=this.entries;this.keys=function(){return h(Array.from(d.keys()).map(function(a){return JSON.parse(a)}))};this.values=d.values.bind(d)}i.fromObject=function(a){return new i(Object.entries(a))};i.shapeToRecord=function(a){return Array.from(a).reduce(function(a,b){var c=b[0];b=b[1];typeof c==="string"||g(0,22198);return babelHelpers["extends"]({},a,(a={},a[c]=b,a))},{})};e.exports=i}),null);
__d("LSJson",["invariant","bs_caml_int64","LSDict"],(function(a,b,c,d,e,f,g){"use strict";var h=512,i={stringify:function(a,c){c===void 0&&(c=0);c<h||g(0,17937);if(typeof a==="string"||typeof a==="number"||typeof a==="boolean")return JSON.stringify(a);else if(a===void 0)return"null";else if(typeof a==="object")if(Array.isArray(a))return a.tag==="ls-array"?"["+a.map(function(a){return i.stringify(a,c+1)}).join(",")+"]":b("bs_caml_int64").to_string(a);else if(a instanceof b("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];typeof b==="string"||g(0,17925);return JSON.stringify(b)+":"+i.stringify(a,c+1)}).join(",")+"}";g(0,19710,typeof a,JSON.stringify(a))}};e.exports=i}),null);
__d("LS",["invariant","FBLogger","LSDict","LSJson","bs_caml_format","bs_caml_int64","nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["1"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["1"]);k=function(){return a};return a}function l(a){return a.name.match(/secure_|inbox(?!_)/i)}function m(a,b){return a===b?0:a<b?-1:1}var n=babelHelpers["extends"]({},b("bs_caml_int64"),{eq:function(a,c){return a==null&&c==null||a!=null&&c!=null&&b("bs_caml_int64").eq(a,c)},neq:function(a,c){return a==null&&c!=null||a!=null&&c==null||a!=null&&c!=null&&b("bs_caml_int64").neq(a,c)},to_int32:function(a){return a==null?a:b("bs_caml_int64").to_int32(a)},to_string:function(a){return a==null?a:b("bs_caml_int64").to_string(a)},from_string:function(a){try{return b("bs_caml_format").caml_int64_of_string(a)}catch(c){throw b("unrecoverableViolation")('Unable to cast "'+a+'" to int64',"messenger_comet")}},random:function(){var b=a.crypto||a.msCrypto;return Array.from(b.getRandomValues(new Uint32Array(2)))}});function o(a){a.length===1||g(0,17923);return b("bs_caml_format").caml_int64_of_string(a[0])}function p(a){a.filter=function(c){var d=b("nativePromiseRegeneratorRuntime").mark(function d(){var e;return b("nativePromiseRegeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 2:e=d.sent;case 3:if(e.done){d.next=14;break}d.next=6;return b("nativePromiseRegeneratorRuntime").awrap(c(e.value.item));case 6:if(!d.sent){d.next=9;break}d.next=9;return e.value;case 9:d.next=11;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 11:e=d.sent;d.next=3;break;case 14:case"end":return d.stop()}},d,this)});return p(d())};a.slice=function(c,d){var e=b("nativePromiseRegeneratorRuntime").mark(function e(){var f,g,h,i,j,k;return b("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:f=0;case 1:if(!(f<c)){e.next=12;break}e.next=4;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 4:g=e.sent;h=g.done;if(!h){e.next=9;break}b("FBLogger")("messenger_web_product").info("not enough iterable values to slice from %d",c);return e.abrupt("return");case 9:f++;e.next=1;break;case 12:if(!(f<d)){e.next=25;break}e.next=15;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 15:i=e.sent;j=i.value;k=i.done;if(!k){e.next=20;break}return e.abrupt("return");case 20:e.next=22;return j;case 22:f++;e.next=12;break;case 25:case"end":return e.stop()}},e,this)});return p(e())};a.forEach=function(c){var d,e,f,g,h;return b("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("nativePromiseRegeneratorRuntime").awrap(a.toArray());case 2:d=i.sent,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 6:if(!e){i.next=12;break}if(!(f>=d.length)){i.next=9;break}return i.abrupt("break",21);case 9:g=d[f++];i.next=16;break;case 12:f=d.next();if(!f.done){i.next=15;break}return i.abrupt("break",21);case 15:g=f.value;case 16:h=g;i.next=19;return b("nativePromiseRegeneratorRuntime").awrap(c(h));case 19:i.next=6;break;case 21:case"end":return i.stop()}},null,this)};a.toArray=function(){var c,d;return b("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=[];e.next=3;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:d=e.sent;case 4:if(d.done){e.next=11;break}c.push(d.value);e.next=8;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 8:d=e.sent;e.next=4;break;case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}},null,this)};a.sortBy=function(c){var d={ASC:1,DESC:-1},e=function(a,b){for(var e=0;e<c.length;e++){var f=c[e][0],g=a[f];f=b[f];var h;g===void 0&&f===void 0?h=0:g===void 0&&f!==void 0?h=-1:g!==void 0&&f===void 0?h=1:h=(c[e][2]||m)(g,f);if(h===0)continue;return h*d[c[e][1]]}return 0},f=b("nativePromiseRegeneratorRuntime").mark(function c(){var d,f,g,h,i;return b("nativePromiseRegeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("nativePromiseRegeneratorRuntime").awrap(a.toArray());case 2:c.t0=function(a,b){return e(a.item,b.item)},d=c.sent.sort(c.t0),f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 7:if(!f){c.next=13;break}if(!(g>=d.length)){c.next=10;break}return c.abrupt("break",22);case 10:h=d[g++];c.next=17;break;case 13:g=d.next();if(!g.done){c.next=16;break}return c.abrupt("break",22);case 16:h=g.value;case 17:i=h;c.next=20;return i;case 20:c.next=7;break;case 22:case"end":return c.stop()}},c,this)});return p(f())};a.count=function(){var c,d;return b("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=0;e.next=3;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:d=e.sent;case 4:if(d.done){e.next=11;break}c++;e.next=8;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 8:d=e.sent;e.next=4;break;case 11:return e.abrupt("return",n.of_int32(c));case 12:case"end":return e.stop()}},null,this)};a.groupBy=function(c){return{forEach:function(d){var e,f,g,h,i,j,k,l,m,o;return b("nativePromiseRegeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return b("nativePromiseRegeneratorRuntime").awrap(a.toArray());case 2:e=p.sent,f=e.reduce(function(a,b){b=b.item[c];var d=(a.get(b)||0)+1;return a.set(b,d)},new(b("LSDict"))()),(g=f,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!h){p.next=11;break}if(!(i>=g.length)){p.next=8;break}return p.abrupt("break",22);case 8:k=g[i++];p.next=15;break;case 11:i=g.next();if(!i.done){p.next=14;break}return p.abrupt("break",22);case 14:k=i.value;case 15:l=k;m=l[0];o=l[1];p.next=20;return b("nativePromiseRegeneratorRuntime").awrap(d((j={},j[c]=m,j.group_count=n.of_int32(o),j)));case 20:p.next=5;break;case 22:case"end":return p.stop()}},null,this)}}};return a}function q(a,b){var c=u[b.name];return!c?a:Object.keys(c).reduce(function(a,d){var e=b.columnNames[d];Object.prototype.hasOwnProperty.call(a,e)||(a[e]=c[d]);return a},babelHelpers["extends"]({},a))}function r(a,c){var d=a.table(c.name);function e(a,b){return{"delete":function(){return d["delete"](a)},item:b,update:function(c){return d.upsert(a,babelHelpers["extends"]({},b,c))}}}return{add:function(a){return d.add(q(a,c))},getArr:function(){for(var a=arguments.length,f=new Array(a),g=0;g<a;g++)f[g]=arguments[g];var h=b("nativePromiseRegeneratorRuntime").mark(function a(){var g,h,i,j,k,l,m,n,o,p,q;return b("nativePromiseRegeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:g=0;case 1:if(!(g<f.length)){a.next=32;break}h=f[g];i=h[0];j=h[1];k=i,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 6:if(!l){a.next=12;break}if(!(m>=k.length)){a.next=9;break}return a.abrupt("break",29);case 9:n=k[m++];a.next=16;break;case 12:m=k.next();if(!m.done){a.next=15;break}return a.abrupt("break",29);case 15:n=m.value;case 16:o=n;if(!(o==null||Array.isArray(o)&&o.some(function(a){return a==null}))){a.next=19;break}return a.abrupt("continue",27);case 19:a.next=21;return b("nativePromiseRegeneratorRuntime").awrap(j===void 0?d.get(o):d.index(j).get(o));case 21:p=a.sent;if(p){a.next=24;break}return a.abrupt("continue",27);case 24:q=j===void 0?o:c.primaryKeyIds.length===1?p[c.primaryKeyIds[0]]:c.primaryKeyIds.map(function(a){return p[a]});a.next=27;return e(q,p);case 27:a.next=6;break;case 29:g++;a.next=1;break;case 32:case"end":return a.stop()}},a,this)});return p(h())},openCursor:function(){return p(b("nativePromiseRegeneratorRuntime").mark(function a(){var c,f,g,h,i;return b("nativePromiseRegeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:c=d.entries(new WeakMap());a.next=3;return b("nativePromiseRegeneratorRuntime").awrap(c.next());case 3:f=a.sent;case 4:if(f.done){a.next=13;break}g=f.value,h=g[0],i=g[1];a.next=8;return e(h,i);case 8:a.next=10;return b("nativePromiseRegeneratorRuntime").awrap(c.next());case 10:f=a.sent;a.next=4;break;case 13:case"end":return a.stop()}},a,this)})())},put:function(a){return d.put(a)}}}function s(a,b,c){return{table:function(d){d=c.tableIds[d];b===0&&(l(d)&&g(0,19095));return r(a,d)}}}function t(a,c,d,e,f,l){var m=s(l,a,c),p=[];return{Map:b("LSDict"),constructor:{n:o},createArray:function(){return Object.defineProperty([],"tag",{value:"ls-array"})},db:m,i64:n,like:function(a,b){return a.match(b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."))},log:function(b,c){d.log(l,a,c,b)},loopAsync:function(a,b){function c(d){return n.lt(d,a)?b(d).then(function(){return c(n.add(d,o(k())))}):Promise.resolve()}return c(o(j()))},loopSync:function(a,b){for(var c=o(i());n.lt(c,a);c=n.add(c,o(h())))b(c)},n:o,nop:function(b){var e=c.nativeOperationIds[b];e!=null||g(0,17153,b);d[e]!=null||g(0,17148,e);for(var f=arguments.length,h=new Array(f>1?f-1:0),i=1;i<f;i++)h[i-1]=arguments[i];return d[e].apply(d,[l,a].concat(h))},notnull:function(a){a!=null||g(0,17354);return a},ntop:function(b,d){var f,h=c.nativeTypeOperationIds[b];h!=null||g(0,19425,b);var i=h[d];i!=null||g(0,17151,d);(e[b]||{})[i]!=null||g(0,19426,b,i);for(var j=arguments.length,k=new Array(j>2?j-2:0),m=2;m<j;m++)k[m-2]=arguments[m];return(f=e[b])[i].apply(f,[l,a].concat(k))},print:function(a){},rm:n.of_int32(a),seq:function(a){return a.slice(1).reduce(function(a,b){return a.then(b)},a[0]())},slc:function(a,b){return Array.prototype.slice.call(a,b)},sp:function(h){var i=c.storedProcedureIds[h];i!=null||g(0,17149,h);f[i]!=null||g(0,17150,i);var j=this;switch(a){case 0:j=t(2,c,d,e,f,l);break;case 2:j=t(1,c,d,e,f,l);break}p.push(i);for(var k=arguments.length,m=new Array(k>1?k-1:0),n=1;n<k;n++)m[n-1]=arguments[n];return f[i].apply(f,[j].concat(m)).then(function(a){p.pop();return a})["catch"](function(a){b("FBLogger")("messenger_web_product").catching(a).addMetadata("LS_WEB","SPROC_STACK",p.join("\n")).warn("Sproc %s failed",i);p.pop();throw a})},"throw":function(a){throw b("unrecoverableViolation")(a,"messenger_comet")},toJSON:function(a){return b("LSJson").stringify(a)}}}t.n=o;e.exports=t;var u={admin_message_ctas:{show_ad_choice_icon:[0,0],timestamp_ms:[0,0]},attachment_items:{attachment_index:[0,0]},attachments:{attachment_index:[0,0],attachment_type:[0,0],authority_level:[0,0],has_media:[0,0],has_xma:[0,0],is_sharable:[0,0],timestamp_ms:[0,0]},attachments_ranges_v:{_has_more_after:[0,0],_has_more_before:[0,0],_is_loading_after:[0,0],_is_loading_before:[0,0],media_group:[0,0]},contact_upload_settings:{authority_level:[0,0]},contacts:{authority_level:[0,0],blocked_by_viewer_status:[0,0],can_viewer_message:[0,1],contact_type:[0,0],contact_type_exact:[0,0],is_memorialized:[0,0],is_messenger_user:[0,0],rank:[0,0]},group_membership_approval_requests:{authority_level:[0,0]},inbox_ad_unit:{should_show_ad_choice:[0,0]},messages:{authority_level:[0,0],displayed_content_types:[0,1],has_quick_replies:[0,0],is_admin_message:[0,0],is_unsent:!1,primary_sort_key:[0,0],quick_reply_type:[0,0],reply_attachment_type:[0,0],reply_status:[0,0],secondary_sort_key:[0,0],send_status:[0,0],send_status_v:[0,0],text_has_links:[0,0],timestamp_ms:[0,0],view_flags:[0,0]},messages_ranges__generated:{_is_loading_after:[0,0],_is_loading_before:[0,0]},messages_ranges_v:{_has_more_after:[0,0],_has_more_before:[0,0],_is_loading_after:[0,0],_is_loading_before:[0,0]},messages_status:{timestamp_ms:[0,0]},notification_settings:{group_notification_setting:[0,0]},participants:{authority_level:[0,0],delivered_watermark_timestamp_ms:[0,0],read_watermark_timestamp_ms:[0,0]},pending_tasks:{enqueue_timestamp_ms:[0,0],failure_count:[0,0],first_executed_timestamp_ms:[0,0],min_time_to_sync_timestamp_ms:[0,0],plugin_type:[0,0]},pending_uploads:{enqueue_timestamp_ms:[0,0]},presence_states:{expiration_timestamp_ms:[0,0],status:[0,1]},ranking_scores:{score:[0,0]},reactions:{authority_level:[0,0],timestamp_ms:[0,0]},secure_attachments:{attachment_index:[0,0]},secure_message_other_devices:{first_seen_timestamp_ms:[0,0]},secure_message_pre_keys:{timestamp_ms:[0,0]},secure_message_sender_key:{device_seen_timestamp_ms:[0,0]},secure_message_session_state:{timestamp_ms:[0,0]},secure_messages:{authority_level:[0,0],is_admin_message:[0,0],is_local_message:[0,0],message_visible_timespan_ms:[0,0],retry_count:[0,0],send_status:[0,0],timestamp_ms:[0,0]},secure_thread_participants:{delivered_watermark_timestamp_ms:[0,0],read_watermark_timestamp_ms:[0,0]},secure_threads:{authority_level:[0,0],is_admin_snippet:[0,0],last_activity_timestamp_ms:[0,0],last_read_watermark_timestamp_ms:[0,0],mute_expire_time_ms:[0,0],remove_watermark_timestamp_ms:[0,0],secure_thread_status:[0,0],thread_type:[0,7]},stories:{authority_level:[0,0]},story_ad_unit:{should_show_ad_choice:[0,0]},story_buckets:{page_num:[0,0],read_state:[0,0]},story_overlays:{authority_level:[0,0]},story_reactions:{authority_level:[0,0]},story_viewers:{authority_level:[0,0],interaction_type:[0,1]},sync_groups:{can_ignore_timestamp:[0,0],min_time_to_sync_timestamp_ms:[0,0],send_sync_params:[0,0],sync_channel:[0,1],sync_status:[0,0]},thread_nullstate:{cta_type:[0,0]},threads:{authority_level:[0,0],capabilities:[0,0],disable_composer_input:[0,0],has_persistent_menu:[0,0],is_admin_snippet:[0,0],is_custom_thread_picture:[0,0],last_activity_timestamp_ms:[0,0],last_read_watermark_timestamp_ms:[0,0],mute_expire_time_ms:[0,0],ongoing_call_state:[0,0],remove_watermark_timestamp_ms:[0,0],snippet_has_emoji:[0,0]},threads_ranges__generated:{_is_loading_after:[0,0],_is_loading_before:[0,0]},threads_ranges_v:{_has_more_after:[0,0],_has_more_before:[0,0],_is_loading_after:[0,0],_is_loading_before:[0,0],_max_last_activity_timestamp_ms:[0,0],_max_thread_key:[0,0],_min_last_activity_timestamp_ms:[0,0],_min_thread_key:[0,0]},transaction_history:{timestamp_ms:[0,0]},universal_search_recent_searches:{last_accessed_timestamp_ms:[0,0]},upload_contact_snapshot:{authority_level:[0,0]},video_chat_links:{can_anonymous_users_join:[0,0]},video_chat_links_creation:{can_anonymous_users_join:[0,0]}}}),null);
__d("IBFEncoder.bs",["bs_int64","bs_belt_Array","bs_caml_array","bs_caml_int32","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";var g=[-873292572,2216829733];function h(a,c,d){d=c!==void 0?c:g;return b("bs_belt_Array").range(0,7).reduce(function(c,d){var e;c=(e=b("bs_caml_int64")).add(e.add(e.add(e.add(e.add(e.add(c,e.lsl_(c,1)),e.lsl_(c,4)),e.lsl_(c,5)),e.lsl_(c,7)),e.lsl_(c,8)),e.lsl_(c,40));e=e.and_(e.asr_(a,d<<3),[0,255]);d=b("bs_caml_int64").gt(e,[0,127])?b("bs_caml_int64").or_(e,[-1,4294967040]):e;return b("bs_caml_int64").xor(c,d)},d)}function i(a){var c=new TextEncoder();return c.encode(a).reduce(function(a,c){var d;d=(d=b("bs_caml_int64")).add(d.add(d.add(d.add(d.add(d.add(a,d.lsl_(a,1)),d.lsl_(a,4)),d.lsl_(a,5)),d.lsl_(a,7)),d.lsl_(a,8)),d.lsl_(a,40));a=c>127?c|-256:c;return b("bs_caml_int64").xor(d,b("bs_caml_int64").of_int32(a))},g)}function j(a,c){var d=b("bs_caml_int64").mod_(b("bs_caml_int64").and_(a,[2147483647,4294967295]),c),e=[0,0];b("bs_caml_int64").neq(b("bs_caml_int64").and_(a,[-2147483648,0]),[0,0])&&(e=b("bs_caml_int64").le(c,[1073741824,0])?b("bs_caml_int64").mul(b("bs_caml_int64").mod_([1073741824,0],c),[0,2]):b("bs_caml_int64").add(b("bs_caml_int64").sub([1073741824,0],c),[1073741824,0]));return b("bs_caml_int64").mod_(b("bs_caml_int64").add(d,e),c)}function k(a,c,d){var e=b("bs_belt_Array").make(a,0),f=d;for(var g=0,c=c-1|0;g<=c;++g){f=h(d,f,0);var i=b("bs_caml_int64").to_int32(j(f,b("bs_caml_int64").of_int32(a)));while(b("bs_caml_array").caml_array_get(e,i)!==0)i=b("bs_caml_int32").mod_(i+1|0,a);b("bs_caml_array").caml_array_set(e,i,1)}return e}function l(a){return b("bs_caml_int64").add(b("bs_caml_int64").mul([0,2],i(a)),[0,1])}function m(a){return h(a,[0,1459076858],0)}function a(a,c){var d=[],e=new Map(),f=new Map(),g=new Map();for(var h=0,j=a-1|0;h<=j;++h)d.push({hashResultSum:[0,0],verificationHashResultSum:[0,0],count:0});var n=function(e,f){var g=m(e),h=k(a,c,e);h.forEach(function(c,a){if(c!==0){return(c=b("bs_caml_array")).caml_array_set(d,a,{hashResultSum:b("bs_caml_int64").xor(c.caml_array_get(d,a).hashResultSum,e),verificationHashResultSum:b("bs_caml_int64").xor(c.caml_array_get(d,a).verificationHashResultSum,g),count:c.caml_array_get(d,a).count+f|0})}else return 0});return 0};return{addObject:function(a,c){var d=a;a=a+c;c=1;var h=l(d);a=b("bs_caml_int64").mul([0,2],i(a));e.set(b("bs_int64").to_string(h),d);f.set(b("bs_int64").to_string(a),d);g.set(h,a);n(h,c);return n(a,c)},serializeToArray:function(f){f=[];for(var c=0,e=a-1|0;c<=e;++c)f.push(b("bs_caml_array").caml_array_get(d,c).hashResultSum),f.push(b("bs_caml_array").caml_array_get(d,c).verificationHashResultSum),f.push(b("bs_caml_int64").of_int32(b("bs_caml_array").caml_array_get(d,c).count));return f}}}f.make=a}),null);
__d("LSCoreCreateInvertibleBloomFilterEncoder.bs",["bs_caml_int64","IBFEncoder.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return window.Promise.resolve([b("IBFEncoder.bs").make(b("bs_caml_int64").to_int32(d),b("bs_caml_int64").to_int32(e))])}f.call=a}),null);
__d("LSCoreFunctionProfileEnter.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("Promise").resolve([])}f.call=a}),null);
__d("LSCoreFunctionProfileLeave.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("Promise").resolve([])}f.call=a}),null);
__d("LSCoreGetRandomNumber.bs",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("unrecoverableViolation")("SPROC LSCoreGetRandomNumber not implemented","messenger_comet")}f.call=a}),null);
__d("LSCoreIsLocalizationSupported.bs",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("unrecoverableViolation")("SPROC LSCoreIsLocalizationSupported not implemented","messenger_comet")}f.call=a}),null);
__d("LSClientLogLevel.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];c=[0,3];d=[0,4];f.verbose=a;f.warning=b;f.error=c;f.info=d}),null);
__d("LSCoreLog.bs",["FBLogger","bs_caml_int64","LSClientLogLevel.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){if(b("bs_caml_int64").eq(d,b("LSClientLogLevel.bs").warning)){b("FBLogger")("messenger_web_product").warn(e);return 0}else if(b("bs_caml_int64").eq(d,b("LSClientLogLevel.bs").error)){b("FBLogger")("messenger_web_product").mustfix(e);return 0}else{b("FBLogger")("messenger_web_product").info(e);return 0}}f.call=a}),null);
__d("LSCoreLogEventAnnotate.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("Promise").resolve([])}f.call=a}),null);
__d("LSCoreResolveLocalizedString.bs",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("unrecoverableViolation")("SPROC LSCoreResolveLocalizedString not implemented","messenger_comet")}f.call=a}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("base64-js-1.3.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){g.byteLength=h;g.toByteArray=d;g.fromByteArray=e;var a=[],b=[],c=typeof Uint8Array!=="undefined"?Uint8Array:Array;h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var d=0,e=h.length;d<e;++d)a[d]=h[d],b[h.charCodeAt(d)]=d;b["-".charCodeAt(0)]=62;b["_".charCodeAt(0)]=63;function f(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");a===-1&&(a=b);b=a===b?0:4-a%4;return[a,b]}function h(a){a=f(a);var b=a[0];a=a[1];return(b+a)*3/4-a}function i(a,b,c){return(b+c)*3/4-c}function d(a){var d,e=f(a),g=e[0];e=e[1];var h=new c(i(a,g,e)),j=0;g=e>0?g-4:g;for(var k=0;k<g;k+=4)d=b[a.charCodeAt(k)]<<18|b[a.charCodeAt(k+1)]<<12|b[a.charCodeAt(k+2)]<<6|b[a.charCodeAt(k+3)],h[j++]=d>>16&255,h[j++]=d>>8&255,h[j++]=d&255;e===2&&(d=b[a.charCodeAt(k)]<<2|b[a.charCodeAt(k+1)]>>4,h[j++]=d&255);e===1&&(d=b[a.charCodeAt(k)]<<10|b[a.charCodeAt(k+1)]<<4|b[a.charCodeAt(k+2)]>>2,h[j++]=d>>8&255,h[j++]=d&255);return h}function j(b){return a[b>>18&63]+a[b>>12&63]+a[b>>6&63]+a[b&63]}function k(a,b,c){var d,e=[];for(var b=b;b<c;b+=3)d=(a[b]<<16&16711680)+(a[b+1]<<8&65280)+(a[b+2]&255),e.push(j(d));return e.join("")}function e(b){var c=b.length,d=c%3,e=[],f=16383;for(var g=0,h=c-d;g<h;g+=f)e.push(k(b,g,g+f>h?h:g+f));d===1?(g=b[c-1],e.push(a[g>>2]+a[g<<4&63]+"==")):d===2&&(g=(b[c-2]<<8)+b[c-1],e.push(a[g>>10]+a[g>>4&63]+a[g<<2&63]+"="));return e.join("")}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("base64-js",["base64-js-1.3.0"],(function(a,b,c,d,e,f){e.exports=b("base64-js-1.3.0")()}),null);
__d("LSSecureMailboxNativeOperationResultCode.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[-1,4294967295];c=[-1,4294967286];d=[-1,4294967284];e=[-1,4294967274];var g=[-1,4294966296],h=[-1,4294966295],i=[-1,4294966294],j=[-1,4294966293],k=[-1,4294966292],l=[-1,4294966291],m=[-1,4294966290],n=[-1,4294966289],o=[-1,4294966288],p=[-1,4294966287],q=[-1,4294966286],r=[-1,4294966285],s=[-1,4294966196],t=[-1,4294966096],u=[-1,4294966095],v=[-1,4294965295];f.msmSuccess=a;f.msmErrGeneric=b;f.msmErrThriftDecode=c;f.sgErrNomem=d;f.sgErrInval=e;f.sgErrUnknown=g;f.sgErrDuplicateMessage=h;f.sgErrInvalidKey=i;f.sgErrInvalidKeyId=j;f.sgErrInvalidMac=k;f.sgErrInvalidMessage=l;f.sgErrInvalidVersion=m;f.sgErrLegacyMessage=n;f.sgErrNoSession=o;f.sgErrStaleKeyExchange=p;f.sgErrUntrustedIdentity=q;f.sgErrVrfSigVerifFailed=r;f.sgErrInvalidProtoBuf=s;f.sgErrFpVersionMismatch=t;f.sgErrFpIdentMismatch=u;f.msmErrEphemeralUnsupported=v}),null);
__d("LSJson.bs",["bs_block","bs_curry","LSDict","bs_js_dict","bs_caml_array","bs_pervasives","bs_belt_Option","bs_caml_format","bs_caml_option","bs_caml_string","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a}function c(a){a=a.slice();a.tag="ls-array";return a}function d(a){return new(b("LSDict"))([["user_id",a.user_id],["instance_id",a.instance_id]])}var g=b("bs_caml_exceptions").create("LSJson.Parser.Invalid_json"),h=/^\"((?:[^\"\\]|\\.)*)\"/,i=/^-?\d+(?:(?:\.\d+)?[eE][-\+]?\d+|\.\d+)/,j=/^-?\d+/;function e(d){var e=function(c){while(!0){var e=c;if(e<d.length){var a=b("bs_caml_string").get(d,e);a=a-9|0;if(a>4||a<0)if(a!==23)return e;else{c=e+1|0;continue}else if(a===3||a===2)return e;else{c=e+1|0;continue}}else return e}},f=function(a,c){if(c>d.length)return b("bs_block").__(1,["No more input"]);else if(d.startsWith(a,c))return b("bs_block").__(0,[a,c+a.length|0]);else{c=b("bs_caml_string").get(d,0);return b("bs_block").__(1,["Unexpected '"+(String(c)+"'")])}},g=function(a,c){if(c>d.length)return b("bs_block").__(1,["No more input"]);else{a=a.exec(d.substr(c));if(a!==null){a=b("bs_belt_Option").getExn(b("bs_caml_option").nullable_to_opt(b("bs_caml_array").caml_array_get(a,0)));return b("bs_block").__(0,[a,c+a.length|0])}else{c=b("bs_caml_string").get(d,0);return b("bs_block").__(1,["Unexpected '"+(String(c)+"'")])}}},l=function(c,d,a){c=b("bs_curry")._1(c,a);if(c.tag)return c;else return b("bs_block").__(0,[b("bs_curry")._1(d,c[0]),c[1]])},m=function(c,d,a){c=b("bs_curry")._1(c,a);if(c.tag)return b("bs_curry")._1(d,a);else return c},o=function(c,d,a){c=b("bs_curry")._1(c,e(a));if(c.tag)return c;else{a=b("bs_curry")._1(d,e(c[1]));if(a.tag)return a;else return b("bs_block").__(0,[[c[0],a[0]],a[1]])}},p=function(a){var c=function(c){return l(a,function(a){return b("bs_caml_option").some(a)},c)},d=function(a){return b("bs_block").__(0,[void 0,a])};return function(a){return m(c,d,a)}},q=function(a){var c=function(c,d,e){while(!0){var f=d,a=b("bs_curry")._1(c,f);if(a.tag)return f;else{e.push(a[0]);d=a[1];continue}}};return function(d){var e=[];d=c(a,d,e);return b("bs_block").__(0,[e,d])}},c=function(a){return l(function(a){return g(h,a)},function(a){return JSON.parse(a)},a)},r=function(a){return l(function(a){return g(i,a)},function(a){return Number(a)},a)},s=function(a){return l(function(a){return g(j,a)},b("bs_caml_format").caml_int64_of_string,a)},t=function(a){return f("false",a)},u=function(a){return l(t,function(a){return!1},a)},v=function(a){return f("true",a)},w=function(a){return l(v,function(a){return!0},a)},x=function(a){return m(w,u,a)},y=function(a){return f("null",a)},z=function(a){return l(y,function(a){return 0},a)},A=function(a){var b=q(function(a){return o(function(a){return f(",",a)},B,a)}),c=p(function(a){return o(B,b,a)}),d=function(a){return l(c,function(a){if(a!==void 0){a=a;return[a[0]].concat(a[1].map(function(a){return a[1]}))}else return[]},a)},e=function(a){return o(d,function(a){return f("]",a)},a)};return l(function(a){return o(function(a){return f("[",a)},e,a)},function(a){return a[1][0]},a)},a=function(a){var d=q(function(a){return o(function(a){return f(",",a)},function(a){return o(c,function(a){return o(function(a){return f(":",a)},B,a)},a)},a)}),e=function(a){return o(B,d,a)},g=function(a){return o(function(a){return f(":",a)},e,a)},h=p(function(a){return o(c,g,a)}),i=function(a){return l(h,function(a){if(a!==void 0){a=a;var c=a[1][1];return b("bs_js_dict").fromArray([[a[0],c[0]]].concat(c[1].map(function(a){a=a[1];return[a[0],a[1][1]]})))}else return{}},a)},j=function(a){return o(i,function(a){return f("}",a)},a)};return l(function(a){return o(function(a){return f("{",a)},j,a)},function(a){return a[1][0]},a)},B=function(d){return m(function(a){return l(c,function(a){return b("bs_block").__(5,[a])},a)},function(c){return m(function(a){return l(r,function(a){return b("bs_block").__(2,[a])},a)},function(c){return m(function(a){return l(s,function(a){return b("bs_block").__(3,[a])},a)},function(c){return m(function(a){return l(x,function(a){return b("bs_block").__(1,[a])},a)},function(c){return m(function(a){return l(z,function(a){return 0},a)},function(c){return m(function(a){return l(A,function(a){return b("bs_block").__(4,[a])},a)},function(c){return l(a,function(a){return b("bs_block").__(0,[a])},c)},c)},c)},c)},c)},c)},d)},C=B(e(0));if(C.tag)return b("bs_pervasives").failwith(C[0]);else if(e(C[1])===d.length)return C[0];else return b("bs_pervasives").failwith("unexpected end of input")}function k(a){if(typeof a==="number"||a.tag)return b("bs_pervasives").failwith("expected dictionary");else return a[0]}function l(a){if(typeof a==="number"||a.tag!==4)return b("bs_pervasives").failwith("expected array");else return a[0]}function m(a){if(typeof a==="number")return b("bs_pervasives").failwith("expected int"+b("bs_belt_Option").getExn(JSON.stringify(a)));else if(a.tag===3)return a[0];else return b("bs_pervasives").failwith("expected int"+b("bs_belt_Option").getExn(JSON.stringify(a)))}function n(a){if(typeof a==="number"||a.tag!==5)return b("bs_pervasives").failwith("expected string");else return a[0]}function o(a,c){if(typeof a==="number")return;else return b("bs_caml_option").some(b("bs_curry")._1(c,a))}g={Invalid_json:g,doubleQuoteStringRegex:h,floatRegex:i,intRegex:j,parse:e,dict:k,array:l,int64:m,string:n,nullable:o};f.optional=a;f.array=c;f.tincanDeviceAddress=d;f.Parser=g}),null);
__d("MessagingAttachmentType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];e=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9];f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.ephemeralImage=j;f.ephemeralVideo=k}),null);
__d("LSSecureMailboxSenderKeyStatus.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,10];c=[0,2];d=[0,4];f.pendingSend=a;f.sendingToServer=b;f.sentToServer=c;f.localDevice=d}),null);
__d("LSPendingTasksPluginType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];e=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14];f.lsBroker=a;f.payments=b;f.ephemeralMessaging=c;f.carrierMessaging=d;f.bugReporter=e;f.messageDenormalizations=g;f.seenHeads=h;f.mediaUpload=i;f.secureThreadSeenHeads=j;f.whatsappThread=k;f.secureThreadOverWaMessageSend=l;f.contactPruning=m;f.mediaManager=n;f.secureThreadOverWaEncryption=o;f.storyPost=p}),null);
__d("bs_marshal",["bs_caml_bytes","bs_caml_external_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];return b("bs_caml_external_polyfill").resolve("caml_output_value_to_buffer")(a,c,d,e,f)}function g(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];return b("bs_caml_external_polyfill").resolve("caml_marshal_data_size")(a,c)}function c(a,b){return 20+g(a,b)|0}function h(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];var d=b("bs_caml_external_polyfill").resolve("caml_marshal_data_size")(a,c);if(c>(a.length-(20+d|0)|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];return b("bs_caml_external_polyfill").resolve("caml_input_value_from_string")(a,c)}function d(a,c){return h(b("bs_caml_bytes").bytes_of_string(a),c)}function e(a,c,d){return b("bs_caml_external_polyfill").resolve("caml_output_value")(a,c,d)}function i(a){return b("bs_caml_external_polyfill").resolve("caml_input_value")(a)}var j=20;f.to_channel=e;f.to_buffer=a;f.from_channel=i;f.from_bytes=h;f.from_string=d;f.header_size=j;f.data_size=g;f.total_size=c}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_external_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";function a(a){return typeof a!=="number"}var g=b("bs_caml_array").caml_array_get,h=b("bs_caml_array").caml_array_set;function c(a){return b("bs_caml_external_polyfill").resolve("caml_output_value_to_string")(a,0)}function d(a,c){return[b("bs_marshal").from_bytes(a,c),c+b("bs_marshal").total_size(a,c)|0]}function e(a){a=typeof a!=="number"&&(a.tag|0)!==248&&a.length>=1?a[0]:a;var c;if(typeof a!=="number"&&a.tag===248)c=a[0];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_constructor"];if(c.tag===252)return a;else throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_constructor"]}function i(a){return a[0]}function j(a){return a[1]}function k(a){return a.length-2|0}var l=0,m=245,n=246,o=247,p=248,q=249,r=250,s=251,t=251,u=252,v=253,w=254,x=255,y=255,z=1e3,A=1001,B=1002;function C(a){return b("bs_caml_external_polyfill").resolve("caml_ephe_create")(a)}function D(a,c){return b("bs_caml_external_polyfill").resolve("caml_ephe_get_key")(a,c)}function E(a,c){return b("bs_caml_external_polyfill").resolve("caml_ephe_get_key_copy")(a,c)}function F(a,c,d){return b("bs_caml_external_polyfill").resolve("caml_ephe_set_key")(a,c,d)}function G(a,c){return b("bs_caml_external_polyfill").resolve("caml_ephe_unset_key")(a,c)}function H(a,c){return b("bs_caml_external_polyfill").resolve("caml_ephe_check_key")(a,c)}function I(a,c,d,e,f){return b("bs_caml_external_polyfill").resolve("caml_ephe_blit_key")(a,c,d,e,f)}function J(a){return b("bs_caml_external_polyfill").resolve("caml_ephe_get_data")(a)}function K(a){return b("bs_caml_external_polyfill").resolve("caml_ephe_get_data_copy")(a)}function L(a,c){return b("bs_caml_external_polyfill").resolve("caml_ephe_set_data")(a,c)}function M(a){return b("bs_caml_external_polyfill").resolve("caml_ephe_unset_data")(a)}function N(a){return b("bs_caml_external_polyfill").resolve("caml_ephe_check_data")(a)}function O(a,c){return b("bs_caml_external_polyfill").resolve("caml_ephe_blit_data")(a,c)}C={create:C,length:k,get_key:D,get_key_copy:E,set_key:F,unset_key:G,check_key:H,blit_key:I,get_data:J,get_data_copy:K,set_data:L,unset_data:M,check_data:N,blit_data:O};f.is_block=a;f.double_field=g;f.set_double_field=h;f.first_non_constant_constructor_tag=l;f.last_non_constant_constructor_tag=m;f.lazy_tag=n;f.closure_tag=o;f.object_tag=p;f.infix_tag=q;f.forward_tag=r;f.no_scan_tag=s;f.abstract_tag=t;f.string_tag=u;f.double_tag=v;f.double_array_tag=w;f.custom_tag=x;f.final_tag=y;f.int_tag=z;f.out_of_heap_tag=A;f.unaligned_tag=B;f.extension_constructor=e;f.extension_name=i;f.extension_id=j;f.marshal=c;f.unmarshal=d;f.Ephemeron=C}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_obj","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";var g=b("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function h(a){throw g}function i(a){var c=a[0];a[0]=h;try{c=b("bs_curry")._1(c,0);a[0]=c;b("bs_caml_obj").caml_obj_set_tag(a,b("bs_obj").forward_tag);return c}catch(b){a[0]=function(a){throw b};throw b}}function j(a){var c=a[0];a[0]=h;c=b("bs_curry")._1(c,0);a[0]=c;b("bs_caml_obj").caml_obj_set_tag(a,b("bs_obj").forward_tag);return c}function a(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return i(a)}function c(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return j(a)}f.Undefined=g;f.force_lazy_block=i;f.force_val_lazy_block=j;f.force=a;f.force_val=c}),null);
__d("Tincan_PacketType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];c=[0,6];d=[0,7];e=[0,10];var g=[0,12],h=[0,20],i=[0,21],j=[0,22],k=[0,23],l=[0,24],m=[0,30],n=[0,32],o=[0,33],p=[0,41],q=[0,50],r=[0,51],s=[0,52],t=[0,60],u=[0,70],v=[0,71],w=[0,73],x=[0,75],y=[0,100],z=[0,300],A=[0,400],B=[0,450],C=[0,451],D=[0,452],E=[0,453],F=[0,499],G=[0,6e3],H=[0,6100],I=[0,6500],J=[0,6520],K=[0,6530],L=[0,6540],M=[0,6550],N=[0,6600],O=[0,6999],P=[0,7e3],Q=[0,8e3];f.salamanderPlaintextUnsafe=a;f.salamanderSignedEncrypted=b;f.backendPacketBounced=c;f.threadSenderKey=d;f.register=e;f.prekeyUpload=g;f.lookup=h;f.batchLookup=i;f.verifyChecksum=j;f.verifyPrekeys=k;f.threadMuteExpireTime=l;f.setPrimaryDevice=m;f.primaryDeviceChange=n;f.statusThreadParticipantsChanged=o;f.linkNeedsNewLookup=p;f.receiptDelivered=q;f.receiptSeen=r;f.markUnseen=s;f.createThread=t;f.enableDevice=u;f.disableDevice=v;f.deviceDisabled=w;f.deviceStatusChanged=x;f.callerIdInfo=y;f.statusTopupPrekeys=z;f.statusPacketError=A;f.statusPacketBlockInsecure=B;f.statusPacketBlockCountry=C;f.statusPacketVersionTooOld=D;f.statusPacketVersionTooNew=E;f.maxValuePacketError=F;f.statusSalamanderError=G;f.statusSalamanderErrorNonspecific=H;f.statusSalamanderErrorOuterDecrypt=I;f.statusSalamanderErrorSignatureFail=J;f.statusSalamanderErrorInnerDeserialize=K;f.statusSalamanderErrorInvalidType=L;f.statusSalamanderErrorInvalidBody=M;f.statusSalamanderTypeUnrecognized=N;f.maxValueStatusSalamanderError=O;f.statusSalamanderBounced=P;f.statusSiRateLimitExceeded=Q}),null);
__d("Tincan_SalamanderType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,2];b=[0,3];c=[0,4];d=[0,5];e=[0,6];var g=[0,7],h=[0,8],i=[0,9];f.linkDeleted=a;f.plainText=b;f.attachmentInfoList=c;f.deviceLocalText=d;f.stickerInfo=e;f.threadSenderKey=g;f.threadMessageLifetimeChanged=h;f.screenshotNotification=i}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("hi-base32-0.5.0",[],(function(a,b,c,d,e,f){"use strict";c={};var g={exports:c},h;function i(){(function(){var c=typeof window==="object"?window:{},d=!c.HI_BASE32_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;d&&(c=a);d=!c.HI_BASE32_NO_COMMON_JS&&typeof g==="object"&&g.exports;var e=typeof h==="function"&&h.amd,i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),j={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},k=[0,0,0,0,0,0,0,0],l=function(a,b){b.length>10&&(b="..."+b.substr(-10));b=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+a+" bytes: "+b+" <-");b.position=a;throw b},m=function(a){var b="",c=a.length,d=0,e=0,f,g;while(d<c){f=a[d++];if(f<=127){b+=String.fromCharCode(f);continue}else f>191&&f<=223?(g=f&31,e=1):f<=239?(g=f&15,e=2):f<=247?(g=f&7,e=3):l(d,b);for(var h=0;h<e;++h)f=a[d++],(f<128||f>191)&&l(d,b),g<<=6,g+=f&63;g>=55296&&g<=57343&&l(d,b);g>1114111&&l(d,b);g<=65535?b+=String.fromCharCode(g):(g-=65536,b+=String.fromCharCode((g>>10)+55296),b+=String.fromCharCode((g&1023)+56320))}return b},n=function(a){if(!/^[A-Z2-7=]+$/.test(a))throw new Error("Invalid base32 characters");a=a.replace(/=/g,"");var b,c,d,e,f,g,h,i,k=[],l=0,m=a.length;for(var n=0,o=m>>3<<3;n<o;)b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],f=j[a.charAt(n++)],g=j[a.charAt(n++)],h=j[a.charAt(n++)],i=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255,k[l++]=(e<<4|f>>>1)&255,k[l++]=(f<<7|g<<2|h>>>3)&255,k[l++]=(h<<5|i)&255;i=m-o;i===2?(b=j[a.charAt(n++)],c=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255):i===4?(b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255):i===5?(b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],f=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255,k[l++]=(e<<4|f>>>1)&255):i===7&&(b=j[a.charAt(n++)],c=j[a.charAt(n++)],d=j[a.charAt(n++)],e=j[a.charAt(n++)],f=j[a.charAt(n++)],g=j[a.charAt(n++)],h=j[a.charAt(n++)],k[l++]=(b<<3|c>>>2)&255,k[l++]=(c<<6|d<<1|e>>>4)&255,k[l++]=(e<<4|f>>>1)&255,k[l++]=(f<<7|g<<2|h>>>3)&255);return k},o=function(a){var b,c,d,e,f,g="",h=a.length;for(var j=0,k=parseInt(h/5)*5;j<k;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=a.charCodeAt(j++),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[(e<<3|f>>>5)&31]+i[f&31];f=h-k;f===1?(b=a.charCodeAt(j),g+=i[b>>>3]+i[b<<2&31]+"======"):f===2?(b=a.charCodeAt(j++),c=a.charCodeAt(j),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[c<<4&31]+"===="):f===3?(b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[d<<1&31]+"==="):f===4&&(b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j),g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[e<<3&31]+"=");return g},p=function(a){var b,c,d,e,f,g=!1,h="",j=0,l,m=0,n=a.length;do{k[0]=k[5];k[1]=k[6];k[2]=k[7];for(l=m;j<n&&l<5;++j)f=a.charCodeAt(j),f<128?k[l++]=f:f<2048?(k[l++]=192|f>>6,k[l++]=128|f&63):f<55296||f>=57344?(k[l++]=224|f>>12,k[l++]=128|f>>6&63,k[l++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++j)&1023),k[l++]=240|f>>18,k[l++]=128|f>>12&63,k[l++]=128|f>>6&63,k[l++]=128|f&63);m=l-5;j===n&&++j;j>n&&l<6&&(g=!0);f=k[0];l>4?(b=k[1],c=k[2],d=k[3],e=k[4],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[(b<<4|c>>>4)&31]+i[(c<<1|d>>>7)&31]+i[d>>>2&31]+i[(d<<3|e>>>5)&31]+i[e&31]):l===1?h+=i[f>>>3]+i[f<<2&31]+"======":l===2?(b=k[1],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[b<<4&31]+"===="):l===3?(b=k[1],c=k[2],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[(b<<4|c>>>4)&31]+i[c<<1&31]+"==="):(b=k[1],c=k[2],d=k[3],h+=i[f>>>3]+i[(f<<2|b>>>6)&31]+i[b>>>1&31]+i[(b<<4|c>>>4)&31]+i[(c<<1|d>>>7)&31]+i[d>>>2&31]+i[d<<3&31]+"=")}while(!g);return h},q=function(a){var b,c,d,e,f,g="",h=a.length;for(var j=0,k=parseInt(h/5)*5;j<k;)b=a[j++],c=a[j++],d=a[j++],e=a[j++],f=a[j++],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[(e<<3|f>>>5)&31]+i[f&31];f=h-k;f===1?(b=a[j],g+=i[b>>>3]+i[b<<2&31]+"======"):f===2?(b=a[j++],c=a[j],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[c<<4&31]+"===="):f===3?(b=a[j++],c=a[j++],d=a[j],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[d<<1&31]+"==="):f===4&&(b=a[j++],c=a[j++],d=a[j++],e=a[j],g+=i[b>>>3]+i[(b<<2|c>>>6)&31]+i[c>>>1&31]+i[(c<<4|d>>>4)&31]+i[(d<<1|e>>>7)&31]+i[e>>>2&31]+i[e<<3&31]+"=");return g},r=function(a,b){var c=typeof a!=="string";c&&a.constructor===ArrayBuffer&&(a=new Uint8Array(a));if(c)return q(a);else if(b)return o(a);else return p(a)},s=function(a,b){if(!b)return m(n(a));if(!/^[A-Z2-7=]+$/.test(a))throw new Error("Invalid base32 characters");var c,d,e,f,g,h,i,k;b="";var l=a.indexOf("=");l===-1&&(l=a.length);for(var o=0,p=l>>3<<3;o<p;)c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],g=j[a.charAt(o++)],h=j[a.charAt(o++)],i=j[a.charAt(o++)],k=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)+String.fromCharCode((f<<4|g>>>1)&255)+String.fromCharCode((g<<7|h<<2|i>>>3)&255)+String.fromCharCode((i<<5|k)&255);k=l-p;k===2?(c=j[a.charAt(o++)],d=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)):k===4?(c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)):k===5?(c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],g=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)+String.fromCharCode((f<<4|g>>>1)&255)):k===7&&(c=j[a.charAt(o++)],d=j[a.charAt(o++)],e=j[a.charAt(o++)],f=j[a.charAt(o++)],g=j[a.charAt(o++)],h=j[a.charAt(o++)],i=j[a.charAt(o++)],b+=String.fromCharCode((c<<3|d>>>2)&255)+String.fromCharCode((d<<6|e<<1|f>>>4)&255)+String.fromCharCode((f<<4|g>>>1)&255)+String.fromCharCode((g<<7|h<<2|i>>>3)&255));return b},b={encode:r,decode:s};s.asBytes=n;d?g.exports=b:(c.base32=b,e&&h(function(){return b}))})()}var j=!1;function k(){j||(j=!0,i());return g.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("hi-base32",["hi-base32-0.5.0"],(function(a,b,c,d,e,f){e.exports=b("hi-base32-0.5.0")()}),null);
__d("LSAuthorityLevel.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,20];b=[0,40];c=[0,60];d=[0,75];e=[0,80];var g=[0,100];f.optimistic=a;f.clientPartial=b;f.serverPartial=c;f.authoritativePendingReplacement=d;f.authoritative=e;f.clientAuthoritativeDelete=g}),null);
__d("LSSecureMailboxLogToMSMLog.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Promise").resolve([!0])}f.call=a}),null);
__d("LSVec.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.slice();a.tag="ls-array";return a}f.make=a}),null);
__d("LSCoreInvertibleBloomFilterEncoderCreateEncodedArray.bs",["bs_curry","LSVec.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return window.Promise.resolve([b("LSVec.bs").make(b("bs_curry")._1(d.serializeToArray,0))])}f.call=a}),null);
__d("LSCoreInvertibleBloomFilterEncoderInsert.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){b("bs_curry")._2(d.addObject,e,f);return window.Promise.resolve([])}f.call=a}),null);
__d("LSNativeTypeOperations",["Promise","LSCoreInvertibleBloomFilterEncoderCreateEncodedArray.bs","LSCoreInvertibleBloomFilterEncoderInsert.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";e.exports={Array:{getObjectAt:function(a,c,d,e){return b("Promise").resolve([d[b("bs_caml_int64").to_int32(e)],d])},removeObjectAt:function(a,c,d,e){return b("Promise").resolve([d.splice(b("bs_caml_int64").to_int32(e),1)])}},InvertibleBloomFilterEncoder:{createEncodedArray:b("LSCoreInvertibleBloomFilterEncoderCreateEncodedArray.bs").call,insert:b("LSCoreInvertibleBloomFilterEncoderInsert.bs").call}}}),null);
__d("LS.bs",["LS","LSNativeOperations","LSStoredProcedures","MPWLSDBCreateSchema.bs","LSNativeTypeOperations"],(function(a,b,c,d,e,f){"use strict";var g=b("LSStoredProcedures"),h=b("LSNativeTypeOperations"),i=b("LSNativeOperations");function a(a){return b("LS")(1,b("MPWLSDBCreateSchema.bs").metadata,i,h,g,a)}f.make=a}),null);
__d("LsSystemFolder.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[-1,4294967295];c=[-1,4294967294];d=[-1,4294967293];e=[-1,4294967292];var g=[-1,4294967291],h=[-1,4294967290],i=[-1,4294967289],j=[-1,4294967288],k=[-1,4294967287],l=[-1,4294967286],m=[-1,4294967285],n=[-1,4294967284];f.inbox=a;f.pending=b;f.other=c;f.spam=d;f.hidden=e;f.legacy=g;f.disabled=h;f.blocked=i;f.background=j;f.done_=k;f.archived=l;f.business=m;f.mplace=n}),null);
__d("ReadThroughBatchedTransaction",["invariant","BPlusTree","LSStorage","bs_caml_int64","err","nativePromiseRegeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LSStorage").createSubscriptionManager,i=b("LSStorage").areKeysEqual,j=new WeakMap();function k(a,c,d,e){d=b("err")("Unique Constraint Error encountered "+a+" to "+c);return d}function l(a){var b=JSON.stringify(a);return b==null?a:JSON.parse(b)}function m(a){j.has(a)||j.set(a,JSON.stringify([].concat(a).sort()));return j.get(a)}var n=Promise.resolve(),o=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,"Transaction has finished")||this}return a}(babelHelpers.wrapNativeSuper(Error));e.exports=function(a,c,d,e){var f=b("nativePromiseRegeneratorRuntime").mark(A),j=[],p=a.getMetadata(),q=h(c,p),r=b("LSStorage").searchKey.bind(null,p),s=Object.keys(p.tableNames).reduce(function(a,b){var c=p.tableNames[b];a[b]=Object.keys(c.indexes).map(function(a){return c.indexes[a]}).filter(function(a){a=a.keyIds;return m(a)!==m(c.primaryKeyIds)});return a},{}),t=function(a){},u=new Promise(function(a,b){t=function(a){v=!0,b(a)}}),v=!1,w=new Map();function x(d){var e=w.get(d);if(e===void 0){var f=b("BPlusTree")(c),h=Object.keys(p.tableNames[d].indexes).reduce(function(a,d){a[d]=b("BPlusTree")(c);return a},{}),i;e={entities:f,get:function(a){return f.get(a)},has:function(a){return f.has(a)},indexes:h,nextAutoIncrementId:function(){return b("nativePromiseRegeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:p.tableNames[d].autoIncrement||g(0,19734);i===void 0?i=a.table(d).peekNextAutoIncrementId():i=i.then(function(a){a=b("bs_caml_int64").add(b("bs_caml_int64").one,a);return a});return c.abrupt("return",i);case 3:case"end":return c.stop()}},null,this)},set:function(a,b,c){if(c!=null){var e=Object.keys(h);for(var g=0;g<e.length;g++){var i=e[g],j=r(d,c,i);j!=null&&h[i].set(j,void 0)}}f.set(a,b);if(b.value!=null){i=Object.keys(h);for(var j=0;j<i.length;j++){e=i[j];g=r(d,b.value,e);g!=null&&h[e].set(g,b)}}return b}};w.set(d,e)}return e}function y(d,e,f){var g,h,i,j,k,l,n,o,q,s,t;return b("nativePromiseRegeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:g=p.tableNames[d].indexes,h=new Set(),i=x(d),j=Object.keys(g),k=0;case 5:if(!(k<j.length)){u.next=38;break}l=j[k];n=g[l];if(n.unique){u.next=10;break}return u.abrupt("continue",35);case 10:o=m(n.keyIds);if(!h.has(o)){u.next=13;break}return u.abrupt("continue",35);case 13:h.add(o);q=r(d,f,l);if(!(q==null)){u.next=17;break}return u.abrupt("continue",35);case 17:if(!i.indexes[l].has(q)){u.next=30;break}s=i.indexes[l].get(q);u.t0=s!=null&&s.state==="addedOrUnmodified";if(!u.t0){u.next=25;break}u.next=23;return b("nativePromiseRegeneratorRuntime").awrap(z(d,s));case 23:u.t1=u.sent.state,u.t0=u.t1==="unmodified";case 25:if(!u.t0){u.next=27;break}s=i.indexes[l].get(q);case 27:if(!(s==null||s.value==null||c(r(d,s.value),e)===0)){u.next=29;break}return u.abrupt("continue",35);case 29:return u.abrupt("return",!1);case 30:u.next=32;return b("nativePromiseRegeneratorRuntime").awrap(a.table(d).index(l).getKey(q));case 32:t=u.sent;if(!(t!=null&&c(t,e)!==0)){u.next=35;break}return u.abrupt("return",!1);case 35:k++;u.next=5;break;case 38:return u.abrupt("return",!0);case 39:case"end":return u.stop()}},null,this)}function z(c,d){var e,f,h;return b("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(d.state==="addedOrUnmodified")){i.next=8;break}d.value!=null||g(0,8630);e=b("nullthrows")(r(c,d.value));i.next=5;return b("nativePromiseRegeneratorRuntime").awrap(a.table(c).get(e));case 5:f=i.sent;h=x(c);return i.abrupt("return",f!=null?h.set(e,{state:"unmodified",value:f},d.value):h.set(e,{state:"added",value:d.value}));case 8:return i.abrupt("return",d);case 9:case"end":return i.stop()}},null,this)}function A(a,d,e,g){var h,i,j,k,l,m,n,o,p,q,s,t,u,v,w;return b("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:h=b("nullthrows")({asc:1,desc:-1}[g]);f.next=3;return b("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:i=f.sent,j=d.next(),k=void 0;case 6:if(!i.done){f.next=18;break}case 8:if(j.done){f.next=17;break}l=j.value,m=l[0],n=l[1];if(!(n!=null&&n.value!=null)){f.next=14;break}f.next=13;return[m,n.value];case 13:k=f.sent;case 14:j=d.next(k);f.next=8;break;case 17:return f.abrupt("return");case 18:if(!j.done){f.next=29;break}case 19:if(i.done){f.next=28;break}f.next=22;return i.value;case 22:k=f.sent;f.next=25;return b("nativePromiseRegeneratorRuntime").awrap(a.next(k));case 25:i=f.sent;f.next=19;break;case 28:return f.abrupt("return");case 29:o=j.value,p=o[0],q=o[1];s=i,t=s.value,u=t[0],v=t[1];w=c(u,p)*h;if(!(w<0)){f.next=42;break}f.next=35;return[u,v];case 35:k=f.sent;f.next=38;return b("nativePromiseRegeneratorRuntime").awrap(a.next(k));case 38:i=f.sent;k!==void 0&&c(k,p)*h>0&&(j=d.next(k));f.next=75;break;case 42:if(!(w===0)){f.next=61;break}if(!(q!=null)){f.next=55;break}if(!(q.state==="addedOrUnmodified")){f.next=51;break}x(e).set(b("nullthrows")(r(e,v)),{state:"unmodified",value:v});f.next=48;return[u,v];case 48:k=f.sent;f.next=55;break;case 51:if(!(q.value!=null)){f.next=55;break}f.next=54;return[p,q.value];case 54:k=f.sent;case 55:f.next=57;return b("nativePromiseRegeneratorRuntime").awrap(a.next(k));case 57:i=f.sent;j=d.next(k);f.next=75;break;case 61:if(!(q!=null)){f.next=70;break}q.state==="addedOrUnmodified"&&x(e).set(b("nullthrows")(r(e,b("nullthrows")(q.value))),{state:"added",value:q.value});if(!(q.value!=null)){f.next=69;break}f.next=66;return[p,q.value];case 66:k=f.sent;f.next=70;break;case 69:k=void 0;case 70:j=d.next(k);if(!(k!==void 0&&c(k,u)*h>0)){f.next=75;break}f.next=74;return b("nativePromiseRegeneratorRuntime").awrap(a.next(k));case 74:i=f.sent;case 75:f.next=6;break;case 77:case"end":return f.stop()}},f,this)}var B={table:function(d){function e(a){var b=p.tableNames[d];return(b.primaryKeyIds.length===1?[a]:a).reduce(function(a,c,d){a[b.primaryKeyIds[d]]=c;return a},{})}function f(a,b){j.push([d,a,b]),q.notifyTableAndIndexSubscribers(d,a,b,new WeakMap())}function h(a,c){var e,f,g,h,i,j,k,l,m;return b("nativePromiseRegeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:(e=p.tableNames[d],f=e.cascadeUpdates,g=e.primaryKeyIds),h=function(){var e,f,d,h,m,n,o,q,s,t,u,v,w,x,y;return b("nativePromiseRegeneratorRuntime").async(function(z){while(1)switch(z.prev=z.next){case 0:if(!j){z.next=6;break}if(!(k>=i.length)){z.next=3;break}return z.abrupt("return","break");case 3:l=i[k++];z.next=10;break;case 6:k=i.next();if(!k.done){z.next=9;break}return z.abrupt("return","break");case 9:l=k.value;case 10:e=l;f=e.indexName;d=e.tableName;h=p.tableNames[d],m=h.indexes,n=h.primaryKeyIds;o=f==null?n:m[f].keyIds;q={gte:g.length===1&&o.length>1?[a]:a,lte:o.length>g.length?g.length===1?[a,[[]]]:[].concat(a,[[[]]]):a};s=(f==null?B.table(d):B.table(d).index(f)).entries(new WeakMap(),"asc",q);z.next=19;return b("nativePromiseRegeneratorRuntime").awrap(s.next());case 19:t=z.sent,u=[];case 21:if(t.done){z.next=28;break}u.push(t.value);z.next=25;return b("nativePromiseRegeneratorRuntime").awrap(s.next());case 25:t=z.sent;z.next=21;break;case 28:v=0;case 29:if(!(v<u.length)){z.next=44;break}w=u[v];w[0];x=w[1];y=b("nullthrows")(r(d,x));if(!(c===void 0)){z.next=39;break}z.next=37;return b("nativePromiseRegeneratorRuntime").awrap(B.table(d)["delete"](y));case 37:z.next=41;break;case 39:z.next=41;return b("nativePromiseRegeneratorRuntime").awrap(B.table(d).upsert(y,g.reduce(function(a,b,d){a[o[d]]=g.length===1?c:c[d];return a},babelHelpers["extends"]({},x))));case 41:v++;z.next=29;break;case 44:case"end":return z.stop()}},null,this)},(i=f,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 3:n.next=5;return b("nativePromiseRegeneratorRuntime").awrap(h());case 5:m=n.sent;if(!(m==="break")){n.next=8;break}return n.abrupt("break",10);case 8:n.next=3;break;case 10:case"end":return n.stop()}},null,this)}return{add:function(a){var c,e,g,h,i,j,m,n;return b("nativePromiseRegeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:if(!v){q.next=2;break}throw new o();case 2:c=p.tableNames[d],e=c.autoIncrement,g=c.primaryKeyIds;h=l(a);i=x(d);if(!e){q.next=9;break}q.next=8;return b("nativePromiseRegeneratorRuntime").awrap(i.nextAutoIncrementId());case 8:h[g[0]]=q.sent;case 9:j=b("nullthrows")(r(d,h));q.next=12;return b("nativePromiseRegeneratorRuntime").awrap(y(d,j,a));case 12:if(q.sent){q.next=14;break}t(k("while adding",d,j,a));case 14:m={state:"addedOrUnmodified",value:h};if(!i.has(j)){q.next=20;break}n=i.get(j);if(!(n.value!=null)){q.next=19;break}return q.abrupt("return");case 19:m.state="upserted";case 20:f(void 0,m.value),i.set(j,m);case 22:case"end":return q.stop()}},null,this)},"delete":function(a){var c,g;return b("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!v){i.next=2;break}throw new o();case 2:c=x(d);if(!s[d].length){i.next=9;break}i.next=6;return b("nativePromiseRegeneratorRuntime").awrap(B.table(d).get(a));case 6:i.t0=i.sent;i.next=10;break;case 9:i.t0=e(a);case 10:g=i.t0;i.next=13;return b("nativePromiseRegeneratorRuntime").awrap(h(a));case 13:f(g,void 0),c.set(a,{state:"deleted",value:void 0},g);case 15:case"end":return i.stop()}},null,this)},entries:function(b,c,e){c===void 0&&(c="asc");e===void 0&&(e={});if(v)throw new o();return A(a.table(d).entries(b,c,e),x(d).entities.entries(babelHelpers["extends"]({},e,{dir:c})),d,"asc")},get:function(c){var e,f;return b("nativePromiseRegeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:if(!v){g.next=2;break}throw new o();case 2:e=x(d);if(e.has(c)){g.next=9;break}g.next=6;return b("nativePromiseRegeneratorRuntime").awrap(a.table(d).get(c));case 6:f=g.sent;e.set(c,{state:"unmodified",value:f});return g.abrupt("return",f);case 9:g.next=11;return b("nativePromiseRegeneratorRuntime").awrap(z(d,e.get(c)));case 11:return g.abrupt("return",g.sent.value);case 12:case"end":return g.stop()}},null,this)},index:function(e){return{entries:function(b,c,f){c===void 0&&(c="asc");f===void 0&&(f={});if(v)throw new o();return A(a.table(d).index(e).entries(b,c,f),x(d).indexes[e].entries(babelHelpers["extends"]({},f,{dir:c})),d,c)},get:function(f){var h,i,j,k,l,m;return b("nativePromiseRegeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:if(!v){n.next=2;break}throw new o();case 2:h=x(d);i=h.indexes[e];i!=null||g(0,19687);j=p.tableNames[d].indexes[e].unique;if(!j){n.next=24;break}if(i.has(f)){n.next=15;break}n.next=10;return b("nativePromiseRegeneratorRuntime").awrap(a.table(d).index(e).get(f));case 10:k=n.sent;if(!(k==null)){n.next=14;break}i.set(f,void 0);return n.abrupt("return",void 0);case 14:h.set(b("nullthrows")(r(d,k)),{state:"unmodified",value:k});case 15:l=i.get(f);if(!(l==null)){n.next=18;break}return n.abrupt("return",void 0);case 18:n.next=20;return b("nativePromiseRegeneratorRuntime").awrap(z(d,l));case 20:m=n.sent.value;if(!(m==null||c(r(d,m,e),f)!==0)){n.next=23;break}return n.abrupt("return",void 0);case 23:return n.abrupt("return",m);case 24:g(0,19850);case 25:case"end":return n.stop()}},null,this)},getKey:function(a){var c;return b("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(!v){f.next=2;break}throw new o();case 2:f.next=4;return b("nativePromiseRegeneratorRuntime").awrap(B.table(d).index(e).get(a));case 4:c=f.sent;return f.abrupt("return",c==null?void 0:r(d,c));case 6:case"end":return f.stop()}},null,this)},subscribe:function(a){return q.subscribeIndex(d,e,a)}}},peekNextAutoIncrementId:function(){return b("nativePromiseRegeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",x(d).nextAutoIncrementId());case 1:case"end":return a.stop()}},null,this)},put:function(a){var c,g,i;return b("nativePromiseRegeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:if(!v){j.next=2;break}throw new o();case 2:c=x(d);g=b("nullthrows")(r(d,a));if(!s[d].length){j.next=10;break}j.next=7;return b("nativePromiseRegeneratorRuntime").awrap(B.table(d).get(g));case 7:j.t0=j.sent;j.next=11;break;case 10:j.t0=e(g);case 11:i=j.t0;j.next=14;return b("nativePromiseRegeneratorRuntime").awrap(h(g));case 14:c.set(g,{state:"deleted",value:void 0},i);j.next=17;return b("nativePromiseRegeneratorRuntime").awrap(y(d,g,a));case 17:if(j.sent){j.next=19;break}t(k("while performing replace",d,g,a));case 19:f(i,a),c.set(g,{state:"upserted",value:a},i);case 21:case"end":return j.stop()}},null,this)},subscribe:function(a){return q.subscribeTable(d,a)},upsert:function(a,c){var g,j,l;return b("nativePromiseRegeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(!v){m.next=2;break}throw new o();case 2:g=x(d);j=b("nullthrows")(r(d,c));if(!s[d].length){m.next=10;break}m.next=7;return b("nativePromiseRegeneratorRuntime").awrap(B.table(d).get(a));case 7:m.t0=m.sent;m.next=11;break;case 10:m.t0=e(a);case 11:l=m.t0;if(i(a,j)){m.next=16;break}m.next=15;return b("nativePromiseRegeneratorRuntime").awrap(h(a,j));case 15:g.set(a,{state:"deleted",value:void 0},l);case 16:m.next=18;return b("nativePromiseRegeneratorRuntime").awrap(y(d,j,c));case 18:if(m.sent){m.next=20;break}t(k("while performing upsert",d,a,c));case 20:f(l,c),g.set(j,{state:"upserted",value:c},l);case 22:case"end":return m.stop()}},null,this)}}}};return new Promise(function(c,e){n=n.then(function(){var f;return b("nativePromiseRegeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.prev=0;g.next=3;return b("nativePromiseRegeneratorRuntime").awrap(Promise.race([d(B),u]));case 3:f=g.sent;g.next=6;return b("nativePromiseRegeneratorRuntime").awrap(a.flushWrites(j));case 6:c(f);g.next=12;break;case 9:g.prev=9,g.t0=g["catch"](0),e(g.t0);case 12:g.prev=12;v=!0;q.dispose();return g.finish(12);case 16:case"end":return g.stop()}},null,this,[[0,9,12,16]])})})};e.exports.TransactionClosedError=o}),null);
__d("ReadThroughBatchedTransaction.bs",["IndexedDbKeyComparer","ReadThroughBatchedTransaction"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReadThroughBatchedTransaction")(a,b("IndexedDbKeyComparer"),c,function(){switch(d){case-240492574:return"readonly";case 557889961:return"readwrite"}}())}f.runInTransaction=a}),null);
__d("MWLSMarkSeen.bs",["LS.bs","React","promiseDone","SkytaleDBHook.bs","LsSystemFolder.bs","ReadThroughBatchedTransaction.bs","LSMailboxMarkFolderSeenStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);return g.useCallback(function(a){b("promiseDone")(b("ReadThroughBatchedTransaction.bs").runInTransaction(c,function(a){return b("LSMailboxMarkFolderSeenStoredProcedure")(b("LS.bs").make(a),b("LsSystemFolder.bs").inbox)},557889961),void 0,void 0);return 0},[c])}f.useHook=a}),null);
__d("MWLSSnippetRenderer.bs",["bs_int64","React","MWThread.bs","SkytaleDB","bs_caml_format","bs_caml_option","SkytaleDBHook.bs","SkytaleDBQuery.bs","CometEmojiTransform","CometEmoticonTransform","CometTextWithEntities.react","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=[b("CometEmoticonTransform")(),b("CometEmojiTransform")()],i="(Y)",j=/\uDB80\uDC00/;function a(a){a=b("MWThread.bs").useIdExn(0);var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWThread.bs").toThreadKey(a);var d=b("bs_int64").to_string(a);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,[b("bs_caml_format").caml_int64_of_string(d),0]),function(a){return a.m})},[c,d]));if(a!==void 0){a=b("bs_caml_option").valFromOption(a);if(a!==void 0){a=a.replace(j,i);return g.jsx(b("CometTextWithEntities.react"),{text:a,transforms:h})}else return null}else return null}f.transforms=h;f.likeEmoji=i;f.likeEmojiFromServer=j;f.useHook=a}),null);
__d("LSRequestType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];c=[0,3];d=[0,4];f.initSync=a;f.resumeSync=b;f.taskBatch=c;f.fireForget=d}),null);
__d("XLightSpeedWebRequestController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/lightspeedweb/request/",{device_id:{type:"String",required:!0},request_id:{type:"Int",required:!0},request_type:{type:"Int"},request_payload:{type:"String"}})}),null);
__d("LSWebReq.bs",["Promise","LS.bs","bs_curry","bs_js_exn","LSVersion","bs_caml_int64","ServerAppID","promiseDone","FBMqttChannel","LSRequestType.bs","MqttWebDeviceID","cometAsyncFetch","bs_caml_js_exceptions","recoverableViolation","ReadThroughBatchedTransaction.bs","XLightSpeedWebRequestController","LSCoreHandleTaskSendSuccessForQueueStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h={contents:0},i=new Map();function j(a,c){c=c.queueName;if(c!==void 0){var d=c;if(d!=="")return b("ReadThroughBatchedTransaction.bs").runInTransaction(a,function(a){return b("LSCoreHandleTaskSendSuccessForQueueStoredProcedure")(b("LS.bs").make(a),d)},557889961);else return b("Promise").resolve(0)}else return b("Promise").resolve(0)}function a(a,c,d,e,f){a=a!==void 0?a:function(a){return 0};d=d!==void 0?d:!1;var g=h.contents;h.contents=g+1|0;var j=b("bs_caml_int64").to_int32(e);j={request_id:g,type:j,payload:f,app_id:b("ServerAppID").app_id};f=JSON.stringify(j);if(f!==void 0){j=b("FBMqttChannel").publish("/ls_req",f,{qos:b("bs_caml_int64").eq(e,b("LSRequestType.bs").fireForget)||d?0:1,skipBuffer:!1});b("promiseDone")(j,void 0,a)}else b("recoverableViolation")("Failed to json encode payload","messenger_comet");if(b("bs_caml_int64").eq(e,b("LSRequestType.bs").taskBatch)){i.set(g,{timestamp:Date.now(),queueName:c});return 0}else return 0}function c(a,c,d,e){a=a!==void 0?a:function(a){return 0};var f=h.contents;h.contents=f+1|0;b("promiseDone")(b("cometAsyncFetch")(b("XLightSpeedWebRequestController").getURIBuilder().setString("device_id",b("MqttWebDeviceID").clientID).setInt("request_id",f).setInt("request_type",b("bs_caml_int64").to_int32(d)).setString("request_payload",e).getURI().toString(),{method:"POST"}),function(a){try{g.forEach(function(c,d,e){var g=c[1];d=i.get(f);if(d==null)return b("bs_curry")._1(g,a);else{i["delete"](f);e=j(c[0],d);b("promiseDone")(e,function(c){return b("bs_curry")._1(g,a)},function(a){b("recoverableViolation")("Managed to parse task response but failed to execute it","messenger_privacy_web");return 0});return 0}});return 0}catch(a){var c=b("bs_caml_js_exceptions").internalToOCamlException(a);if(c[0]===b("bs_js_exn").$$Error){b("recoverableViolation")("Failed to parse Task Response","messenger_privacy_web");return 0}else throw c}},a);if(b("bs_caml_int64").eq(d,b("LSRequestType.bs").taskBatch)){i.set(f,{timestamp:Date.now(),queueName:c});return 0}else return 0}function d(a,c){var d={};g.set(d,[a,c]);var e={contents:void 0};b("FBMqttChannel").publish("/ls_app_settings",JSON.stringify({ls_sv:b("LSVersion"),ls_fdid:""})).then(function(d){e.contents=b("FBMqttChannel").subscribe("/ls_resp",function(d){try{d=JSON.parse(d);var e=d.request_id;if(e!==void 0){e=e;var f=d.payload;d=i.get(e);if(d==null)return b("bs_curry")._1(c,f);else{i["delete"](e);e=j(a,d);b("promiseDone")(e,function(a){return b("bs_curry")._1(c,f)},function(a){b("recoverableViolation")("Managed to parse task response but failed to execute it","messenger_privacy_web");return 0});return 0}}else return 0}catch(a){d=b("bs_caml_js_exceptions").internalToOCamlException(a);if(d[0]===b("bs_js_exn").$$Error){b("recoverableViolation")("Failed to parse Task Response","messenger_privacy_web");return 0}else throw d}});return b("Promise").resolve(0)});return function(a){a=e.contents;a!==void 0&&b("bs_curry")._1(a,0);g["delete"](d);return 0}}f.currentReqId=h;f.inflightRequests=i;f.handleResponseSuccess=j;f.publishMqtt=a;f.publishHttp=c;f.subscribe=d}),null);
__d("LSTaskWorkItemType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];c=[0,3];d=[0,4];e=[0,5];f.workItemTypeSendToServer=a;f.workItemTypeHandleNative=b;f.workItemTypeDelayHandling=c;f.workItemTypeNone=d;f.workItemTypeSendToServerFireAndForget=e}),null);
__d("MWLSSyncRequests.bs",["Promise","LS.bs","bs_curry","bs_int64","LSDict","LSJson","LSWebReq.bs","LSVersion","bs_caml_int64","setTimeout","bs_caml_format","bs_caml_option","promiseDone","LSTaskWorkItemType.bs","recoverableViolation","ReadThroughBatchedTransaction.bs","LSCoreBeginHandlingSyncStoredProcedure","LSCoreBeginHandlingSyncForSyncGroupStoredProcedure"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){var d=a;c=c;c=b("LSDict").shapeToRecord(c);var e=c.network_payload,f=c.work_item_type,g=c.next_sync_ms,h;if(c.skip_realtime_gateway)h=b("LSWebReq.bs").publishHttp;else{var i=b("bs_caml_int64").eq(f,b("LSTaskWorkItemType.bs").workItemTypeSendToServerFireAndForget);h=function(a,c){return function(d,e){return b("LSWebReq.bs").publishMqtt(a,c,i,d,e)}}}if(b("bs_caml_int64").eq(f,b("LSTaskWorkItemType.bs").workItemTypeNone))return 0;else if(b("bs_caml_int64").eq(f,b("LSTaskWorkItemType.bs").workItemTypeHandleNative)){b("recoverableViolation")("Native handling for sync group not implemented yet","messenger_web_product");return 0}else if(b("bs_caml_int64").eq(f,b("LSTaskWorkItemType.bs").workItemTypeSendToServer)||b("bs_caml_int64").eq(f,b("LSTaskWorkItemType.bs").workItemTypeSendToServerFireAndForget))if(e!==void 0){e=b("LSDict").shapeToRecord(b("bs_caml_option").valFromOption(e));var j=b("LSDict").shapeToRecord(e.request_payload);return b("bs_curry")._4(h,void 0,void 0,e.type,b("LSJson").stringify(b("LSDict").fromObject({database:j.database,version:b("bs_caml_format").caml_int64_of_string(b("LSVersion")),epoch_id:j.epoch_id,last_applied_cursor:j.last_applied_cursor,failure_count:j.failure_count,sync_params:j.sync_params})))}else{b("recoverableViolation")("Expected networkpayload for sync request but didn't get any","messenger_web_product");return 0}else if(b("bs_caml_int64").eq(f,b("LSTaskWorkItemType.bs").workItemTypeDelayHandling))if(g!==void 0){var k=d,l=c.sync_group_id;h=g;b("setTimeout")(function(a){a=b("ReadThroughBatchedTransaction.bs").runInTransaction(k,function(a){return b("LSCoreBeginHandlingSyncForSyncGroupStoredProcedure")(b("LS.bs").make(a),l,!1)},557889961);b("promiseDone")(a,void 0,void 0);return 0},b("bs_caml_int64").to_float(h));return 0}else{b("recoverableViolation")("Expected delay for delayed sync request but didn't get any","messenger_web_product");return 0}else{b("recoverableViolation")("Unknown sync work item type "+b("bs_int64").to_string(f),"messenger_web_product");return 0}},d=b("ReadThroughBatchedTransaction.bs").runInTransaction(a,function(a){return b("LSCoreBeginHandlingSyncStoredProcedure")(b("LS.bs").make(a),!1).then(function(a){a[0].forEach(c);return b("Promise").resolve(0)})},557889961);b("promiseDone")(d,void 0,void 0);return 0}f.maybeSend=a}),null);
__d("XLightSpeedWebInitialSyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/lightspeedweb/initialsync/",{device_id:{type:"String",required:!0},version_id:{type:"String"}})}),null);
__d("MWLSInitialSync.bs",["Promise","LSVersion","SkytaleDB","bs_caml_int64","SkytaleDBQuery.bs","bs_caml_exceptions","MqttWebDeviceID","cometAsyncFetch","MWLSSyncRequests.bs","ReadThroughBatchedTransaction.bs","XLightSpeedWebInitialSyncController"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("XLightSpeedWebInitialSyncController").getURIBuilder()}var g=b("MqttWebDeviceID").clientID;d=b("bs_caml_exceptions").create("MWLSInitialSync.FailedRead");function c(a,c){return b("cometAsyncFetch")(b("XLightSpeedWebInitialSyncController").getURIBuilder().setString("device_id",g).setString("version_id",b("LSVersion")).getURI().toString(),{method:"POST"}).then(function(d){return b("ReadThroughBatchedTransaction.bs").runInTransaction(a,function(a){var c=a,d=[10];return b("SkytaleDBQuery.bs").toArray(b("SkytaleDB").table(c,"network_requests").asc).then(function(a){return b("Promise").all(a.map(function(a){a.c=d.indexOf(b("bs_caml_int64").to_int32(a.b))===-1?[-1,4294967295]:void 0;return b("SkytaleDB").table(c,"network_requests").put(a)}))})},557889961).then(function(a){return d.reduce(function(a,b){return a.then(function(a){return c(b)})},b("Promise").resolve(void 0))}).then(function(c){b("MWLSSyncRequests.bs").maybeSend(a);return function(a){return 0}})})}f.getURIBuilder=a;f.deviceId=g;f.FailedRead=d;f.executeSyncScripts=c}),null);
__d("MWLSTasksHandler.bs",["Promise","LS.bs","bs_int64","LSDict","LSJson","LSWebReq.bs","LSVersion","bs_belt_Array","bs_caml_int64","setTimeout","bs_belt_Option","promiseDone","LSRequestType.bs","LSTaskWorkItemType.bs","recoverableViolation","ReadThroughBatchedTransaction.bs","LSCoreBeginHandlingPendingTasksStoredProcedure","LSCoreHandleTaskSendFailureForQueueStoredProcedure","LSCoreBeginHandlingPendingTasksForQueueStoredProcedure"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){var d=c.work_item_type;if(b("bs_caml_int64").eq(d,b("LSTaskWorkItemType.bs").workItemTypeSendToServer)){var e=a,f=c;f=b("bs_belt_Option").map(f.network_payload,function(a){return b("LSDict").shapeToRecord(a)});if(f!==void 0){f=f;var g=f.tasks,h=b("bs_belt_Option").map(b("bs_belt_Array").get(g,0),function(a){return b("LSDict").shapeToRecord(a).queue_name});return b("LSWebReq.bs").publishMqtt(function(a){if(h!==void 0){var c=h;a=b("ReadThroughBatchedTransaction.bs").runInTransaction(e,function(a){return b("LSCoreHandleTaskSendFailureForQueueStoredProcedure")(b("LS.bs").make(a),c)},557889961);b("promiseDone")(a,void 0,void 0)}b("recoverableViolation")("Encountered an error while publishing a LS payload via MQTT","messenger_web_product");return 0},h,void 0,b("LSRequestType.bs").taskBatch,b("LSJson").stringify(b("LSDict").fromObject({tasks:g,epoch_id:f.epoch_id,version_id:b("LSVersion")})))}else return 0}else if(b("bs_caml_int64").eq(d,b("LSTaskWorkItemType.bs").workItemTypeHandleNative)){b("recoverableViolation")("Native tasks not supported so far","messenger_web_product");return 0}else if(b("bs_caml_int64").eq(d,b("LSTaskWorkItemType.bs").workItemTypeDelayHandling)){var i=a,j=c;b("setTimeout")(function(a){a=b("ReadThroughBatchedTransaction.bs").runInTransaction(i,function(a){return b("LSCoreBeginHandlingPendingTasksForQueueStoredProcedure")(b("LS.bs").make(a),j.queue_name,!1)},557889961);b("promiseDone")(a,void 0,void 0);return 0},b("bs_caml_int64").to_float(j.next_sync_ms));return 0}else if(b("bs_caml_int64").eq(d,b("LSTaskWorkItemType.bs").workItemTypeNone))return 0;else if(b("bs_caml_int64").eq(d,b("LSTaskWorkItemType.bs").workItemTypeSendToServerFireAndForget)){g=c;f=b("bs_belt_Option").map(g.network_payload,function(a){return b("LSDict").shapeToRecord(a)});if(f!==void 0){f.tasks.map(function(a){return b("LSDict").shapeToRecord(a)}).forEach(function(a){return b("LSWebReq.bs").publishMqtt(void 0,void 0,void 0,b("LSRequestType.bs").fireForget,b("LSJson").stringify(b("LSDict").fromObject({label:a.label,payload:a.payload,version:b("LSVersion")})))});return 0}else return 0}else{b("recoverableViolation")("Unknown Task type of "+b("bs_int64").to_string(d),"messenger_web_product");return 0}};return function(d){return b("ReadThroughBatchedTransaction.bs").runInTransaction(a,function(a){return b("LSCoreBeginHandlingPendingTasksStoredProcedure")(b("LS.bs").make(a),!1).then(function(a){a[0].map(function(a){return b("LSDict").shapeToRecord(a)}).forEach(c);return b("Promise").resolve(0)})},557889961)}}f.make=a}),null);
__d("MqttState.bs",[],(function(a,b,c,d,e,f){"use strict";a="Connected";b="Disconnected";c="Connecting";f.connected=a;f.disconnected=b;f.connecting=c}),null);
__d("MWLSMQTTSync.bs",["Promise","bs_curry","LSWebReq.bs","MqttState.bs","SkytaleDB","promiseDone","FBMqttChannel","SkytaleDBQuery.bs","MWLSSyncRequests.bs","MWLSTasksHandler.bs","ReadThroughBatchedTransaction.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){return b("SkytaleDBQuery.bs").toArray(b("SkytaleDB").table(a,"network_requests").asc).then(function(c){return b("Promise").all(c.map(function(c){c.c=void 0;return b("SkytaleDB").table(a,"network_requests").put(c)}))})}function a(a,c){var d=b("MWLSTasksHandler.bs").make(a),e=b("LSWebReq.bs").subscribe(a,function(e){e=c(e).then(function(c){b("MWLSSyncRequests.bs").maybeSend(a);return b("bs_curry")._1(d,0)});b("promiseDone")(e,void 0,void 0);return 0}),f={onMQTTStateChanged:function(c){if(c===b("MqttState.bs").connected){c=b("ReadThroughBatchedTransaction.bs").runInTransaction(a,g,557889961).then(function(c){b("MWLSSyncRequests.bs").maybeSend(a);return b("bs_curry")._1(d,0)});b("promiseDone")(c,void 0,void 0);return 0}else return 0}};b("FBMqttChannel").subscribeChannelEvents(f);return function(){b("bs_curry")._1(e,0);b("FBMqttChannel").unsubscribeChannelEvents(f);return 0}}f.closeEpochs=g;f.start=a}),null);
__d("MWLSWatchPendingTasksTable.bs",["bs_curry","SkytaleDB","promiseDone","MWLSTasksHandler.bs","SortedAsyncIterable.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("MWLSTasksHandler.bs").make(a),d={contents:!1},e=b("SortedAsyncIterable.bs").subscribe(b("SkytaleDB").table(a,"pending_tasks").asc,function(a,b){d.contents=!0;return 0}),f=b("SortedAsyncIterable.bs").subscribe(b("SkytaleDB").table(a,"pending_fire_and_forget_tasks").asc,function(a,b){d.contents=!0;return 0}),g=a.subscribeToCommit(function(a){if(d.contents){d.contents=!1;a=b("bs_curry")._1(c,0);b("promiseDone")(a,void 0,void 0);return 0}else return 0});a=b("bs_curry")._1(c,0);b("promiseDone")(a,void 0,void 0);return function(){b("bs_curry")._1(g,0);b("bs_curry")._1(e,0);return b("bs_curry")._1(f,0)}}f.start=a}),null);
__d("MWLSDataScriptDirect.bs",["Promise","LS.bs","bs_curry","bs_caml_option","killswitch","recoverableViolation","ReadThroughBatchedTransaction.bs"],(function(a,b,c,d,e,f){"use strict";var g=function(a){return new Function("return "+a)()};function a(a){return function(c){var d=b("killswitch")("MESSENGER_WEB_DISABLE_LS_EVAL")?function(a){return b("Promise").resolve(void 0)}:g(c);return b("ReadThroughBatchedTransaction.bs").runInTransaction(a,function(a){return b("bs_curry")._1(d,b("LS.bs").make(a))},557889961)["catch"](function(a){b("recoverableViolation")("Error executing sync script: "+(a?a.message:""),"messenger_web_product",{error:b("bs_caml_option").some(a)});return b("Promise").resolve(void 0)})}}f.make=a}),null);
__d("LSDbStorage",["invariant","IndexedDbKeyComparer","LSStorage","bs_caml_int64","nativePromiseRegeneratorRuntime","nullthrows","BPlusTreeBase"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LSStorage").areKeysEqual,i=b("LSStorage").createSubscriptionManager,j=function(a){return b("BPlusTreeBase")(b("IndexedDbKeyComparer"),16,a)};function k(a){var b=JSON.stringify(a);return b==null?a:JSON.parse(b)}function l(a){Array.isArray(a)&&a.length===2&&a.every(Number.isInteger)||g(0,21993);return b("bs_caml_int64").to_float(a)}function m(a,b){function c(b){if(b.done)return b.value;b.value instanceof Promise||g(0,22157);return b.value.then(function(b){return c(a.next(b))})}return c(a.next(b))}function n(a){return{next:b("nativePromiseRegeneratorRuntime").mark(function c(d){var e;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:e=a.next(d);case 1:if(!(e.value instanceof window.Promise)){b.next=9;break}b.t0=a;b.next=5;return e.value;case 5:b.t1=b.sent;e=b.t0.next.call(b.t0,b.t1);b.next=1;break;case 9:return b.abrupt("return",e);case 10:case"end":return b.stop()}},c,this)})}}function o(a){var b=n(a);return{next:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return m(b.next(a))})}}e.exports=function(a,c,d){d===void 0&&(d={});var e={},f=i(b("IndexedDbKeyComparer"),c),p=b("LSStorage").searchKey.bind(null,c);function q(b){return(b.has(e)?b:b.set(e,a.createTransaction())).get(e)}function r(a,d,e,f){var h,i,k,l,n,o,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;return b("nativePromiseRegeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:h=q(a);i=h.table(d);k=j(i);l=c.tableNames[d];n=b("nullthrows")(p(d,e));o=Object.keys(l.indexes).reduce(function(b,c){var a=p(d,e,c);a!=null&&(b[c]=a);return b},{});r={};J.next=9;return b("nativePromiseRegeneratorRuntime").awrap(m(k.has(n)));case 9:if(!J.sent){J.next=22;break}J.next=12;return b("nativePromiseRegeneratorRuntime").awrap(m(k.get(n)));case 12:s=J.sent;if(!Object.keys(l.indexes).length){J.next=18;break}J.next=16;return b("nativePromiseRegeneratorRuntime").awrap(m(i.readDataExn(s,f,a)));case 16:t=J.sent,r=Object.keys(l.indexes).reduce(function(b,c){var a=p(d,t,c);a!=null&&(b[c]=a);return b},{});case 18:J.next=20;return b("nativePromiseRegeneratorRuntime").awrap(m(i.writeData(s,e,f,a)));case 20:J.next=28;break;case 22:l.autoIncrement&&g(0,21990);J.next=25;return b("nativePromiseRegeneratorRuntime").awrap(m(i.writeNewData(e,f,a)));case 25:s=J.sent;J.next=28;return b("nativePromiseRegeneratorRuntime").awrap(m(k.set(n,s)));case 28:u=Object.keys(o);for(v=0;v<u.length;v++)w=u[v],r[w]!==void 0&&b("IndexedDbKeyComparer")(r[w],o[w])===0&&(delete o[w],delete r[w]);x=Object.keys(o);y=0;case 32:if(!(y<x.length)){J.next=43;break}z=x[y];A=j(i.index(z));J.next=37;return b("nativePromiseRegeneratorRuntime").awrap(m(A.has(o[z])));case 37:J.t0=!J.sent;if(J.t0){J.next=40;break}g(0,21996,d,z);case 40:y++;J.next=32;break;case 43:B=Object.keys(o),C=0;case 45:if(!(C<B.length)){J.next=53;break}D=B[C];E=j(i.index(D));J.next=50;return b("nativePromiseRegeneratorRuntime").awrap(m(E.set(o[D],s)));case 50:C++;J.next=45;break;case 53:F=Object.keys(r),G=0;case 55:if(!(G<F.length)){J.next=63;break}H=F[G];I=j(i.index(H));J.next=60;return b("nativePromiseRegeneratorRuntime").awrap(m(I["delete"](r[H])));case 60:G++;J.next=55;break;case 63:case"end":return J.stop()}},null,this)}function s(a,d,e,f){var g,h,i,k,l,n,o,r,s,t,u;return b("nativePromiseRegeneratorRuntime").async(function(v){while(1)switch(v.prev=v.next){case 0:g=q(a);h=g.table(d);i=j(h);k=c.tableNames[d];v.next=6;return b("nativePromiseRegeneratorRuntime").awrap(m(i.has(e)));case 6:if(!v.sent){v.next=30;break}v.next=9;return b("nativePromiseRegeneratorRuntime").awrap(m(i.get(e)));case 9:l=v.sent;if(!Object.keys(k.indexes).length){v.next=26;break}v.next=13;return b("nativePromiseRegeneratorRuntime").awrap(m(h.readDataExn(l,f,a)));case 13:n=v.sent,o=Object.keys(k.indexes),r=0;case 16:if(!(r<o.length)){v.next=26;break}s=o[r];t=p(d,n,s);if(!(t!=null)){v.next=23;break}u=j(h.index(s));v.next=23;return b("nativePromiseRegeneratorRuntime").awrap(m(u["delete"](t)));case 23:r++;v.next=16;break;case 26:v.next=28;return b("nativePromiseRegeneratorRuntime").awrap(m(i["delete"](e)));case 28:v.next=30;return b("nativePromiseRegeneratorRuntime").awrap(m(h.remove(l)));case 30:case"end":return v.stop()}},null,this)}function t(a,d,e,f){var h,i,n,o,r,s,t,u,v,w,x,y,z,A,B,C,D,E;return b("nativePromiseRegeneratorRuntime").async(function(F){while(1)switch(F.prev=F.next){case 0:h=q(a);i=h.table(d);n=j(i);o=c.tableNames[d];r=k(e);s=p(d,r);if(!o.autoIncrement){F.next=14;break}t=r[c.tableNames[d].primaryKeyIds[0]];F.t0=b("bs_caml_int64");F.next=11;return b("nativePromiseRegeneratorRuntime").awrap(i.incrementSeed(t===void 0?t:l(t)));case 11:F.t1=F.sent,s=F.t0.of_float.call(F.t0,F.t1),r[c.tableNames[d].primaryKeyIds[0]]=s;case 14:if(!(s==null)){F.next=16;break}throw new Error("Evaluating the object store's key path did not yield a value");case 16:F.next=18;return b("nativePromiseRegeneratorRuntime").awrap(m(n.has(s)));case 18:if(F.sent){F.next=51;break}u=Object.keys(o.indexes);v=0;case 21:if(!(v<u.length)){F.next=34;break}w=u[v];x=p(d,r,w);if(!(x!=null)){F.next=31;break}y=j(i.index(w));F.next=28;return b("nativePromiseRegeneratorRuntime").awrap(m(y.has(x)));case 28:F.t2=!F.sent;if(F.t2){F.next=31;break}g(0,21996,d,w);case 31:v++;F.next=21;break;case 34:F.next=36;return b("nativePromiseRegeneratorRuntime").awrap(m(i.writeNewData(r,f,a)));case 36:z=F.sent;F.next=39;return b("nativePromiseRegeneratorRuntime").awrap(m(n.set(s,z)));case 39:A=Object.keys(o.indexes),B=0;case 41:if(!(B<A.length)){F.next=51;break}C=A[B];D=p(d,r,C);if(!(D!=null)){F.next=48;break}E=j(i.index(C));F.next=48;return b("nativePromiseRegeneratorRuntime").awrap(m(E.set(D,z)));case 48:B++;F.next=41;break;case 51:case"end":return F.stop()}},null,this)}var u;return u={getMetadata:function(){return c},flushWrites:function(c){var d,g,i,j,k,l,m,n,o,q;return b("nativePromiseRegeneratorRuntime").async(function(v){while(1)switch(v.prev=v.next){case 0:if(!(c.length===0)){v.next=2;break}return v.abrupt("return");case 2:d=a.createTransaction(),g=new WeakMap([[e,d]]),(i=c,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!j){v.next=11;break}if(!(k>=i.length)){v.next=8;break}return v.abrupt("break",34);case 8:l=i[k++];v.next=15;break;case 11:k=i.next();if(!k.done){v.next=14;break}return v.abrupt("break",34);case 14:l=k.value;case 15:m=l;n=m[0];o=m[1];q=m[2];if(!(o!=null&&q!=null&&h(p(n,o),p(n,q)))){v.next=24;break}v.next=22;return b("nativePromiseRegeneratorRuntime").awrap(r(g,n,q,u));case 22:v.next=30;break;case 24:if(!(o!=null)){v.next=27;break}v.next=27;return b("nativePromiseRegeneratorRuntime").awrap(s(g,n,b("nullthrows")(p(n,o)),u));case 27:if(!(q!=null)){v.next=30;break}v.next=30;return b("nativePromiseRegeneratorRuntime").awrap(t(g,n,q,u));case 30:v.next=32;return b("nativePromiseRegeneratorRuntime").awrap(f.notifyTableAndIndexSubscribers(n,o,q,g));case 32:v.next=5;break;case 34:f.notifyCommit();case 35:case"end":return v.stop()}},null,this)},subscribeToCommit:function(a){return f.subscribeToCommit(a)},table:function(e){return{get:function(a,c){var f,g,h;return b("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:c===void 0&&(c=new WeakMap());d.key_lookup===!0;f=q(c);g=f.table(e);h=j(g);i.next=7;return b("nativePromiseRegeneratorRuntime").awrap(m(h.has(a)));case 7:if(i.sent){i.next=9;break}return i.abrupt("return",void 0);case 9:i.t0=m;i.t1=g;i.next=13;return b("nativePromiseRegeneratorRuntime").awrap(m(h.get(a)));case 13:i.t2=i.sent;i.t3=u;i.t4=c;i.t5=i.t1.readDataExn.call(i.t1,i.t2,i.t3,i.t4);return i.abrupt("return",i.t0(i.t5));case 18:case"end":return i.stop()}},null,this)},entries:function(a,c,f){c===void 0&&(c="asc");f===void 0&&(f={});return o(b("nativePromiseRegeneratorRuntime").mark(function g(){var h,i,k,l,m,o,p,r;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d.table_scan===!0;h=q(a);i=h.table(e);k=j(i);l=n(k.entries(babelHelpers["extends"]({},f,{dir:c})));return b.delegateYield(l.next(),"t0",6);case 6:m=b.t0;case 7:if(m.done){b.next=20;break}o=m.value,p=o[0],r=o[1];b.t1=l;b.t2=p;return b.delegateYield(i.readDataExn(r,u,a),"t3",12);case 12:b.t4=b.t3;b.next=15;return[b.t2,b.t4];case 15:b.t5=b.sent;return b.delegateYield(b.t1.next.call(b.t1,b.t5),"t6",17);case 17:m=b.t6;b.next=7;break;case 20:case"end":return b.stop()}},g,this)})())},peekNextAutoIncrementId:function(){var d,f;return b("nativePromiseRegeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:d=c.tableNames[e].autoIncrement;d||g(0,19732);h.next=4;return b("nativePromiseRegeneratorRuntime").awrap(a.createTransaction().table(e).readSeed());case 4:f=h.sent;f!==void 0||g(0,19733);return h.abrupt("return",b("bs_caml_int64").of_float(f));case 7:case"end":return h.stop()}},null,this)},subscribe:function(a){return f.subscribeTable(e,a)},index:function(a){var h;return h={get:function(f,g){var h,i,c,k;return b("nativePromiseRegeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:g===void 0&&(g=new WeakMap());h=q(g);i=h.table(e);d.key_lookup===!0;c=j(i.index(a));l.next=7;return b("nativePromiseRegeneratorRuntime").awrap(m(c.has(f)));case 7:if(l.sent){l.next=9;break}return l.abrupt("return",void 0);case 9:l.next=11;return b("nativePromiseRegeneratorRuntime").awrap(m(c.get(f)));case 11:k=l.sent;l.next=14;return b("nativePromiseRegeneratorRuntime").awrap(m(i.readDataExn(k,u,g)));case 14:return l.abrupt("return",l.sent);case 15:case"end":return l.stop()}},null,this)},getKey:function(a){var c;return b("nativePromiseRegeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("nativePromiseRegeneratorRuntime").awrap(h.get(a));case 2:c=d.sent;if(!(c===void 0)){d.next=5;break}return d.abrupt("return",void 0);case 5:return d.abrupt("return",p(e,c));case 6:case"end":return d.stop()}},null,this)},entries:function(f,h,i){h===void 0&&(h="asc");i===void 0&&(i={});return o(b("nativePromiseRegeneratorRuntime").mark(function k(){var m,o,l,p,r,s,t,v,w;return b("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d.table_scan===!0;m=q(f);o=m.table(e);l=j(o.index(a));p=c.tableNames[e].indexes[a].unique;p||g(0,19850);r=n(l.entries(babelHelpers["extends"]({},i,{dir:h})));return b.delegateYield(r.next(),"t0",8);case 8:s=b.t0;case 9:if(s.done){b.next=22;break}t=s.value,v=t[0],w=t[1];b.t1=r;b.t2=v;return b.delegateYield(o.readDataExn(w,u,f),"t3",14);case 14:b.t4=b.t3;b.next=17;return[b.t2,b.t4];case 17:b.t5=b.sent;return b.delegateYield(b.t1.next.call(b.t1,b.t5),"t6",19);case 19:s=b.t6;b.next=9;break;case 22:case"end":return b.stop()}},k,this)})())},subscribe:function(b){return f.subscribeIndex(e,a,b)}}}}}}}}),null);
__d("MemoryDbStore",["invariant","regeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;function h(a){var b=JSON.stringify(a);return b==null?a:JSON.parse(b)}function i(){var a,c={},d=void 0,e=0;function f(a){return c[a]!==void 0?h(c[a]):g(!1,"expected key")}function i(a){c[e++]=h(a);return e-1}return{read:(a=b("regeneratorRuntime")).mark(function a(d){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",h(c[d]));case 1:case"end":return a.stop()}},a,this)}),readDataExn:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",f(c));case 1:case"end":return a.stop()}},a,this)}),readExn:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",f(c));case 1:case"end":return a.stop()}},a,this)}),readHeader:a.mark(function a(){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",h(d));case 1:case"end":return a.stop()}},a,this)}),remove:a.mark(function a(d){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:delete c[d];case 1:case"end":return a.stop()}},a,this)}),write:a.mark(function a(d,e){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c[d]=h(e);case 1:case"end":return a.stop()}},a,this)}),writeData:a.mark(function a(d,e){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c[d]=h(e);case 1:case"end":return a.stop()}},a,this)}),writeHeader:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:d=h(c);case 1:case"end":return a.stop()}},a,this)}),writeNew:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i(c));case 1:case"end":return a.stop()}},a,this)}),writeNewData:a.mark(function a(c){return b("regeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i(c));case 1:case"end":return a.stop()}},a,this)})}}function j(a,c,d){return b("nullthrows")((a.has(c)?a:a.set(c,d())).get(c))}function a(){var a=new Map();return{createTransaction:function(){return{table:function(c){var d=j(a,c,function(){return{indexes:new Map(),seed:0}});return babelHelpers["extends"]({},j(d.indexes,"",i),{incrementSeed:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:if(!(a===void 0)){b.next=2;break}return b.abrupt("return",d.seed++);case 2:d.seed=Math.max(d.seed,a)+1;return b.abrupt("return",a);case 4:case"end":return b.stop()}},null,this)},index:function(a){return j(d.indexes,a,i)},readSeed:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",d.seed);case 1:case"end":return a.stop()}},null,this)}})}}}}}}),null);
__d("LSJSTestMemoryStorage.bs",["LSDbStorage","MemoryDbStore"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("LSDbStorage")(b("MemoryDbStore")(),a)}f.make=a}),null);
__d("LSDatabaseType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,0];b=[0,1];c=[0,2];d=[0,3];e=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70];f.test=a;f.mailbox=b;f.contact=c;f.appAlerts=d;f.core=e;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra}),null);
__d("LSSyncChannel.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,1];b=[0,2];f.realtime=a;f.http=b}),null);
__d("MWLSSchemaEphemeral.bs",["Promise","MPWLSDBCreateSchema.bs","LSJSTestMemoryStorage.bs","MWLSDatabaseInitialData.bs","ReadThroughBatchedTransaction.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("Promise").resolve(b("LSJSTestMemoryStorage.bs").make(b("MPWLSDBCreateSchema.bs").metadata)).then(function(a){return b("ReadThroughBatchedTransaction.bs").runInTransaction(a,b("MWLSDatabaseInitialData.bs").run,557889961).then(function(b){return a})})}f.createDB=a}),null);
__d("MWLSFolderUtils.bs",["LsSystemFolder.bs","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="inbox")return b("LsSystemFolder.bs").inbox;else if(a==="other")return b("LsSystemFolder.bs").other;else if(a==="spam")return b("LsSystemFolder.bs").spam;else if(a==="pending")return b("LsSystemFolder.bs").pending;else if(a==="hidden")return b("LsSystemFolder.bs").hidden;else if(a==="legacy")return b("LsSystemFolder.bs").legacy;else if(a==="disabled")return b("LsSystemFolder.bs").disabled;else if(a==="page_background")return b("LsSystemFolder.bs").background;else if(a==="page_done")return b("LsSystemFolder.bs").done_;else if(a==="blocked")return b("LsSystemFolder.bs").blocked;else{b("recoverableViolation")("Encountered unknown thread folder. Defaulting to inbox","messenger_web_product");return b("LsSystemFolder.bs").inbox}}f.toFolderId=a}),null);
__d("MWLSJewelGetThreadIDs.bs",["React","MWLSActor.bs","SkytaleDB","bs_caml_int64","SkytaleDBHook.bs","SkytaleDBQuery.bs","MessagingThreadType.bs","SortedAsyncIterable.bs","SkytaleDBQuerySubscriptionHook.bs","MWGetCurrentThreadIDForLSThread.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=[b("MessagingThreadType.bs").oneToOne,b("MessagingThreadType.bs").group,b("MessagingThreadType.bs").marketplace];function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWLSActor.bs").useActor(0),e=g.useMemo(function(){var e;return(e=b("SkytaleDBQuery.bs")).map(e.filter(e.bounds(e.getKeyRange(b("SkytaleDB").table(c,"threads").index("folderNameLastActivityTimestampMs").desc,[a,0]),[-179650181,[[0,0],0]]),function(a){return h.findIndex(function(c){return b("bs_caml_int64").eq(a.c,c)})!==-1}),function(e){var a;a=b("SortedAsyncIterable.bs").toArray((a=b("SkytaleDBQuery.bs")).map(a.filter(a.mergeJoin(a.getKeyRange(b("SkytaleDB").table(c,"participants").asc,[e.a,0]),b("SkytaleDB").table(c,"contacts").asc),function(a){return b("bs_caml_int64").neq(a[0].b,d)}),function(a){return a[1].q}));return[e,a]})},[a,c]);return b("SkytaleDBQuerySubscriptionHook.bs").useArray(e).map(function(a){var c=a[0];return b("MWGetCurrentThreadIDForLSThread.bs").get(c.a,c.c,a[1])})}f.useHook=a}),null);
__d("MWLSJewelHasReachedEnd.bs",["React","SkytaleDB","bs_belt_Option","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSFolderUtils.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads_ranges_v2__generated").asc,[b("MWLSFolderUtils.bs").toFolderId(a),0])},[c,a]);return b("bs_belt_Option").mapWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(d),!1,function(a){return!a.h})}f.useHook=a}),null);
__d("MWLSJewelIsActorSnippetSender.bs",["bs_int64","CurrentUser","MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);if(a!==void 0){a=a.snippet_sender_contact_id;if(a!==void 0)return b("bs_int64").to_string(a)===b("CurrentUser").getID();else return!1}else return!1}f.useHook=a}),null);
__d("MWLSJewelLoadMoreThreads.bs",["LS.bs","React","SkytaleDB","bs_caml_int64","promiseDone","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSFolderUtils.bs","ReadThroughBatchedTransaction.bs","LSMailboxThreadsRangesQueryStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);return g.useMemo(function(){return function(){var d=b("ReadThroughBatchedTransaction.bs").runInTransaction(c,function(d){return b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").filter(b("SkytaleDB").table(c,"threads_ranges_v2__generated").asc,function(c){return b("bs_caml_int64").eq(c.a,b("MWLSFolderUtils.bs").toFolderId(a))})).then(function(c){if(c!==void 0){c=c;return b("LSMailboxThreadsRangesQueryStoredProcedure")(b("LS.bs").make(d),b("MWLSFolderUtils.bs").toFolderId(a),!0,!1,c.b,c.d,c.e,c.c,[0,0])}else return b("LSMailboxThreadsRangesQueryStoredProcedure")(b("LS.bs").make(d),b("MWLSFolderUtils.bs").toFolderId(a),!0,!1,[0,0],void 0,void 0,[2328,1316134911],[0,0])})},557889961);b("promiseDone")(d,void 0,void 0);return 0}},[c,a])}f.useHook=a}),null);
__d("MWLSLoadThreadFolderIfNotPresent.bs",["Promise","React","SkytaleDB","bs_caml_int64","promiseDone","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSFolderUtils.bs","CancellationToken.bs","CancellablePromise.bs","MWLSJewelLoadMoreThreads.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0),d=b("MWLSJewelLoadMoreThreads.bs").useHook(a);g.useEffect(function(){var e=b("CancellationToken.bs").make(0),f=b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").filter(b("SkytaleDB").table(c,"threads_ranges_v2__generated").asc,function(c){return b("bs_caml_int64").eq(c.a,b("MWLSFolderUtils.bs").toFolderId(a))}));f=b("CancellablePromise.bs").ignoreFailed(0,b("CancellablePromise.bs").then_(e,function(a){a===void 0&&d();return b("Promise").resolve(0)},f));b("promiseDone")(f,void 0,void 0);return e.cancel},[d,c,a]);return 0}f.useHook=a}),null);
__d("MWLSJewelMessageRequestsThread.bs",["React","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_option","SkytaleDBHook.bs","SkytaleDBQuery.bs","SortedAsyncIterable.bs","SkytaleDBQuerySubscriptionHook.bs","MWLSLoadThreadFolderIfNotPresent.bs","MWJewelMessageRequestsThread.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("MWJewelMessageRequestsThread.react");c={make:h};function i(a){return b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"threads").index("folderNameLastActivityTimestampMs").desc,["pending",0]),function(a){return b("bs_caml_int64").gt(a.i,a.j)})}function j(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWLSActor.bs").useActor(0);a=g.useMemo(function(){return b("SkytaleDBQuery.bs").map(i(c),function(a){a=a.o;if(a!==void 0)return b("bs_belt_Option").map(b("SortedAsyncIterable.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,[a,0])),function(a){return a.h})})},[c,a]);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(a);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);if(a!==void 0)return a;else return}}function k(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWLSActor.bs").useActor(0);a=g.useMemo(function(){return i(c)},[c,a]);return b("SkytaleDBQuerySubscriptionHook.bs").useArray(a).length}function a(a){b("MWLSLoadThreadFolderIfNotPresent.bs").useHook("pending");var c=k(0),d=j(0);if(a!==void 0&&c>0)return g.jsx(h,{onOpenMessageRequests:a,otherParticipantName:d,unreadRequestsCount:c});else return null}f.RequestsThread=c;f.useHook=a}),null);
__d("MWLSJewelSpamMessagesThread.bs",["React","MWLSActor.bs","SkytaleDB","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSJewelHasReachedEnd.bs","SkytaleDBQuerySubscriptionHook.bs","MWJewelSpamMessagesThread.react","MWLSLoadThreadFolderIfNotPresent.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("MWJewelSpamMessagesThread.react");c={make:h};function i(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWLSActor.bs").useActor(0);a=g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").index("folderNameLastActivityTimestampMs").desc,["other",0])},[c,a]);return b("SkytaleDBQuerySubscriptionHook.bs").useArray(a).length}function a(a){b("MWLSLoadThreadFolderIfNotPresent.bs").useHook("other");var c=i(0),d=b("MWLSJewelHasReachedEnd.bs").useHook("other");if(a!==void 0&&c>0)return g.jsx(h,{onOpenSpamMessages:a,loadedAll:d,spamMessagesCount:c});else return null}f.SpamThread=c;f.useHook=a}),null);
__d("MWLSJewelThreadList.react",["MWThreadList.re","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.folder;a=babelHelpers.objectWithoutPropertiesLoose(a,["folder"]);var d=g.useState(!0),e=d[0];d=d[1];return g.jsx(b("MWThreadList.re").make,babelHelpers["extends"]({},a,{folder:c,isLoading:e,setIsLoading:d}))}}),null);
__d("MWLSJewelThreadSeenByImages.bs",["bs_int64","React","MWThread.bs","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_format","SkytaleDBHook.bs","SkytaleDBQuery.bs","SortedAsyncIterable.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWThread.bs").useIdExn(0);var d=b("bs_int64").to_string(b("MWThread.bs").toThreadKey(a)),e=b("bs_int64").to_string(b("MWLSActor.bs").useActor(0)),f=b("SkytaleDBQuerySubscriptionHook.bs").useFirstExn(g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,[b("bs_caml_format").caml_int64_of_string(d),0])},[c,d]));return b("SkytaleDBQuerySubscriptionHook.bs").useArray(g.useMemo(function(){var a,g=b("bs_caml_format").caml_int64_of_string(e);return(a=b("SkytaleDBQuery.bs")).take(a.map(a.filter(a.bounds(a.getKeyRange(b("SkytaleDB").table(c,"participants").index("threadKeyReadWatermarkTimestampMs").asc,[b("bs_caml_format").caml_int64_of_string(d),0]),[448478038,[f.i,0]]),function(a){a=a.b;return b("bs_caml_int64").neq(a,g)}),function(a){a=a.b;return b("bs_belt_Option").map(b("SortedAsyncIterable.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,[a,0])),function(a){return{alt:a.h,src:a.b}})}),3)},[c,d,e])).reduce(function(a,b){if(b!==void 0)return a.concat([b]);else return a},[])}f.useHook=a}),null);
__d("MWLSChatHeadSummary.bs",["React","bs_caml_option","MWLSSnippetRenderer.bs","MWChatHeadSummaryPopout.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.threadTitle;a=a.unread;var d=b("MWLSSnippetRenderer.bs").useHook(0);a={unread:a,content:d};c!==void 0&&(a.title=b("bs_caml_option").valFromOption(c));return g.jsx(b("MWChatHeadSummaryPopout.bs").make,a)}c=a;f.make=c}),null);
__d("MWLSLoadThreadPicture.bs",["MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);if(a!==void 0)return a.picture_urls;else return[]}f.useHook=a}),null);
__d("MWLSLoadThreadTitle.bs",["MWLSCurrentThreadDetails.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,b){return}function a(a){a=b("MWLSCurrentThreadDetails.bs").useCurrentThreadDetails(0);a=a!==void 0?a.thread_name:void 0;return[a,g]}f.useHook=a}),null);
__d("MWLSMarkThreadAsRead.bs",["LS.bs","React","MWThread.bs","bs_caml_int64","promiseDone","SkytaleDBHook.bs","ReadThroughBatchedTransaction.bs","LSMailboxOptimisticMarkThreadReadV2StoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(0);a=b("MWThread.bs").useIdExn(0);var d=b("MWThread.bs").toThreadKey(a);return g.useCallback(function(a){b("promiseDone")(b("ReadThroughBatchedTransaction.bs").runInTransaction(c,function(a){return b("LSMailboxOptimisticMarkThreadReadV2StoredProcedure")(b("LS.bs").make(a),d,b("bs_caml_int64").of_float(Date.now()))},557889961),void 0,void 0);return 0},[d,c])}f.useHook=a}),null);
__d("MWLSPresenceIsThreadActive.bs",["bs_int64","React","MWThread.bs","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_belt_Option","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSPresenceStatus.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=b("MWThread.bs").useId(0);var c=b("SkytaleDBHook.bs").useHook(0),d=b("bs_belt_Option").mapWithDefault(a,[0,0],b("MWThread.bs").toThreadKey);a=b("bs_int64").to_string(d);var e=b("MWLSActor.bs").useActor(0);a=g.useMemo(function(){return b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"participants").asc,[d,0]),b("SkytaleDB").table(c,"presence_states").asc),function(a){if(b("bs_caml_int64").neq(a[0].b,e))return b("bs_caml_int64").eq(a[1].b,b("LSPresenceStatus.bs").active);else return!1})},[c,a,e]);return b("bs_belt_Option").isSome(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(a))}f.useHook=a}),null);
__d("MWLSGetOngoingCallState.bs",["bs_int64","React","MWThread.bs","SkytaleDB","bs_caml_format","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=b("MWThread.bs").useIdExn(0);a=b("MWThread.bs").toThreadKey(a);var c=b("SkytaleDBHook.bs").useHook(0),d=b("bs_int64").to_string(a);return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,[b("bs_caml_format").caml_int64_of_string(d),0]),function(a){return a.u})},[c,d]))}f.useHook=a}),null);
__d("MWLSJewelGetOngoingCallData.bs",["bs_int64","React","MWThread.bs","SkytaleDB","bs_belt_Option","bs_caml_format","bs_caml_option","RTCCallState.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSGetOngoingCallState.bs","LSMessagingThreadTypeUtil.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a,c){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"rtc_ongoing_calls_on_threads_v2").asc,[c,0]),function(a){return a.b})}function a(a){a=b("MWThread.bs").useIdExn(0);var c=b("MWThread.bs").toThreadKey(a),d=b("SkytaleDBHook.bs").useHook(0),e=b("bs_int64").to_string(c);c=b("MWLSGetOngoingCallState.bs").useHook(0);var f=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return h(d,b("bs_caml_format").caml_int64_of_string(e))},[d,e]));if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=a!==void 0?a:null}else a=null;return{call_state:b("bs_belt_Option").mapWithDefault(c,b("RTCCallState.bs").noOngoingCall,function(a){return b("RTCCallState.bs").ofLsRtcCallState(a,f)}),initiator_fbid:null,server_info_data:a}}f.ongoingCallDataQuery=h;f.useHook=a}),null);